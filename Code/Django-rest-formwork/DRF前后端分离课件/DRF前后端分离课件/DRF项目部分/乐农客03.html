<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.5 (458014)"/><meta name="created" content="2019-03-10 07:08:12 +0000"/><meta name="updated" content="2019-03-10 08:45:12 +0000"/><meta name="content-class" content="michalyao.vscode.evermonkey"/><title>乐农客03</title></head><body><!--%EVERMONKEY%IyDlrp7njrDllYblk4HliJfooajpobXmjqXlj6MKIyMg57yW5YaZ5bqP5YiX5YyW5ZKM6KeG5Zu+IApgYGBweXRob24KZnJvbSByZXN0X2ZyYW1ld29yayBpbXBvcnQgc2VyaWFsaXplcnMKCmZyb20gLm1vZGVscyBpbXBvcnQgR29vZHMKCgpjbGFzcyBHb29kc1NlcmlhbGl6ZXIoc2VyaWFsaXplcnMuTW9kZWxTZXJpYWxpemVyKToKICAgIGNsYXNzIE1ldGE6CiAgICAgICAgbW9kZWwgPSBHb29kcwogICAgICAgIGZpZWxkcyA9ICJfX2FsbF9fIgpgYGAKYGBgcHl0aG9uCmZyb20gcmVzdF9mcmFtZXdvcmsgaW1wb3J0IG1peGlucwpmcm9tIHJlc3RfZnJhbWV3b3JrIGltcG9ydCB2aWV3c2V0cwoKZnJvbSAubW9kZWxzIGltcG9ydCBHb29kcwpmcm9tIC5zZXJpYWxpemVycyBpbXBvcnQgR29vZHNTZXJpYWxpemVyCgoKIyBDcmVhdGUgeW91ciB2aWV3cyBoZXJlLgpjbGFzcyBHb29kc0xpc3RWaWV3U2V0KG1peGlucy5MaXN0TW9kZWxNaXhpbiwgdmlld3NldHMuR2VuZXJpY1ZpZXdTZXQpOgogICAgIiIiCiAgICDllYblk4HliJfooajpobUKICAgICIiIgogICAgcXVlcnlzZXQgPSBHb29kcy5vYmplY3RzLmFsbCgpCiAgICBzZXJpYWxpemVyX2NsYXNzID0gR29vZHNTZXJpYWxpemVyCmBgYAojIyDnvJblhpnot6/nlLEKYGBgcHl0aG9uCklOU1RBTExFRF9BUFBTID0gWwogICAgLi4uCiAgICAncmVzdF9mcmFtZXdvcmsnCl0KYGBgCmBgYHB5dGhvbgouLi4KZnJvbSByZXN0X2ZyYW1ld29yay5yb3V0ZXJzIGltcG9ydCBEZWZhdWx0Um91dGVyCi4uLgoKZnJvbSBnb29kcy52aWV3cyBpbXBvcnQgR29vZHNMaXN0Vmlld1NldAoKcm91dGVyID0gRGVmYXVsdFJvdXRlcigpCiMg6YWN572uZ29vZHPnmoR1cmwKcm91dGVyLnJlZ2lzdGVyKHInZ29vZHMnLCBHb29kc0xpc3RWaWV3U2V0KQoKdXJscGF0dGVybnMgPSBbCiAgICAuLi4KICAgIHVybChyJ15hcGktYXV0aC8nLCBpbmNsdWRlKCdyZXN0X2ZyYW1ld29yay51cmxzJywgbmFtZXNwYWNlPSdyZXN0X2ZyYW1ld29yaycpKSwgIyDnmbvpmYYKICAgIHVybChyJ14nLCBpbmNsdWRlKHJvdXRlci51cmxzKSksICAjIOWVhuWTgeWIl+ihqOmhtQogICAgLi4uCl0KYGBgCiMjIOafpeeciwoKIVvlvq7kv6HmiKrlm75fMjAxOTAyMjYxNTQwNDldKGh0dHA6Ly9tZC4xMDBjeHkuY29tLyVFNSVCRSVBRSVFNCVCRiVBMSVFNiU4OCVBQSVFNSU5QiVCRV8yMDE5MDIyNjE1NDA0OS5wbmcpCgojIOWunueOsOaVsOaNruWIhumhtQojIyDpu5jorqTphY3nva4gCmBgYHB5dGhvbgpSRVNUX0ZSQU1FV09SSyA9IHsKICAgICPliIbpobUKICAgICdERUZBVUxUX1BBR0lOQVRJT05fQ0xBU1MnOiAncmVzdF9mcmFtZXdvcmsucGFnaW5hdGlvbi5QYWdlTnVtYmVyUGFnaW5hdGlvbicsCiAgICAj5q+P6aG15pi+56S655qE5Liq5pWwCiAgICAnUEFHRV9TSVpFJzogMTAsCn0KYGBgCiMjIOiHquWumuS5ieWIhumhtee7hOS7tiAKYGBgcHl0aG9uCi4uLgpmcm9tIHJlc3RfZnJhbWV3b3JrLnBhZ2luYXRpb24gaW1wb3J0IFBhZ2VOdW1iZXJQYWdpbmF0aW9uCi4uLgpjbGFzcyBHb29kc1BhZ2luYXRpb24oUGFnZU51bWJlclBhZ2luYXRpb24pOgogICAgcGFnZV9zaXplID0gMTIKICAgIHBhZ2Vfc2l6ZV9xdWVyeV9wYXJhbSA9ICdwYWdlX3NpemUnCiAgICBwYWdlX3F1ZXJ5X3BhcmFtID0gInBhZ2UiCiAgICBtYXhfcGFnZV9zaXplID0gMTAwCgpjbGFzcyBHb29kc0xpc3RWaWV3U2V0KG1peGlucy5MaXN0TW9kZWxNaXhpbiwgdmlld3NldHMuR2VuZXJpY1ZpZXdTZXQpOgogICAgIiIiCiAgICDllYblk4HliJfooajpobUKICAgICIiIgogICAgLi4uCiAgICAjIOWIhumhtQogICAgcGFnaW5hdGlvbl9jbGFzcyA9IEdvb2RzUGFnaW5hdGlvbgpgYGAKCiMjIOafpeeciwohW+W+ruS/oeaIquWbvl8yMDE5MDIyNjE1NDIyOF0oaHR0cDovL21kLjEwMGN4eS5jb20vJUU1JUJFJUFFJUU0JUJGJUExJUU2JTg4JUFBJUU1JTlCJUJFXzIwMTkwMjI2MTU0MjI4LnBuZykKCiMgRFJG6L+H5ruk5Yqf6IO9Clvov4fmu6TjgIHmkJzntKLjgIHmjpLluo/lj4LogIPpk77mjqVdKGh0dHBzOi8vemh1YW5sYW4uemhpaHUuY29tL3AvMzgyMDIwMDIpClvov4fmu6Tlj4LogIPpk77mjqUyXShodHRwOi8vd3d3LmlhbW5hbmN5LnRvcC9kamFuZ29yZXN0ZnJhbWV3b3JrL0ZpbHRlcmluZy8jZGphbmdvZmlsdGVyYmFja2VuZCkKIyMgMeOAgea3u+WKoOWIsGFwcOmHjOmdogpgYGBweXRob24KSU5TVEFMTEVEX0FQUFMgPSBbCiAgICAgJ2RqYW5nb19maWx0ZXJzJywKXQpgYGAKIyMgMuOAgeaWsOW7umZpbHRlcuaWh+S7tiAKYGBgcHl0aG9uCmltcG9ydCBkamFuZ29fZmlsdGVycwoKZnJvbSAubW9kZWxzIGltcG9ydCBHb29kcwoKCmNsYXNzIEdvb2RzRmlsdGVyKGRqYW5nb19maWx0ZXJzLnJlc3RfZnJhbWV3b3JrLkZpbHRlclNldCk6CiAgICAnJycKICAgIOWVhuWTgei/h+a7pOeahOexuwogICAgJycnCiAgICAjIOS4pOS4quWPguaVsO+8jG5hbWXmmK/opoHov4fmu6TnmoTlrZfmrrXvvIxsb29rdXDmmK/miafooYznmoTooYzkuLrvvIzigJjlsI/kuI7nrYnkuo7mnKzlupfku7fmoLzigJkKICAgICMg5a+5c2hvcF9wcmljZeWtl+autei/m+ihjOWkp+S6juetieS6jueahOafpeivogogICAgcHJpY2VtaW4gPSBkamFuZ29fZmlsdGVycy5OdW1iZXJGaWx0ZXIoZmllbGRfbmFtZT0nc2hvcF9wcmljZScsIGhlbHBfdGV4dD0i5pyA5L2O5Lu35qC8IiwgbG9va3VwX2V4cHI9J2d0ZScpCiAgICBwcmljZW1heCA9IGRqYW5nb19maWx0ZXJzLk51bWJlckZpbHRlcihmaWVsZF9uYW1lPSdzaG9wX3ByaWNlJywgbG9va3VwX2V4cHI9J2x0ZScpCgogICAgY2xhc3MgTWV0YToKICAgICAgICBtb2RlbCA9IEdvb2RzCiAgICAgICAgZmllbGRzID0gWydwcmljZW1pbicsJ3ByaWNlbWF4J10KYGBgCiMjIDPjgIHop4blm77phY3nva4KYGBgcHl0aG9uCi4uLgpmcm9tIGRqYW5nb19maWx0ZXJzLnJlc3RfZnJhbWV3b3JrIGltcG9ydCBEamFuZ29GaWx0ZXJCYWNrZW5kCi4uLgpmcm9tIC5maWx0ZXJzIGltcG9ydCBHb29kc0ZpbHRlcgoKLi4uCgoKIyBDcmVhdGUgeW91ciB2aWV3cyBoZXJlLgpjbGFzcyBHb29kc0xpc3RWaWV3U2V0KG1peGlucy5MaXN0TW9kZWxNaXhpbiwgdmlld3NldHMuR2VuZXJpY1ZpZXdTZXQpOgogICAgIiIiCiAgICDllYblk4HliJfooajpobUKICAgICIiIgogICAgLi4uCiAgICBmaWx0ZXJfYmFja2VuZHMgPSAoRGphbmdvRmlsdGVyQmFja2VuZCwpCiAgICAjIOiuvue9rmZpbHRlcueahOexu+S4uuaIkeS7rOiHquWumuS5ieeahOexuwogICAgZmlsdGVyX2NsYXNzID0gR29vZHNGaWx0ZXIKYGBgCiMjIDTjgIHkvb/nlKgKIVvlvq7kv6HmiKrlm75fMjAxOTAyMjYxNjQyMjRdKGh0dHA6Ly9tZC4xMDBjeHkuY29tLyVFNSVCRSVBRSVFNCVCRiVBMSVFNiU4OCVBQSVFNSU5QiVCRV8yMDE5MDIyNjE2NDIyNC5wbmcpCiMgRFJG55qE5pCc57Si5ZKM5o6S5bqP5Yqf6IO9Clvlj4LogIPpk77mjqVdKGh0dHA6Ly93d3cuaWFtbmFuY3kudG9wL2RqYW5nb3Jlc3RmcmFtZXdvcmsvRmlsdGVyaW5nLyNzZWFyY2hmaWx0ZXIpCgojIyDmkJzntKLnu4Tku7YgU2VhcmNoRmlsdGVyCmBgYHB5dGhvbgouLi4KZnJvbSByZXN0X2ZyYW1ld29yayBpbXBvcnQgZmlsdGVycwoKY2xhc3MgR29vZHNMaXN0Vmlld1NldChtaXhpbnMuTGlzdE1vZGVsTWl4aW4sIHZpZXdzZXRzLkdlbmVyaWNWaWV3U2V0KToKICAgICIiIgogICAg5ZWG5ZOB5YiX6KGo6aG1CiAgICAiIiIKICAgIC4uLgogICAgZmlsdGVyX2JhY2tlbmRzID0gKERqYW5nb0ZpbHRlckJhY2tlbmQsZmlsdGVycy5TZWFyY2hGaWx0ZXIpCiAgICAjIOiuvue9rmZpbHRlcueahOexu+S4uuaIkeS7rOiHquWumuS5ieeahOexuwogICAgZmlsdGVyX2NsYXNzID0gR29vZHNGaWx0ZXIKICAgICMg5pCc57SiLD1uYW1l6KGo56S657K+56Gu5pCc57Si77yM5Lmf5Y+v5Lul5L2/55So5ZCE56eN5q2j5YiZ6KGo6L6+5byPCiAgICBzZWFyY2hfZmllbGRzID0gKCc9bmFtZScsKQogICAgIyBzZWFyY2hfZmllbGRzID0gKCc9bmFtZScsICdnb29kc19icmllZicpCmBgYAoKIVvlvq7kv6HmiKrlm75fMjAxOTAyMjYxNjUyMDFdKGh0dHA6Ly9tZC4xMDBjeHkuY29tLyVFNSVCRSVBRSVFNCVCRiVBMSVFNiU4OCVBQSVFNSU5QiVCRV8yMDE5MDIyNjE2NTIwMS5wbmcpCgojIyDmt7vliqDmjpLluo8KYGBgcHl0aG9uCmNsYXNzIEdvb2RzTGlzdFZpZXdTZXQobWl4aW5zLkxpc3RNb2RlbE1peGluLCB2aWV3c2V0cy5HZW5lcmljVmlld1NldCk6CiAgICAiIiIKICAgIOWVhuWTgeWIl+ihqOmhtQogICAgIiIiCiAgICAuLi4KICAgIGZpbHRlcl9iYWNrZW5kcyA9IChEamFuZ29GaWx0ZXJCYWNrZW5kLGZpbHRlcnMuU2VhcmNoRmlsdGVyLGZpbHRlcnMuT3JkZXJpbmdGaWx0ZXIpCiAgICAuLi4KICAgIG9yZGVyaW5nX2ZpZWxkcyA9ICgnc29sZF9udW0nLCAnYWRkX3RpbWUnKSAgIyDmjpLluo8KYGBg%EVERMONKEY%--><div style="-ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; color: #333; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial,freesans, sans-serif,微软雅黑,Heiti SC Light,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol !important; font-size: 26px !important; line-height: 1.6; margin-bottom: 50px; word-wrap: break-word;"><h1 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 32px; font-weight: bold; line-height: 1.2; margin: 0.67em 0; margin-bottom: 16px; margin-top: 0 !important; padding-bottom: 0.3em;">实现商品列表页接口</h1>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">编写序列化和视图</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> serializers

<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> .models <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> Goods


<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsSerializer</span><span style="box-sizing: border-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">Meta</span>:</span>
        model = Goods
        fields = <span style="box-sizing: border-box; color: #d14;">"__all__"</span>
</code></pre>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> mixins
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> viewsets

<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> .models <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> Goods
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> .serializers <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> GoodsSerializer


<span style="box-sizing: border-box; color: #998; font-style: italic;"># Create your views here.</span>
<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsListViewSet</span><span style="box-sizing: border-box;">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">"""
    商品列表页
    """</span>
    queryset = Goods.objects.all()
    serializer_class = GoodsSerializer
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">编写路由</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">INSTALLED_APPS = [
    ...
    <span style="box-sizing: border-box; color: #d14;">'rest_framework'</span>
]
</code></pre>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">...
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework.routers <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> DefaultRouter
...

<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> goods.views <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> GoodsListViewSet

router = DefaultRouter()
<span style="box-sizing: border-box; color: #998; font-style: italic;"># 配置goods的url</span>
router.register(<span style="box-sizing: border-box; color: #d14;">r'goods'</span>, GoodsListViewSet)

urlpatterns = [
    ...
    url(<span style="box-sizing: border-box; color: #d14;">r'^api-auth/'</span>, include(<span style="box-sizing: border-box; color: #d14;">'rest_framework.urls'</span>, namespace=<span style="box-sizing: border-box; color: #d14;">'rest_framework'</span>)), <span style="box-sizing: border-box; color: #998; font-style: italic;"># 登陆</span>
    url(<span style="box-sizing: border-box; color: #d14;">r'^'</span>, include(router.urls)),  <span style="box-sizing: border-box; color: #998; font-style: italic;"># 商品列表页</span>
    ...
]
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">查看</h2>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190226154049.png" alt="微信截图_20190226154049" style="background-color: #fff; border-style: none; box-sizing: content-box; max-width: 100%;"/></p>
<h1 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 32px; font-weight: bold; line-height: 1.2; margin: 0.67em 0; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">实现数据分页</h1>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">默认配置</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">REST_FRAMEWORK = {
    <span style="box-sizing: border-box; color: #998; font-style: italic;">#分页</span>
    <span style="box-sizing: border-box; color: #d14;">'DEFAULT_PAGINATION_CLASS'</span>: <span style="box-sizing: border-box; color: #d14;">'rest_framework.pagination.PageNumberPagination'</span>,
    <span style="box-sizing: border-box; color: #998; font-style: italic;">#每页显示的个数</span>
    <span style="box-sizing: border-box; color: #d14;">'PAGE_SIZE'</span>: <span style="box-sizing: border-box; color: #008080;">10</span>,
}
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">自定义分页组件</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">...
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework.pagination <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> PageNumberPagination
...
<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsPagination</span><span style="box-sizing: border-box;">(PageNumberPagination)</span>:</span>
    page_size = <span style="box-sizing: border-box; color: #008080;">12</span>
    page_size_query_param = <span style="box-sizing: border-box; color: #d14;">'page_size'</span>
    page_query_param = <span style="box-sizing: border-box; color: #d14;">"page"</span>
    max_page_size = <span style="box-sizing: border-box; color: #008080;">100</span>

<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsListViewSet</span><span style="box-sizing: border-box;">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">"""
    商品列表页
    """</span>
    ...
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 分页</span>
    pagination_class = GoodsPagination
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">查看</h2>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190226154228.png" alt="微信截图_20190226154228" style="background-color: #fff; border-style: none; box-sizing: content-box; max-width: 100%;"/></p>
<h1 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 32px; font-weight: bold; line-height: 1.2; margin: 0.67em 0; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">DRF过滤功能</h1>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><a href="https://zhuanlan.zhihu.com/p/38202002" style="-webkit-text-decoration-skip: objects; background-color: transparent; box-sizing: border-box; color: #4078c0; text-decoration: none;">过滤、搜索、排序参考链接</a>
<a href="http://www.iamnancy.top/djangorestframework/Filtering/#djangofilterbackend" style="-webkit-text-decoration-skip: objects; background-color: transparent; box-sizing: border-box; color: #4078c0; text-decoration: none;">过滤参考链接2</a></p>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">1、添加到app里面</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">INSTALLED_APPS = [
     <span style="box-sizing: border-box; color: #d14;">'django_filters'</span>,
]
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">2、新建filter文件</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> django_filters

<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> .models <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> Goods


<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsFilter</span><span style="box-sizing: border-box;">(django_filters.rest_framework.FilterSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">'''
    商品过滤的类
    '''</span>
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 两个参数，name是要过滤的字段，lookup是执行的行为，‘小与等于本店价格’</span>
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 对shop_price字段进行大于等于的查询</span>
    pricemin = django_filters.NumberFilter(field_name=<span style="box-sizing: border-box; color: #d14;">'shop_price'</span>, help_text=<span style="box-sizing: border-box; color: #d14;">"最低价格"</span>, lookup_expr=<span style="box-sizing: border-box; color: #d14;">'gte'</span>)
    pricemax = django_filters.NumberFilter(field_name=<span style="box-sizing: border-box; color: #d14;">'shop_price'</span>, lookup_expr=<span style="box-sizing: border-box; color: #d14;">'lte'</span>)

    <span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">Meta</span>:</span>
        model = Goods
        fields = [<span style="box-sizing: border-box; color: #d14;">'pricemin'</span>,<span style="box-sizing: border-box; color: #d14;">'pricemax'</span>]
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">3、视图配置</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">...
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> django_filters.rest_framework <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> DjangoFilterBackend
...
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> .filters <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> GoodsFilter

...


<span style="box-sizing: border-box; color: #998; font-style: italic;"># Create your views here.</span>
<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsListViewSet</span><span style="box-sizing: border-box;">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">"""
    商品列表页
    """</span>
    ...
    filter_backends = (DjangoFilterBackend,)
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 设置filter的类为我们自定义的类</span>
    filter_class = GoodsFilter
</code></pre>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">4、使用</h2>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190226164224.png" alt="微信截图_20190226164224" style="background-color: #fff; border-style: none; box-sizing: content-box; max-width: 100%;"/></p>
<h1 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 32px; font-weight: bold; line-height: 1.2; margin: 0.67em 0; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">DRF的搜索和排序功能</h1>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><a href="http://www.iamnancy.top/djangorestframework/Filtering/#searchfilter" style="-webkit-text-decoration-skip: objects; background-color: transparent; box-sizing: border-box; color: #4078c0; text-decoration: none;">参考链接</a></p>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">搜索组件 SearchFilter</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 16px; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;">...
<span style="box-sizing: border-box; color: #333; font-weight: bold;">from</span> rest_framework <span style="box-sizing: border-box; color: #333; font-weight: bold;">import</span> filters

<span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsListViewSet</span><span style="box-sizing: border-box;">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">"""
    商品列表页
    """</span>
    ...
    filter_backends = (DjangoFilterBackend,filters.SearchFilter)
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 设置filter的类为我们自定义的类</span>
    filter_class = GoodsFilter
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># 搜索,=name表示精确搜索，也可以使用各种正则表达式</span>
    search_fields = (<span style="box-sizing: border-box; color: #d14;">'=name'</span>,)
    <span style="box-sizing: border-box; color: #998; font-style: italic;"># search_fields = ('=name', 'goods_brief')</span>
</code></pre>
<p style="box-sizing: border-box; margin-bottom: 16px; margin-top: 0;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190226165201.png" alt="微信截图_20190226165201" style="background-color: #fff; border-style: none; box-sizing: content-box; max-width: 100%;"/></p>
<h2 style="border-bottom: 1px solid #eee; box-sizing: border-box; font-size: 28px; font-weight: bold; line-height: 1.225; margin-bottom: 16px; margin-top: 1em; padding-bottom: 0.3em;">添加排序</h2>
<pre style="background: #f8f8f8; border-radius: 3px; box-sizing: border-box; color: #333; display: block; font: 12px Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-family: Helvetica Neue,Helvetica,Segoe UI,Arial !important; font-size: 18px !important; line-height: 1.45; margin-bottom: 0 !important; margin-top: 0; overflow: auto; overflow-x: auto; padding: 16px; word-wrap: normal;"><code style="background: transparent; background-color: transparent; border: 0; border-radius: 3px; box-sizing: border-box; display: inline; font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 100%; line-height: inherit; margin: 0; max-width: initial; overflow: initial; padding: 0; padding-bottom: 0.2em; padding-top: 0.2em; white-space: pre; word-break: normal; word-wrap: normal;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #333; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: #458; font-weight: bold;">GoodsListViewSet</span><span style="box-sizing: border-box;">(mixins.ListModelMixin, viewsets.GenericViewSet)</span>:</span>
    <span style="box-sizing: border-box; color: #d14;">"""
    商品列表页
    """</span>
    ...
    filter_backends = (DjangoFilterBackend,filters.SearchFilter,filters.OrderingFilter)
    ...
    ordering_fields = (<span style="box-sizing: border-box; color: #d14;">'sold_num'</span>, <span style="box-sizing: border-box; color: #d14;">'add_time'</span>)  <span style="box-sizing: border-box; color: #998; font-style: italic;"># 排序</span>
</code></pre>
</div></body></html>