<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.5 (458014)"/><meta name="altitude" content="37.39571762084961"/><meta name="author" content="李居豪"/><meta name="created" content="2019-04-23 02:19:11 +0000"/><meta name="latitude" content="39.62996778867593"/><meta name="longitude" content="116.0482155605452"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-04-23 02:19:32 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>DRF进阶04</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">django rest_framework 权限</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">在视图里面去设置权限</h2>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">OrderView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    authentication_classes = [MyAuthtication]

    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        ret = {<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"state_code"</span>: <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1000</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"msg"</span>: <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"数据请求成功"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"data"</span>: ORDER_DICT}
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> request.user.user_type != <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>:
            ret = {<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"state_code"</span>: <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1001</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"msg"</span>: <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"无权限"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"data"</span>: []}

        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> JsonResponse(ret)
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090323.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">postman校验</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090426.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">基本使用</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">问题: 不用视图</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">MyPermission</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(object)</span>:</span>

	<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">has_permission</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self,request,view)</span>:</span>
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> request.user.user_type != <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>:
			<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">False</span>
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>
											
			
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">OrderView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
	<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"""
	订单相关业务(只有SVIP用户有权限)
	"""</span>
	permission_classes = [MyPermission,]
					
	<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self,request,*args,**kwargs)</span>:</span>
		<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># request.user</span>
		<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># request.auth</span>
		self.dispatch
		ret = {<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'code'</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1000</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'msg'</span>:<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">None</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'data'</span>:<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">None</span>}
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span>:
			ret[<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'data'</span>] = ORDER_DICT
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">except</span> Exception <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">as</span> e:
			<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">pass</span>
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> JsonResponse(ret)
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090732.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">我们可以添加一个message</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">MyPermission</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(object)</span>:</span>
    message = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"无权访问"</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">has_permission</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, view)</span>:</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> request.user.user_type != <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>:
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">False</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111091047.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">源码流程</h2>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">梳理：</h2>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">使用
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">类，必须继承：BasePermission，必须实现：has_permission方法</li>
</ul>
</li>
</ol>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">from</span> rest_framework.permissions <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> BasePermission

<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">SVIPPermission</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(BasePermission)</span>:</span>
	message = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"必须是SVIP才能访问"</span>
	dehas_permission(self,request,view):
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> request.useuser_type != <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">3</span>:
			<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">False</span>
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">返回值：
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">True, 有权访问</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">False，无权访问</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">局部</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
	<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"""
	订单相关业务（普通用户、VIP）
	"""</span>
	permission_classes = [MyPermission1, ]

	<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self,request,*args,**kwargs)</span>:</span>
		<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'用户信息'</span>)
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">全局</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">REST_FRAMEWORK = {
<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"DEFAULT_PERMISSION_CLASSES"</span>:[<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'api.utils.permission.SVIPPermission'</span>]
}
</code></pre>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">权限的内置类</h1>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190220162929.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20django%20rest_framework%20%E6%9D%83%E9%99%90%20%0A%0A%23%23%20%E5%9C%A8%E8%A7%86%E5%9B%BE%E9%87%8C%E9%9D%A2%E5%8E%BB%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90%20%0A%60%60%60python%0Aclass%20OrderView(APIView)%3A%0A%20%20%20%20authentication_classes%20%3D%20%5BMyAuthtication%5D%0A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20ret%20%3D%20%7B%22state_code%22%3A%201000%2C%20%22msg%22%3A%20%22%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E6%88%90%E5%8A%9F%22%2C%20%22data%22%3A%20ORDER_DICT%7D%0A%20%20%20%20%20%20%20%20if%20request.user.user_type%20!%3D%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20ret%20%3D%20%7B%22state_code%22%3A%201001%2C%20%22msg%22%3A%20%22%E6%97%A0%E6%9D%83%E9%99%90%22%2C%20%22data%22%3A%20%5B%5D%7D%0A%0A%20%20%20%20%20%20%20%20return%20JsonResponse(ret)%0A%60%60%60%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090323%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190111090323.png)%09%0A%0A-%20postman%E6%A0%A1%E9%AA%8C%20%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090426%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190111090426.png)%0A%0A%0A%23%23%20%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%0A-%20%E9%97%AE%E9%A2%98%3A%20%E4%B8%8D%E7%94%A8%E8%A7%86%E5%9B%BE%0A%60%60%60python%09%09%09%09%09%09%0Aclass%20MyPermission(object)%3A%0A%0A%09def%20has_permission(self%2Crequest%2Cview)%3A%0A%09%09if%20request.user.user_type%20!%3D%203%3A%0A%09%09%09return%20False%0A%09%09return%20True%0A%09%09%09%09%09%09%09%09%09%09%09%0A%09%09%09%0Aclass%20OrderView(APIView)%3A%0A%09%22%22%22%0A%09%E8%AE%A2%E5%8D%95%E7%9B%B8%E5%85%B3%E4%B8%9A%E5%8A%A1(%E5%8F%AA%E6%9C%89SVIP%E7%94%A8%E6%88%B7%E6%9C%89%E6%9D%83%E9%99%90)%0A%09%22%22%22%0A%09permission_classes%20%3D%20%5BMyPermission%2C%5D%0A%09%09%09%09%09%0A%09def%20get(self%2Crequest%2C*args%2C**kwargs)%3A%0A%09%09%23%20request.user%0A%09%09%23%20request.auth%0A%09%09self.dispatch%0A%09%09ret%20%3D%20%7B'code'%3A1000%2C'msg'%3ANone%2C'data'%3ANone%7D%0A%09%09try%3A%0A%09%09%09ret%5B'data'%5D%20%3D%20ORDER_DICT%0A%09%09except%20Exception%20as%20e%3A%0A%09%09%09pass%0A%09%09return%20JsonResponse(ret)%0A%60%60%60%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111090732%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190111090732.png)%0A%0A%0A-%20%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AAmessage%0A%60%60%60python%0Aclass%20MyPermission(object)%3A%0A%20%20%20%20message%20%3D%20%22%E6%97%A0%E6%9D%83%E8%AE%BF%E9%97%AE%22%0A%20%20%20%20def%20has_permission(self%2C%20request%2C%20view)%3A%0A%20%20%20%20%20%20%20%20if%20request.user.user_type%20!%3D%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20False%0A%20%20%20%20%20%20%20%20return%20True%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190111091047%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190111091047.png)%0A%0A%23%23%20%E6%BA%90%E7%A0%81%E6%B5%81%E7%A8%8B%0A%09%09%09%0A%23%23%20%E6%A2%B3%E7%90%86%EF%BC%9A%0A1.%20%E4%BD%BF%E7%94%A8%0A%09-%20%E7%B1%BB%EF%BC%8C%E5%BF%85%E9%A1%BB%E7%BB%A7%E6%89%BF%EF%BC%9ABasePermission%EF%BC%8C%E5%BF%85%E9%A1%BB%E5%AE%9E%E7%8E%B0%EF%BC%9Ahas_permission%E6%96%B9%E6%B3%95%0A%60%60%60python%0Afrom%20rest_framework.permissions%20import%20BasePermission%0A%0Aclass%20SVIPPermission(BasePermission)%3A%0A%09message%20%3D%20%22%E5%BF%85%E9%A1%BB%E6%98%AFSVIP%E6%89%8D%E8%83%BD%E8%AE%BF%E9%97%AE%22%0A%09dehas_permission(self%2Crequest%2Cview)%3A%0A%09%09if%20request.useuser_type%20!%3D%203%3A%0A%09%09%09return%20False%0A%09%09return%20True%0A%60%60%60%0A-%20%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%9A%09%0A%09-%20True%2C%20%E6%9C%89%E6%9D%83%E8%AE%BF%E9%97%AE%0A%09-%20False%EF%BC%8C%E6%97%A0%E6%9D%83%E8%AE%BF%E9%97%AE%0A-%20%E5%B1%80%E9%83%A8%20%0A%60%60%60python%0Aclass%20UserInfoView(APIView)%3A%0A%09%22%22%22%0A%09%E8%AE%A2%E5%8D%95%E7%9B%B8%E5%85%B3%E4%B8%9A%E5%8A%A1%EF%BC%88%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E3%80%81VIP%EF%BC%89%0A%09%22%22%22%0A%09permission_classes%20%3D%20%5BMyPermission1%2C%20%5D%0A%0A%09def%20get(self%2Crequest%2C*args%2C**kwargs)%3A%0A%09%09return%20HttpResponse('%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF')%0A%60%60%60%0A-%20%E5%85%A8%E5%B1%80%20%0A%60%60%60python%0AREST_FRAMEWORK%20%3D%20%7B%0A%22DEFAULT_PERMISSION_CLASSES%22%3A%5B'api.utils.permission.SVIPPermission'%5D%0A%7D%0A%60%60%60%0A%09%09%09%09%0A%23%20%E6%9D%83%E9%99%90%E7%9A%84%E5%86%85%E7%BD%AE%E7%B1%BB%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190220162929%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190220162929.png)%0A%0A%0A</center></body></html>