<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.5 (458014)"/><meta name="altitude" content="37"/><meta name="author" content="李居豪"/><meta name="created" content="2019-04-23 02:21:59 +0000"/><meta name="latitude" content="39.63002618769669"/><meta name="longitude" content="116.048418911503"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-05-07 12:39:07 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>DRF进阶08</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">序列化</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">序列化有两大功能:请求数据的验证,对queryset的序列化</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">创建URL</p>
</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"> url(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">r'^(?P&lt;version&gt;[v1|v2]+)/roles/$'</span>, views.RolesView.as_view()),
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">编写视图(方法1)</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> json
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">from</span> django.forms.models <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> model_to_dict
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">RolesView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#dgango序列化方式一</span>
        roles = models.Role.objects.all().values(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'id'</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>)
        roles = list(roles)
         ret = json.dumps(roles,ensure_ascii=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">False</span>)

        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># dgango序列化方式二</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># roles = models.Role.objects.all()</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># ret = []</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># for model in roles:</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#     data = model_to_dict(model)</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#     ret.append(data)</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># </span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># print(ret)</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># ret = json.dumps(ret,ensure_ascii=False)</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(ret,content_type=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'application/json'</span>)
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">浏览器效果</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119005034.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">DRF序列化</h1>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">from</span> rest_framework <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> serializers


<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">RolesSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 必须给数据库的字段一致</span>
    title = serializers.CharField()


<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">RolesView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        roles = models.Role.objects.all()
        ser = RolesSerializer(instance=roles, many=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> json
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(json.dumps(ser.data))
</code></pre>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">自定义序列化</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">创建URL</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">url(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">r'^(?P&lt;version&gt;[v1|v2]+)/userinfo/$'</span>, views.UserInfoView.as_view())
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">创建视图</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    username = serializers.CharField()
    password = serializers.CharField()



<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        users = models.UserInfo.objects.all()
        ser = UserInfoSerializer(users, many=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> json
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(json.dumps(ser.data))
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">假设我需要把用户类型也显示出来</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    user_type = serializers.IntegerField()
    ...
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119012852.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">显示具体choice中文</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    xxxx = serializers.IntegerField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'user_type'</span>)
    oooo = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'get_user_type_display'</span>)
    username = serializers.CharField()
    password = serializers.CharField()
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119014314.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">显示指定内容</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    ...
    gp = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.id"</span>)
    gp2 = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.title"</span>)
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119015235.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># source找到数据库对应的字段</span>
    xxxx = serializers.IntegerField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'user_type'</span>)
    oooo = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'get_user_type_display'</span>)
    username = serializers.CharField()
    password = serializers.CharField()
    gp = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.id"</span>)
    gp2 = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.title"</span>)
    rls = serializers.SerializerMethodField()  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 自定义显示</span>

    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get_rls</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, row)</span>:</span>  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># row当前行的对象</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> [
            {
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'id'</span>: <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>,
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>: <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'老司机'</span>
            }
        ]
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119020029.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    xxxx = serializers.IntegerField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'user_type'</span>)
    oooo = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'get_user_type_display'</span>)
    username = serializers.CharField()
    password = serializers.CharField()
    gp = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.id"</span>)
    gp2 = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"group.title"</span>)
    rls = serializers.SerializerMethodField()  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 自定义显示</span>

    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get_rls</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, row)</span>:</span>  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># row当前行的对象</span>
        role_obj_list = row.roles.all()

        ret = []
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> item <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">in</span> role_obj_list:
            ret.append({
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'id'</span>: item.id,
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>: item.title
            })

        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> ret
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119021006.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">ModelSerializer</h1>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"__all__"</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119022808.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = [<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"id"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"username"</span>]
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119022950.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    oooo = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'get_user_type_display'</span>)

    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = [<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"id"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"username"</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'oooo'</span>]
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119023118.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    oooo = serializers.CharField(source=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'get_user_type_display'</span>)
    rls = serializers.SerializerMethodField()

    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = [<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"id"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"username"</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'oooo'</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'rls'</span>]

    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get_rls</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, row)</span>:</span>
        role_obj_list = row.roles.all()

        ret = []
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> item <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">in</span> role_obj_list:
            ret.append({
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'id'</span>: item.id,
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>: item.title
            })
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> ret
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119023440.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">DRF序列化深度控制</h1>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"__all__"</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119110515.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 官方建议depth不要超过10层,个人建议撑死3层</span>
<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"__all__"</span>
        depth = <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>  <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 深度控制,数字表示往里面拿的层数,写1就为1层,但是层数越多，效率越慢</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119110708.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">序列化生成hypermed（给url）</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">编写URL</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"> url(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">r'^(?P&lt;version&gt;[v1|v2]+)/group/(?P&lt;pk&gt;\d+)/$'</span>, views.GroupfoView.as_view(),name=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'gp'</span>)
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">查看组的详细</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">GroupSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserGroup
        fields = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"__all__"</span>


<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">GroupfoView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        pk = kwargs.get(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'pk'</span>)
        obj = models.UserGroup.objects.filter(pk=pk).first()
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> json
        ser = GroupSerializer(instance=obj, many=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">False</span>)
        ret = json.dumps(ser.data)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(ret)
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">改进</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">get</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        ...
        ser = UserInfoSerializer(users, many=<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">True</span>,context={<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'request'</span>: request})
        ...
</code></pre>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserInfoSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.ModelSerializer)</span>:</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;"># 帮我们反向生成URL，相当于我们给了group一个id,它帮我们反向生成一个url</span>
    group = serializers.HyperlinkedIdentityField(view_name=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'gp'</span>)

    <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">Meta</span>:</span>
        model = models.UserInfo
        fields = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"__all__"</span>
        depth = <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119113108.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">序列化验证</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">编写URL</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">url(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">r'^(?P&lt;version&gt;[v1|v2]+)/usergroup/$'</span>, views.UserGroupView.as_view(), name=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'ugp'</span>),
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">编写视图</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserGroupView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">post</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        print(request.data)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> HttpResponse(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">"提交数据"</span>)
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">post提交数据</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119132729.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119132812.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">验证</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserGroupSerializer</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(serializers.Serializer)</span>:</span>
    title = serializers.CharField()


<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">UserGroupView</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(APIView)</span>:</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">post</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(self, request, *args, **kwargs)</span>:</span>
        ...
        ser = UserGroupSerializer(data=request.data)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> ser.is_valid():
            print(ser.validated_data)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">else</span>:
            print(ser.errors)
        ...
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133328.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133449.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133519.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133549.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">自定义错误信息</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="http://md.100cxy.com/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133856.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"/></p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E5%BA%8F%E5%88%97%E5%8C%96%20%20%0A%0A-%20%E5%BA%8F%E5%88%97%E5%8C%96%E6%9C%89%E4%B8%A4%E5%A4%A7%E5%8A%9F%E8%83%BD%3A%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E7%9A%84%E9%AA%8C%E8%AF%81%2C%E5%AF%B9queryset%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%0A%0A-%20%E5%88%9B%E5%BB%BAURL%20%0A%60%60%60python%0A%20url(r'%5E(%3FP%3Cversion%3E%5Bv1%7Cv2%5D%2B)%2Froles%2F%24'%2C%20views.RolesView.as_view())%2C%0A%60%60%60%0A%0A-%20%E7%BC%96%E5%86%99%E8%A7%86%E5%9B%BE(%E6%96%B9%E6%B3%951)%20%20%0A%60%60%60python%0Aimport%20json%0Afrom%20django.forms.models%20import%20model_to_dict%0Aclass%20RolesView(APIView)%3A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20%23dgango%E5%BA%8F%E5%88%97%E5%8C%96%E6%96%B9%E5%BC%8F%E4%B8%80%0A%20%20%20%20%20%20%20%20roles%20%3D%20models.Role.objects.all().values('id'%2C%20'title')%0A%20%20%20%20%20%20%20%20roles%20%3D%20list(roles)%0A%20%20%20%20%20%20%20%20%20ret%20%3D%20json.dumps(roles%2Censure_ascii%3DFalse)%0A%0A%20%20%20%20%20%20%20%20%23%20dgango%E5%BA%8F%E5%88%97%E5%8C%96%E6%96%B9%E5%BC%8F%E4%BA%8C%0A%20%20%20%20%20%20%20%20%23%20roles%20%3D%20models.Role.objects.all()%0A%20%20%20%20%20%20%20%20%23%20ret%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20%23%20for%20model%20in%20roles%3A%0A%20%20%20%20%20%20%20%20%23%20%20%20%20%20data%20%3D%20model_to_dict(model)%0A%20%20%20%20%20%20%20%20%23%20%20%20%20%20ret.append(data)%0A%20%20%20%20%20%20%20%20%23%20%0A%20%20%20%20%20%20%20%20%23%20print(ret)%0A%20%20%20%20%20%20%20%20%23%20ret%20%3D%20json.dumps(ret%2Censure_ascii%3DFalse)%0A%20%20%20%20%20%20%20%20return%20HttpResponse(ret%2Ccontent_type%3D'application%2Fjson')%0A%60%60%60%0A%0A-%20%E6%B5%8F%E8%A7%88%E5%99%A8%E6%95%88%E6%9E%9C%20%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119005034%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119005034.png)%0A%0A%0A%23%20DRF%E5%BA%8F%E5%88%97%E5%8C%96%20%20%0A%60%60%60python%0Afrom%20rest_framework%20import%20serializers%0A%0A%0Aclass%20RolesSerializer(serializers.Serializer)%3A%0A%20%20%20%20%23%20%E5%BF%85%E9%A1%BB%E7%BB%99%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%80%E8%87%B4%0A%20%20%20%20title%20%3D%20serializers.CharField()%0A%0A%0Aclass%20RolesView(APIView)%3A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20roles%20%3D%20models.Role.objects.all()%0A%20%20%20%20%20%20%20%20ser%20%3D%20RolesSerializer(instance%3Droles%2C%20many%3DTrue)%0A%20%20%20%20%20%20%20%20import%20json%0A%20%20%20%20%20%20%20%20return%20HttpResponse(json.dumps(ser.data))%0A%60%60%60%0A%0A%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%8F%E5%88%97%E5%8C%96%0A-%20%E5%88%9B%E5%BB%BAURL%0A%60%60%60python%0Aurl(r'%5E(%3FP%3Cversion%3E%5Bv1%7Cv2%5D%2B)%2Fuserinfo%2F%24'%2C%20views.UserInfoView.as_view())%0A%60%60%60%0A-%20%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%20%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20username%20%3D%20serializers.CharField()%0A%20%20%20%20password%20%3D%20serializers.CharField()%0A%0A%0A%0Aclass%20UserInfoView(APIView)%3A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20users%20%3D%20models.UserInfo.objects.all()%0A%20%20%20%20%20%20%20%20ser%20%3D%20UserInfoSerializer(users%2C%20many%3DTrue)%0A%20%20%20%20%20%20%20%20import%20json%0A%20%20%20%20%20%20%20%20return%20HttpResponse(json.dumps(ser.data))%0A%60%60%60%0A%0A%0A-%20%E5%81%87%E8%AE%BE%E6%88%91%E9%9C%80%E8%A6%81%E6%8A%8A%E7%94%A8%E6%88%B7%E7%B1%BB%E5%9E%8B%E4%B9%9F%E6%98%BE%E7%A4%BA%E5%87%BA%E6%9D%A5%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20user_type%20%3D%20serializers.IntegerField()%0A%20%20%20%20...%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119012852%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119012852.png)%0A%0A-%20%E6%98%BE%E7%A4%BA%E5%85%B7%E4%BD%93choice%E4%B8%AD%E6%96%87%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20xxxx%20%3D%20serializers.IntegerField(source%3D'user_type')%0A%20%20%20%20oooo%20%3D%20serializers.CharField(source%3D'get_user_type_display')%0A%20%20%20%20username%20%3D%20serializers.CharField()%0A%20%20%20%20password%20%3D%20serializers.CharField()%0A%60%60%60%0A%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119014314%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119014314.png)%0A%0A%0A-%20%E6%98%BE%E7%A4%BA%E6%8C%87%E5%AE%9A%E5%86%85%E5%AE%B9%20%20%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20...%0A%20%20%20%20gp%20%3D%20serializers.CharField(source%3D%22group.id%22)%0A%20%20%20%20gp2%20%3D%20serializers.CharField(source%3D%22group.title%22)%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119015235%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119015235.png)%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20%23%20source%E6%89%BE%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AD%97%E6%AE%B5%0A%20%20%20%20xxxx%20%3D%20serializers.IntegerField(source%3D'user_type')%0A%20%20%20%20oooo%20%3D%20serializers.CharField(source%3D'get_user_type_display')%0A%20%20%20%20username%20%3D%20serializers.CharField()%0A%20%20%20%20password%20%3D%20serializers.CharField()%0A%20%20%20%20gp%20%3D%20serializers.CharField(source%3D%22group.id%22)%0A%20%20%20%20gp2%20%3D%20serializers.CharField(source%3D%22group.title%22)%0A%20%20%20%20rls%20%3D%20serializers.SerializerMethodField()%20%20%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%BE%E7%A4%BA%0A%0A%20%20%20%20def%20get_rls(self%2C%20row)%3A%20%20%23%20row%E5%BD%93%E5%89%8D%E8%A1%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'id'%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'title'%3A%20'%E8%80%81%E5%8F%B8%E6%9C%BA'%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119020029%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119020029.png)%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.Serializer)%3A%0A%20%20%20%20xxxx%20%3D%20serializers.IntegerField(source%3D'user_type')%0A%20%20%20%20oooo%20%3D%20serializers.CharField(source%3D'get_user_type_display')%0A%20%20%20%20username%20%3D%20serializers.CharField()%0A%20%20%20%20password%20%3D%20serializers.CharField()%0A%20%20%20%20gp%20%3D%20serializers.CharField(source%3D%22group.id%22)%0A%20%20%20%20gp2%20%3D%20serializers.CharField(source%3D%22group.title%22)%0A%20%20%20%20rls%20%3D%20serializers.SerializerMethodField()%20%20%23%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%BE%E7%A4%BA%0A%0A%20%20%20%20def%20get_rls(self%2C%20row)%3A%20%20%23%20row%E5%BD%93%E5%89%8D%E8%A1%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%0A%20%20%20%20%20%20%20%20role_obj_list%20%3D%20row.roles.all()%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20for%20item%20in%20role_obj_list%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20ret.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'id'%3A%20item.id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'title'%3A%20item.title%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%20%20%20%20return%20ret%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119021006%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119021006.png)%0A%0A%0A%23%20ModelSerializer%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%22__all__%22%0A%60%60%60%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119022808%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119022808.png)%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%5B%22id%22%2C%20%22username%22%5D%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119022950%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119022950.png)%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20oooo%20%3D%20serializers.CharField(source%3D'get_user_type_display')%0A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%5B%22id%22%2C%20%22username%22%2C'oooo'%5D%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119023118%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119023118.png)%0A%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20oooo%20%3D%20serializers.CharField(source%3D'get_user_type_display')%0A%20%20%20%20rls%20%3D%20serializers.SerializerMethodField()%0A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%5B%22id%22%2C%20%22username%22%2C%20'oooo'%2C%20'rls'%5D%0A%0A%20%20%20%20def%20get_rls(self%2C%20row)%3A%0A%20%20%20%20%20%20%20%20role_obj_list%20%3D%20row.roles.all()%0A%0A%20%20%20%20%20%20%20%20ret%20%3D%20%5B%5D%0A%20%20%20%20%20%20%20%20for%20item%20in%20role_obj_list%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20ret.append(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'id'%3A%20item.id%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'title'%3A%20item.title%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20ret%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119023440%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119023440.png)%0A%0A%0A%0A%0A%23%20DRF%E5%BA%8F%E5%88%97%E5%8C%96%E6%B7%B1%E5%BA%A6%E6%8E%A7%E5%88%B6%20%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%22__all__%22%0A%60%60%60%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119110515%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119110515.png)%0A%60%60%60python%0A%23%20%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AEdepth%E4%B8%8D%E8%A6%81%E8%B6%85%E8%BF%8710%E5%B1%82%2C%E4%B8%AA%E4%BA%BA%E5%BB%BA%E8%AE%AE%E6%92%91%E6%AD%BB3%E5%B1%82%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%22__all__%22%0A%20%20%20%20%20%20%20%20depth%20%3D%201%20%20%23%20%E6%B7%B1%E5%BA%A6%E6%8E%A7%E5%88%B6%2C%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E5%BE%80%E9%87%8C%E9%9D%A2%E6%8B%BF%E7%9A%84%E5%B1%82%E6%95%B0%2C%E5%86%991%E5%B0%B1%E4%B8%BA1%E5%B1%82%2C%E4%BD%86%E6%98%AF%E5%B1%82%E6%95%B0%E8%B6%8A%E5%A4%9A%EF%BC%8C%E6%95%88%E7%8E%87%E8%B6%8A%E6%85%A2%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119110708%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119110708.png)%0A%0A%0A%23%20%E5%BA%8F%E5%88%97%E5%8C%96%E7%94%9F%E6%88%90hypermed%EF%BC%88%E7%BB%99url%EF%BC%89%0A%0A-%20%E7%BC%96%E5%86%99URL%0A%60%60%60python%0A%20url(r'%5E(%3FP%3Cversion%3E%5Bv1%7Cv2%5D%2B)%2Fgroup%2F(%3FP%3Cpk%3E%5Cd%2B)%2F%24'%2C%20views.GroupfoView.as_view()%2Cname%3D'gp')%0A%60%60%60%0A-%20%E6%9F%A5%E7%9C%8B%E7%BB%84%E7%9A%84%E8%AF%A6%E7%BB%86%20%0A%60%60%60python%0Aclass%20GroupSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserGroup%0A%20%20%20%20%20%20%20%20fields%20%3D%20%22__all__%22%0A%0A%0Aclass%20GroupfoView(APIView)%3A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20pk%20%3D%20kwargs.get('pk')%0A%20%20%20%20%20%20%20%20obj%20%3D%20models.UserGroup.objects.filter(pk%3Dpk).first()%0A%20%20%20%20%20%20%20%20import%20json%0A%20%20%20%20%20%20%20%20ser%20%3D%20GroupSerializer(instance%3Dobj%2C%20many%3DFalse)%0A%20%20%20%20%20%20%20%20ret%20%3D%20json.dumps(ser.data)%0A%20%20%20%20%20%20%20%20return%20HttpResponse(ret)%0A%60%60%60%0A%0A-%20%E6%94%B9%E8%BF%9B%20%0A%60%60%60python%0Aclass%20UserInfoView(APIView)%3A%0A%20%20%20%20def%20get(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20...%0A%20%20%20%20%20%20%20%20ser%20%3D%20UserInfoSerializer(users%2C%20many%3DTrue%2Ccontext%3D%7B'request'%3A%20request%7D)%0A%20%20%20%20%20%20%20%20...%0A%60%60%60%0A%60%60%60python%0Aclass%20UserInfoSerializer(serializers.ModelSerializer)%3A%0A%20%20%20%20%23%20%E5%B8%AE%E6%88%91%E4%BB%AC%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90URL%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8E%E6%88%91%E4%BB%AC%E7%BB%99%E4%BA%86group%E4%B8%80%E4%B8%AAid%2C%E5%AE%83%E5%B8%AE%E6%88%91%E4%BB%AC%E5%8F%8D%E5%90%91%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AAurl%0A%20%20%20%20group%20%3D%20serializers.HyperlinkedIdentityField(view_name%3D'gp')%0A%0A%20%20%20%20class%20Meta%3A%0A%20%20%20%20%20%20%20%20model%20%3D%20models.UserInfo%0A%20%20%20%20%20%20%20%20fields%20%3D%20%22__all__%22%0A%20%20%20%20%20%20%20%20depth%20%3D%200%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119113108%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119113108.png)%0A%0A%0A%0A%0A%0A%23%20%E5%BA%8F%E5%88%97%E5%8C%96%E9%AA%8C%E8%AF%81%0A-%20%E7%BC%96%E5%86%99URL%0A%60%60%60python%0Aurl(r'%5E(%3FP%3Cversion%3E%5Bv1%7Cv2%5D%2B)%2Fusergroup%2F%24'%2C%20views.UserGroupView.as_view()%2C%20name%3D'ugp')%2C%0A%60%60%60%0A-%20%E7%BC%96%E5%86%99%E8%A7%86%E5%9B%BE%20%0A%60%60%60python%0Aclass%20UserGroupView(APIView)%3A%0A%20%20%20%20def%20post(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20print(request.data)%0A%20%20%20%20%20%20%20%20return%20HttpResponse(%22%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%22)%0A%60%60%60%0A-%20post%E6%8F%90%E4%BA%A4%E6%95%B0%E6%8D%AE%20%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119132729%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119132729.png)%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119132812%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119132812.png)%0A%0A-%20%E9%AA%8C%E8%AF%81%20%0A%60%60%60python%0Aclass%20UserGroupSerializer(serializers.Serializer)%3A%0A%20%20%20%20title%20%3D%20serializers.CharField()%0A%0A%0Aclass%20UserGroupView(APIView)%3A%0A%20%20%20%20def%20post(self%2C%20request%2C%20*args%2C%20**kwargs)%3A%0A%20%20%20%20%20%20%20%20...%0A%20%20%20%20%20%20%20%20ser%20%3D%20UserGroupSerializer(data%3Drequest.data)%0A%20%20%20%20%20%20%20%20if%20ser.is_valid()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20print(ser.validated_data)%0A%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20print(ser.errors)%0A%20%20%20%20%20%20%20%20...%0A%60%60%60%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133328%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119133328.png)%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133449%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119133449.png)%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133519%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119133519.png)%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133549%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119133549.png)%0A%0A-%20%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%20%0A%0A!%5B%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190119133856%5D(http%3A%2F%2Fmd.100cxy.com%2F%25E5%25BE%25AE%25E4%25BF%25A1%25E6%2588%25AA%25E5%259B%25BE_20190119133856.png)%0A%0A%0A</center></body></html>