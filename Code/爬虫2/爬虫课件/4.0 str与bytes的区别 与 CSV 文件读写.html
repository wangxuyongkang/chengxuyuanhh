<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.5 (458014)"/><meta name="altitude" content="37.20063781738281"/><meta name="author" content="李居豪"/><meta name="created" content="2019-05-20 07:15:30 +0000"/><meta name="latitude" content="39.63017321158676"/><meta name="longitude" content="116.0478343084012"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-05-21 06:09:52 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>4.0 str与bytes的区别 与 CSV 文件读写</title></head><body><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">str与bytes的区别</strong></h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">bytes</strong><br/>
bytes对象负责以二进制字节序列的形式记录所需记录的对象，至于该对象到底表示什么（比如到底是什么字符）则由相应的编码格式解码所决定</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Python2 中</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">type(b'xxxxx')
    &lt;type 'str'&gt;
type('xxxxx')
    &lt;type 'str'&gt;
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Python3 中</strong></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">type(b'xxxxx')
    &lt;class 'bytes'&gt;
type('xxxxx')
    &lt;class 'str'&gt;
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">结论：bytes 是Python 3中特有的，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">Python 2 里不区分bytes和str</strong>。</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">python3中：</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">str类型使用encode方法转化为bytes类型</strong></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">bytes类型通过decode转化为str类型</strong></li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">实际应用中在<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">互联网上是通过二进制进行传输</strong>，所以就需要将<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">str转换成bytes进行传输</strong>，而在接收中通过<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">decode()解码</strong>成我们需要的编码进行处理数据这样不管对方是什么编码而本地是我们使用的编码这样就不会乱码。</p>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">python CSV文件的读写</strong>：</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">逗号分隔值</strong>（Comma-Separated Values，CSV，有时也称为<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">字符分隔值</strong>，因为分隔字符也可以不是逗号，可自己定制分隔符号），其文件以纯文本形式存储表格数据（数字和文本）。纯文本意味着该文件是一个字符序列，不含必须像二进制数字那样被解读的数据。CSV文件由任意数目的记录组成，记录间以某种换行符分隔；每条记录由字段组成，字段间的分隔符是其它字符或字符串，最常见的是逗号或制表符。通常，所有记录都有完全相同的字段序列。通常都是纯文本文件。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">格式如下：</p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">value,value,value</p>
</blockquote>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">写入列表类型的数据</strong></h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">import csv
with open("test.csv","w") as csvfile: 
    #创建文件句柄
    writer = csv.writer(csvfile) 
    #先写入columns_name 
    writer.writerow(["index","a_name","b_name"]) 
    #写入多行用 writerows 
    writer.writerows([[0,1,3],[1,2,3],[2,3,4]])
    #单行写入writerow
    writer.writerow([0,1,3])
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">写入字典类型的数据</strong></h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">import csv

With open(‘test.csv’,’w’) as csvfile:
    fieldnames = ['index','a_name','b_name’]
    #创建文件句柄
    writer = csv.DictWriter(csvfile,fieldnames=fieldnames)
    先写入头信息即
    fieldnames = ['index','a_name','b_name’]
    writer.writeheader()
    writer.writerow({'index’:’1’,'a_name’:’2’,'b_name’:’3’})
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">读取csv文件：</strong></h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">import csv

import csv with open("test.csv","r") as csvfile: 
　　 #创建一个读取文件的句柄
    reader = csv.reader(csvfile) 
    #遍历获取每一行数据 
    for line in reader:
        print (line)
</code></pre>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%20**str%E4%B8%8Ebytes%E7%9A%84%E5%8C%BA%E5%88%AB**%20%0A%0A**bytes**%0Abytes%E5%AF%B9%E8%B1%A1%E8%B4%9F%E8%B4%A3%E4%BB%A5%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E8%8A%82%E5%BA%8F%E5%88%97%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%AE%B0%E5%BD%95%E6%89%80%E9%9C%80%E8%AE%B0%E5%BD%95%E7%9A%84%E5%AF%B9%E8%B1%A1%EF%BC%8C%E8%87%B3%E4%BA%8E%E8%AF%A5%E5%AF%B9%E8%B1%A1%E5%88%B0%E5%BA%95%E8%A1%A8%E7%A4%BA%E4%BB%80%E4%B9%88%EF%BC%88%E6%AF%94%E5%A6%82%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E5%AD%97%E7%AC%A6%EF%BC%89%E5%88%99%E7%94%B1%E7%9B%B8%E5%BA%94%E7%9A%84%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%E8%A7%A3%E7%A0%81%E6%89%80%E5%86%B3%E5%AE%9A%0A%0A**Python2%20%E4%B8%AD**%0A%60%60%60%0Atype(b'xxxxx')%0A%20%20%20%20%3Ctype%20'str'%3E%0Atype('xxxxx')%0A%20%20%20%20%3Ctype%20'str'%3E%0A%60%60%60%0A%0A**Python3%20%E4%B8%AD**%0A%60%60%60%0Atype(b'xxxxx')%0A%20%20%20%20%3Cclass%20'bytes'%3E%0Atype('xxxxx')%0A%20%20%20%20%3Cclass%20'str'%3E%0A%60%60%60%0A%0A%23%23%23%23%20%E7%BB%93%E8%AE%BA%EF%BC%9Abytes%20%E6%98%AFPython%203%E4%B8%AD%E7%89%B9%E6%9C%89%E7%9A%84%EF%BC%8C**Python%202%20%E9%87%8C%E4%B8%8D%E5%8C%BA%E5%88%86bytes%E5%92%8Cstr**%E3%80%82%0A%0A%0A**python3%E4%B8%AD%EF%BC%9A**%0A-%20**str%E7%B1%BB%E5%9E%8B%E4%BD%BF%E7%94%A8encode%E6%96%B9%E6%B3%95%E8%BD%AC%E5%8C%96%E4%B8%BAbytes%E7%B1%BB%E5%9E%8B**%0A-%20**bytes%E7%B1%BB%E5%9E%8B%E9%80%9A%E8%BF%87decode%E8%BD%AC%E5%8C%96%E4%B8%BAstr%E7%B1%BB%E5%9E%8B**%0A%0A%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E4%B8%AD%E5%9C%A8**%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%8A%E6%98%AF%E9%80%9A%E8%BF%87%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%BF%9B%E8%A1%8C%E4%BC%A0%E8%BE%93**%EF%BC%8C%E6%89%80%E4%BB%A5%E5%B0%B1%E9%9C%80%E8%A6%81%E5%B0%86**str%E8%BD%AC%E6%8D%A2%E6%88%90bytes%E8%BF%9B%E8%A1%8C%E4%BC%A0%E8%BE%93**%EF%BC%8C%E8%80%8C%E5%9C%A8%E6%8E%A5%E6%94%B6%E4%B8%AD%E9%80%9A%E8%BF%87**decode()%E8%A7%A3%E7%A0%81**%E6%88%90%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E7%9A%84%E7%BC%96%E7%A0%81%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E8%BF%99%E6%A0%B7%E4%B8%8D%E7%AE%A1%E5%AF%B9%E6%96%B9%E6%98%AF%E4%BB%80%E4%B9%88%E7%BC%96%E7%A0%81%E8%80%8C%E6%9C%AC%E5%9C%B0%E6%98%AF%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8%E7%9A%84%E7%BC%96%E7%A0%81%E8%BF%99%E6%A0%B7%E5%B0%B1%E4%B8%8D%E4%BC%9A%E4%B9%B1%E7%A0%81%E3%80%82%0A%0A------------------------------------%0A%0A%0A%23%23%20**python%20CSV%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%BB%E5%86%99**%EF%BC%9A%0A%0A**%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94%E5%80%BC**%EF%BC%88Comma-Separated%20Values%EF%BC%8CCSV%EF%BC%8C%E6%9C%89%E6%97%B6%E4%B9%9F%E7%A7%B0%E4%B8%BA**%E5%AD%97%E7%AC%A6%E5%88%86%E9%9A%94%E5%80%BC**%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%88%86%E9%9A%94%E5%AD%97%E7%AC%A6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%B8%8D%E6%98%AF%E9%80%97%E5%8F%B7%EF%BC%8C%E5%8F%AF%E8%87%AA%E5%B7%B1%E5%AE%9A%E5%88%B6%E5%88%86%E9%9A%94%E7%AC%A6%E5%8F%B7%EF%BC%89%EF%BC%8C%E5%85%B6%E6%96%87%E4%BB%B6%E4%BB%A5%E7%BA%AF%E6%96%87%E6%9C%AC%E5%BD%A2%E5%BC%8F%E5%AD%98%E5%82%A8%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE%EF%BC%88%E6%95%B0%E5%AD%97%E5%92%8C%E6%96%87%E6%9C%AC%EF%BC%89%E3%80%82%E7%BA%AF%E6%96%87%E6%9C%AC%E6%84%8F%E5%91%B3%E7%9D%80%E8%AF%A5%E6%96%87%E4%BB%B6%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E5%BA%8F%E5%88%97%EF%BC%8C%E4%B8%8D%E5%90%AB%E5%BF%85%E9%A1%BB%E5%83%8F%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E5%AD%97%E9%82%A3%E6%A0%B7%E8%A2%AB%E8%A7%A3%E8%AF%BB%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82CSV%E6%96%87%E4%BB%B6%E7%94%B1%E4%BB%BB%E6%84%8F%E6%95%B0%E7%9B%AE%E7%9A%84%E8%AE%B0%E5%BD%95%E7%BB%84%E6%88%90%EF%BC%8C%E8%AE%B0%E5%BD%95%E9%97%B4%E4%BB%A5%E6%9F%90%E7%A7%8D%E6%8D%A2%E8%A1%8C%E7%AC%A6%E5%88%86%E9%9A%94%EF%BC%9B%E6%AF%8F%E6%9D%A1%E8%AE%B0%E5%BD%95%E7%94%B1%E5%AD%97%E6%AE%B5%E7%BB%84%E6%88%90%EF%BC%8C%E5%AD%97%E6%AE%B5%E9%97%B4%E7%9A%84%E5%88%86%E9%9A%94%E7%AC%A6%E6%98%AF%E5%85%B6%E5%AE%83%E5%AD%97%E7%AC%A6%E6%88%96%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E6%9C%80%E5%B8%B8%E8%A7%81%E7%9A%84%E6%98%AF%E9%80%97%E5%8F%B7%E6%88%96%E5%88%B6%E8%A1%A8%E7%AC%A6%E3%80%82%E9%80%9A%E5%B8%B8%EF%BC%8C%E6%89%80%E6%9C%89%E8%AE%B0%E5%BD%95%E9%83%BD%E6%9C%89%E5%AE%8C%E5%85%A8%E7%9B%B8%E5%90%8C%E7%9A%84%E5%AD%97%E6%AE%B5%E5%BA%8F%E5%88%97%E3%80%82%E9%80%9A%E5%B8%B8%E9%83%BD%E6%98%AF%E7%BA%AF%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E3%80%82%0A%0A%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%3E%20value%2Cvalue%2Cvalue%0A%0A%23%23%23%23%20**%E5%86%99%E5%85%A5%E5%88%97%E8%A1%A8%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE**%0A%0A%60%60%60%0Aimport%20csv%0Awith%20open(%22test.csv%22%2C%22w%22)%20as%20csvfile%3A%20%0A%20%20%20%20%23%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%20%20%20%20writer%20%3D%20csv.writer(csvfile)%20%0A%20%20%20%20%23%E5%85%88%E5%86%99%E5%85%A5columns_name%20%0A%20%20%20%20writer.writerow(%5B%22index%22%2C%22a_name%22%2C%22b_name%22%5D)%20%0A%20%20%20%20%23%E5%86%99%E5%85%A5%E5%A4%9A%E8%A1%8C%E7%94%A8%20writerows%20%0A%20%20%20%20writer.writerows(%5B%5B0%2C1%2C3%5D%2C%5B1%2C2%2C3%5D%2C%5B2%2C3%2C4%5D%5D)%0A%20%20%20%20%23%E5%8D%95%E8%A1%8C%E5%86%99%E5%85%A5writerow%0A%20%20%20%20writer.writerow(%5B0%2C1%2C3%5D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%86%99%E5%85%A5%E5%AD%97%E5%85%B8%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE**%0A%60%60%60%0Aimport%20csv%0A%0AWith%20open(%E2%80%98test.csv%E2%80%99%2C%E2%80%99w%E2%80%99)%20as%20csvfile%3A%0A%20%20%20%20fieldnames%20%3D%20%5B'index'%2C'a_name'%2C'b_name%E2%80%99%5D%0A%20%20%20%20%23%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%8F%A5%E6%9F%84%0A%20%20%20%20writer%20%3D%20csv.DictWriter(csvfile%2Cfieldnames%3Dfieldnames)%0A%20%20%20%20%E5%85%88%E5%86%99%E5%85%A5%E5%A4%B4%E4%BF%A1%E6%81%AF%E5%8D%B3%0A%20%20%20%20fieldnames%20%3D%20%5B'index'%2C'a_name'%2C'b_name%E2%80%99%5D%0A%20%20%20%20writer.writeheader()%0A%20%20%20%20writer.writerow(%7B'index%E2%80%99%3A%E2%80%991%E2%80%99%2C'a_name%E2%80%99%3A%E2%80%992%E2%80%99%2C'b_name%E2%80%99%3A%E2%80%993%E2%80%99%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E8%AF%BB%E5%8F%96csv%E6%96%87%E4%BB%B6%EF%BC%9A**%0A%60%60%60%0Aimport%20csv%0A%0Aimport%20csv%20with%20open(%22test.csv%22%2C%22r%22)%20as%20csvfile%3A%20%0A%E3%80%80%E3%80%80%20%23%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%A5%E6%9F%84%0A%20%20%20%20reader%20%3D%20csv.reader(csvfile)%20%0A%20%20%20%20%23%E9%81%8D%E5%8E%86%E8%8E%B7%E5%8F%96%E6%AF%8F%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE%20%0A%20%20%20%20for%20line%20in%20reader%3A%0A%20%20%20%20%20%20%20%20print%20(line)%0A%60%60%60%0A%0A</center></body></html>