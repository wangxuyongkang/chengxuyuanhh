<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.0.5 (458014)"/><meta name="altitude" content="36.13994979858398"/><meta name="author" content="李居豪"/><meta name="created" content="2019-05-27 15:16:11 +0000"/><meta name="latitude" content="39.6315291052672"/><meta name="longitude" content="116.0503741196128"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-06-10 07:48:27 +0000"/><meta name="content-class" content="yinxiang.markdown"/><title>17 MongoDB 数据库</title></head><body><div><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">、</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">MongoDB 数据库</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">MongoDB特点</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">安装Mongodb</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">开启mongodb数据库服务连接客户端</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">卸载mongodb数据库</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">可视化管理工具安装</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">数据库基本命令</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">集合的相关操作</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(82, 134, 188); text-decoration: underline; box-sizing: content-box;">数据的增</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">......</span></div></li></ul><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">MongoDB 数据库</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Mongodb中文网使用教程指导：http://www.mongodb.org.cn/tutorial/</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">其实中文教程里面的说明已经非常详细了，大家可以参考中文文档学习</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">什么是MongoDB ?</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在高负载的情况下，添加更多的节点，可以保证服务器性能。</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">MongoDB特点</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">模式自由 :可以把不同结构的文档存储在同一个数据库里</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">面向集合的存储：适合存储 JSON风格文件的形式</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">完整的索引支持：对任何属性可索引</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">复制和高可用性：支持服务器之间的数据复制，支持主-从模式及服务器之间的相互复制。复制的主要目的是提供冗余及自动故障转移</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">自动分片：支持云级别的伸缩性：自动分片功能支持水平的数据库集群，可动态添加额外的机器</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">丰富的查询：支持丰富的查询表达方式，查询指令使用JSON形式的标记，可轻易查询文档中的内嵌的对象及数组</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">快速就地更新：查询优化器会分析查询表达式，并生成一个高效的查询计划</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">高效的传统存储方式：支持二进制数据及大型对象（如照片或图片）</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">基本操作</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB文档类似于JSON对象，字段值可以包含其他文档、数组、文档数组</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">安装管理mongodb环境</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">完成数据库、集合的管理</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据的增加、修改、删除、查询</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">名称</span></div><table style="margin: 2px 0px 14px; width: auto; border-collapse: collapse; box-sizing: border-box;"><colgroup><col/><col/><col/></colgroup><tbody style="box-sizing: content-box;"><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">SQL属于/概念</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">MongoDB术语/概念</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">解释/说明</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">database</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">database</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据库</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">table</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">collection</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据库表/集合</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">row</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">document</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据记录行/文档</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">column</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">field</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据字段/域</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">index</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">index</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">table joins</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">无</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">表连接,MongoDB不支持</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">primary key</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">primary key</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">主键,MongoDB自动将_id字段设置为主键</span></td></tr></tbody></table><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">三元素：</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据库、集合、文档</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据库是一个集合的物理容器</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">集合就是关系数据库中的表</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">文档对应着关系数据库中的行</span></div></li></ul><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">安装Mongodb</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">官方文档安装地址</span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">:</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">https://docs.mongodb.com/manual/installation/</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">Windowns 安装：可参照如下链接:</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">https://www.cnblogs.com/ymwangel/p/5859453.html</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">方式一：</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB安装很简单，无需下载源文件，可以直接用apt-get命令进行安装最新的可靠版。</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">１．sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 9DA31620334BD75D9DCB49F368818C72E52529D4</span></div></blockquote><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">如果是16.04执行下面这条操作</span></h4><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">２．echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/4.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list</span></div></blockquote><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">如果是18.04执行下面这条操作</span></h4><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">echo "deb [ arch=amd64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list</span></div></blockquote><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo apt-get update</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo apt-get install -y mongodb-org</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">安装完成后，在终端输入以下命令查看MongoDB版本：</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">mongo -version</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">一般安装成功后会显示为4.0.1版本</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">MongoDB shell version v4.0.1</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">开启mongodb数据库服务，连接客户端</span></h2><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">配置文件路径</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">配置文件在/etc/mongod.conf</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">默认端口27017</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">启动动mongodb 服务</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo service mongod start</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">停止，停止后输入将不能启动shell</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo service mongod stop</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">重置服务</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo service mongod restart</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">启动mongodb客户端</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">mongo</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">终端退出连接</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">exit 或 ctrl+c</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">卸载mongodb数据库</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除 MongoDB 包</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo apt-get purge mongodb-org*</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除 MongoDB 数据库和日志文件</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo rm -r /var/log/mongodb</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo rm -r /var/lib/mongodb</span></div></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">可视化管理工具安装</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">管理mongodb数据库的可视化管理工具：robomongo</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">安装地址：https://robomongo.org/download</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/B760515D-D047-42EE-B933-D907E5BFB61F.png" height="478" width="672"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">１．下载完成后，解压，进入文件夹找到bin文件夹</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">２．进入bin文件夹，看到robot3T</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">３．双击即可打开</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/7CC9412A-BC53-4258-B634-5DC605E4819B.png" height="999" width="1656"/></span></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">数据库操作</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">数据库基本命令</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查看当前数据库名称</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">列出所有在物理上存在的数据库</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">show dbs</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">切换数据库 如果数据库不存在，则指向数据库，但不创建，直到插入数据或创建集合时数据库才被创建</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">use 数据库名称</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查看当前数据库信息</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stats()</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db：当前数据库的名字。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">collections：当前数据库的集合数。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">objects：当前数据库所有集合总所包含的对象</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">（即文档）的数量。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">avgObjSize：每个文档的平均大小（以字节</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">为单位）。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">dataSize：此数据库中保存的未压缩数据的</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">总大小，不是指占有磁盘大小，单位是bytes。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">storageSize：分配给此数据库的集合用于</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">存储文档的空间总量，也就是当前数据库占</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">有磁盘大小，单位是bytes。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">numExtents：当前数据库所有集合包含的</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">扩展数量的统计。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">indexes：数据库中包含的所有集合的索引</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">总数，也就是system.indexes表数据行数。</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">indexSize：此数据库上创建的所有索引的</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">总大小，单位是bytes。</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据库删除:</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除当前指向的数据库,如果数据库不存在，则什么也不做</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.dropDatabase()</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">集合的相关操作</span></h2><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">创建集合</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.createCollection(name, options)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">name是要创建的集合的名称</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">options是一个文档，用于指定集合的配置</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">选项参数是可选的，所以只需要到指定的集合名称。以下是可以使用的选项列表：</span></div></div></li><table style="margin: 2px 0px 14px; width: auto; border-collapse: collapse; box-sizing: border-box;"><colgroup><col/><col/><col/></colgroup><tbody style="box-sizing: content-box;"><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">字段</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">类型</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">描述</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">capped</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">布尔</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。 当该值为 true 时，必须指定 size 参数。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">autoIndexId</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">布尔</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（可选）如为 true，自动在 _id 字段创建索引。默认为 false。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">size</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数值</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（可选）为固定集合指定一个最大值.当文档达到上限时，会将之前的数据覆盖，单位为字节。如果 capped 为 true，也需要指定该字段。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">max</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数值</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（可选）指定固定集合中包含文档的最大数量。</span></td></tr></tbody></table><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">不限制集合大小</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.createCollection("stu")</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">限制集合大小</span></div></li><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 0px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">参数capped：默认值为false表示不设置上限，值为</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">true表示设置上限</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">参数size：当capped值为true时，需要指定此参数，表示上限大小，当文档达到上限时，会将之前的数据覆盖，单位为字节</span></div></li></ul></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.createCollection(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">"sub",</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">capped : true,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">size : 10,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">max: 100,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查看数据库集合</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">show collections</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除集合</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">如果成功删除选定集合，则 drop() 方法返回 true，否则返回 false</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.drop()</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">数据的增</span></h2><table style="margin: 2px 0px 14px; width: auto; border-collapse: collapse; box-sizing: border-box;"><colgroup><col/><col/></colgroup><tbody style="box-sizing: content-box;"><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">数据类型</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">描述</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">String</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Integer</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Boolean</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">布尔值。用于存储布尔值（真/假）。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Double</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">双精度浮点值。用于存储浮点值。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Array</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用于将数组或列表或多个值存储为一个键。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Timestamp</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">时间戳。记录文档修改或添加的具体时间。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Object</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用于嵌入式的文档，即一个值为一个文档</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Null</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用于创建空值。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Date</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Object ID</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">对象 ID。用于创建文档的 ID。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Binary Data</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">二进制数据。用于存储二进制数据。</span></td></tr></tbody></table><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">ObjectId</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">ObjectId 类似唯一主键，可以很快的去生成和排序</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">每个文档都有一个属性，为_id，保证每个文档的唯一性</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">可以自己去设置_id插入文档</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">如果没有提供，那么MongoDB为每个文档提供了一个独特的_id，类型为objectID</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">objectID是一个12字节的十六进制数</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">前4个字节为当前时间戳</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">接下来3个字节的机器ID</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">接下来的2个字节中MongoDB的服务进程id</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">最后3个字节是简单的增量值</span></div></li></ul><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">单条插入</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.insert({name:'王明',gender:1})</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">注意</span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">：插入文档时，如果不指定_id参数，MongoDB会为文档分配一个唯一的ObjectId</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">多条插入：</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.insert(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'王明',gender:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'王玲玲',gender:0}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在3.2版本之后还提供了插入多条数据和插入单条数据的方法</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.insertOne(document)</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.insertMany(document)</span></div></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">删</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">remove()</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">方法的基本语法格式如下所示：</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.collection.remove(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">&lt;query&gt;,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{justOne: &lt;boolean&gt;,}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">参数说明</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">query :（可选）删除的文档的条件。</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">justOne : （可选）如果设为 true 或 1，则只删除一个文档。</span></div></li></ul><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">删除所有</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.remove(document)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">只删除１条，１表示是否只删除一条为true的意思</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.remove(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">document,1</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.remove(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">document,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{justOne:true}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">改</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB 使用</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">update()</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">和</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">save()</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">方法来更新集合中的文档。两个函数是有区别的。</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">update() 方法</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">update() 方法用于更新已存在的文档</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.update(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">&lt;query&gt;,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">&lt;update&gt;,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">upsert: &lt;boolean&gt;,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">multi: &lt;boolean&gt;,</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">参数说明</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">query : update的查询条件，类似sql update查询内where后面的。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">update : update的对象和一些更新的操作符（如</span><span style="font-size: 1.21em; white-space: nowrap; text-indent: 0px; text-rendering: auto; box-sizing: content-box;"><span style="box-sizing: content-box; display: inline-block;"><span style="box-sizing: content-box; position: relative; display: inline-block;"><span style="box-sizing: content-box; color: rgb(51, 51, 51); line-height: 160%; font-family: KaTeX_Main, &quot;Times New Roman&quot;, serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: normal;">,</span></span></span></span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">inc...）等，也可以理解为sql update查询内set后面的</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">upsert : 可选，这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">multi : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数true,就把按条件查出来多条记录全部更新。</span></div></li></ul><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">全文档更新</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.update(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'xxxxx'},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'张xxx'}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">指定属性更新，通过操作符$set</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">先插入一条数据</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.insert(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'李自成',gender:１}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">更新这条数据</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.update(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'李自成'},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">$set:{name:'闯王李自成'}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">更新多条数据</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.update(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:'李自成'},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">$set:{name:'闯王李自成'}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{multi:true}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">save() 方法</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">save()</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">方法通过传入的文档来替换已有文档,如果文档的_id已经存在则修改，如果文档的_id不存在则添加</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.save(document)</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.save(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">_id:'20180820101010',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">'name':'跟新'</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">查询</span></h2><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">find():查询，返回所有满足条件的数据</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find({条件文档})</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">findOne()：查询，只返回第一个</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.findOne({条件文档})</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询出姓名等于李某某的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find({name:'李某某'})</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.findOne({name:'李某某'})</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">比较运算符</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 等于，默认是等于判断，没有运算符</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 小于\$lt</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 小于或等于\$lte</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 大于\$gt</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 大于或等于\$gte</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">- 不等于\$ne</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询年龄大于或等于18的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find({age:{$gte:18}})</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">逻辑运算符</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">查询时可以有多个条件，多个条件之间需要通过逻辑运算符连接</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">逻辑与：默认是逻辑与的关系</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询年龄大于或等于18，并且性别为1的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">age:{$gte:18},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">gender:1</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">逻辑或：使用$or</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询年龄大于18，或性别为0的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">$or:[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{age:{$gt:18}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{gender:1}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">and和or一起使用</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询年龄大于18或性别为0的学生，并且学生的姓名为gj</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">$or:[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{age:{$gte:18}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{gender:1}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">],</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">name:'gj'</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">范围运算符</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用"$in"，"$nin" 判断是否在某个范围内</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询年龄为18、28的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">age:{$in:[18,28]}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">正则表达式查询</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用//或$regex编写正则表达式</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询姓李的学生</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:/^李/}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.stu.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">name:{$regex:'^李'}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">Limit与Skip方法</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">limit() 方法</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">读取指定数量的数据记录</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().limit(num)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">skip() 方法</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用skip()方法来跳过指定数量的数据，skip方法同样接受一个数字参数作为跳过的记录条数。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().skip(num)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">limit() 方法、skip() 方法 同时使用，不分先后顺序</span></div><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">表示跳过多少条，返回多少条</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询第5至8条数据</span></div></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().limit(4).skip(5)</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().skip(5).limit(4)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">sort() 方法排序</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">sort()方法对数据进行排序，sort() 方法可以通过参数指定排序的字段，并使用 1 和 -1 来指定排序的方式，其中 1 为升序排列，而 -1 是用于降序排列。</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">升序</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().sort({排序字段:1})</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">降序</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().sort({排序字段:-1})</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">根据多个字段排序：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">先根据年龄做降序，再根据性别做升序</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().sort({age:-1,gender:1})</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">注意：</span> <span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">skip(), limilt(), sort()三个放在一起执行的时候，执行的顺序是先 sort(), 然后是 skip()，最后是显示的 limit()。</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">distinct() 去重</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.distinct('去重字段',{条件})</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查找年龄大于20的姓名（去重）</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.distinct('name',{age:{$gt:20}})</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">project投影（可以指定想要返回的字段）</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在查询到的返回结果中，只选择必要的字段，而不是选择一个文档的整个字段</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">参数为字段与值，值为1表示显示，值为0不显示</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find({},{字段名称:0,...})</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">count() 统计个数</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.count({条件})</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">表示返回集合中的文档数量</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find().count()</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find({条件}).count()</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">统计年龄大于20的男生人数</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.count(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">age:{$gt:20},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">gender:1</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">或者</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.find(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">age:{$gt:20},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">gender:1</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">).count()</span></div></div></div><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">mongodb的聚合</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB中聚合(aggregate)主要用于处理数据(诸如统计平均值,求和等)，并返回计算后的数据结果。有点类似sql语句中的 count(*)。</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">aggregate() 方法</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB中聚合的方法使用aggregate()</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">语法</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">aggregate() 方法的基本语法格式如下所示：</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">首先我们新建一个数据库，articleDB，创建一个article的集合</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">创建数据源输入一下数据</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">title: 'MongoDB Overview',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">description: 'MongoDB is no sql database',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">by_user: 'w3cschool.cc',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">url: 'http://www.w3cschool.cc',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">tags: ['mongodb', 'database', 'NoSQL'],</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">likes: 100</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">},</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">title: 'NoSQL Overview',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">description: 'No sql database is very fast',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">by_user: 'w3cschool.cc',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">url: 'http://www.w3cschool.cc',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">tags: ['mongodb', 'database', 'NoSQL'],</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">likes: 10</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">},</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">title: 'Neo4j Overview',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">description: 'Neo4j is no sql database',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">by_user: 'Neo4j',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">url: 'http://www.neo4j.com',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">tags: ['neo4j', 'database', 'NoSQL'],</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">likes: 750</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">},</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">管道的概念</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">管道在Unix和Linux中一般用于将当前命令的输出结果作为下一个命令的参数。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB的聚合管道将MongoDB文档在一个管道处理完毕后将结果传递给下一个管道处理。管道操作是可以重复的。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">表达式：处理输入文档并输出。表达式是无状态的，只能用于计算当前聚合管道的文档，不能处理其它的文档。</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">这里我们介绍一下聚合框架中常用的几个操作：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$group：将集合中的文档分组，可用于统计结果。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$project：修改输入文档的结构。可以用来重命名、增加或</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除域，也可以用于创建计算结果以及嵌套文档。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">match：用于过滤数据，只输出符合条件的文档。match使</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用MongoDB的标准查询操作。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$limit：用来限制MongoDB聚合管道返回的文档数。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$skip：在聚合管道中跳过指定数量的文档，并返回余下的文</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">档。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$unwind：将文档中的某一个数组类型字段拆分成多条，每条</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">包含数组中的一个值。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$sort：将输入文档排序后输出。</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">聚合的表达式:</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$sum 计算总和。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", num_tutorial : {$sum : "$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$avg 计算平均值</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", num_tutorial : {$avg : "$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$min 获取集合中所有文档对应值得最小值。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", num_tutorial : {$min : "$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$max 获取集合中所有文档对应值得最大值。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", num_tutorial : {$max : "$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$push 在结果文档中插入值到一个数组中。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", url : {$push: "$url"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$first 根据资源文档的排序获取第一个文档数据。</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", first_url : {$first : "$url"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$last 根据资源文档的排序获取最后一个文档数据</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.mycol.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group : {_id : "$by_user", last_url : {$last : "$url"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$group</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">将集合中的文档分组，可用于统计结果</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">_id表示分组的依据，使用某个字段的格式为'$字段'</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">例1：统计每个作家写书的总数</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group:{_id:'$by_user',counter:{$sum:1}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">例1：统计每个作家的总的点赞数</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group:{_id:'$by_user',like:{$sum:"$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">Group by null</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">将集合中所有文档分为一组</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">例2：求集合中作者总书数量作者的平均点赞数</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group:{_id:null,counter:{$sum:1},likes:{$avg:"$likes"}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$project</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">修改输入文档的结构, 可以用来重命名增加或删除域也可以用于创建计算结果以及嵌套文档</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{by_user:1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{by_user:1,id:0}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$match：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用于过滤数据，只输出符合条件的文档。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$match使用MongoDB的标准查询操作</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查找集合中书籍点赞量在0到20之间的数，并返回书籍的名称</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:20}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{title:1,_id:0}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">思考下面语句的含义？</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:20}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$group:{_id:"$by_user",counte:{$sum:1},avglikes:{$avg:'$likes'}}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$limit：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">用来限制MongoDB聚合管道返回的文档数。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">从集合的起始位置查找，限制返回两条</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$limit:2}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">思考下面语句的含义？</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:20}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{title:1}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$limit:2}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">$skip在聚合管道中跳过指定数量的文档，并返回余下的文档</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$skip:2}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">) #在聚合管道中跳过指定数量的文档，并返回余下的文档。</span></div></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:20}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$skip:2},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{title:1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:20}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$skip:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$limit:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{title:1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$sort：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">将输入文档排序后输出</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">例：查询出点赞量大于0小于等于800的书籍，并且按照降序排列</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:800}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$sort:{likes:-1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">例：查询出点赞量大于0小于等于800的书籍，并且按照升序排列</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$match:{likes:{$gt:0,$lte:800}}},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$sort:{likes:1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">$unwind</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">将文档中的某一个数组类型字段拆分成多条，每条包含数组中的一个值。</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$unwind:'$tags'}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">思考下面这个语句的含义?</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.article.aggregate(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">[</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$unwind:'$tags'},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{$project:{tags:1,title:1,user:1}}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">管理员</span></h2><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">为了更安全的访问mongodb，需要访问者提供用户名和密码，于是需要在mongodb中创建用户</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">采用了角色-用户-数据库的安全管理方式</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">常用系统角色如下：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">root：只在admin数据库中可用，超级账号，超级权限</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Read：允许用户读取指定数据库</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">readWrite：允许用户读写指定数据库</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">创建超级管理用户</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">use admin</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.createUser(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">　　 user:'用户名',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">pwd:'密码',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">roles:[{role:'root',db:'admin'}]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">创建成功后退出mongodb客户端，然后service mongodb stop，再开启安全认证,启用安全认证流程如下：</span></div><ol style="box-sizing: content-box; padding-left: 30px; margin: 0px; list-style-type: decimal;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">进入配置文件并修改sudo vi /etc/mongod.conf</span></div></li></ol><ol start="2" style="box-sizing: content-box; padding-left: 30px; margin: 0px; list-style-type: decimal;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">启用身份验证</span></div></li></ol><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">新版本</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">注意：keys and values之间一定要加空格, 否则解析会报错</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">security:</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">　　authorization: enabled</span></div></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">低版本</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">或者修改配置文件将auth=true前面的注释拿掉然后保存并退出</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">重启启动mongo服务</span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">：</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">sudo service mongodb restart</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">如果这时候按照以前的操作会提示权限</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/6BDDA4E3-FF94-4A9E-ADE1-3B38CD2007C6.png" height="411" width="580"/></span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用账号密码来登录：</span></div></li></ul><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">mongo -u username -p password --authenticationDatabase 'admin'</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/FC237A4F-C211-4776-81E2-882F7E7E65F8.png" height="212" width="632"/></span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">创建普通用户管理</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">1.使用超级管理员登录，然后进入用户管理操作</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">2.查看当前数据库的用户</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/EB6C21D4-A01D-45AC-8810-124599F98D32.png" height="390" width="629"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">注意要给用户添加哪个数据库操作权限就先切换到指定数据库</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">use generalUser</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.createUser(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">user:'t1',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">pwd:'123',</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">roles:[{role:'readWrite',db:'test1'}]</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/5B714FF7-5F7B-4773-BC3D-A4E5368F4FFB.png" height="223" width="630"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">创建成功后我们先退出，然后用普通用户账号连接数据库：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongo -u username -p password --authenticationDatabase dbname</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/CEC3CCF1-218B-4B64-9EF4-F5EE3A7534E4.png" height="521" width="626"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">修改普通用户权限或密码</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">修改用户：可以修改pwd、roles属性</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">注意这里只有超级管理员才有权限修改普通用户的密码和管理权限</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">修改用户密码（切换到有权限操作的数据库下）</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.updateUser(‘用户名',{pwd:'密码'})</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">添加用户权限（切换到有权限操作的数据库下）</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.grantRolesToUser('用户名',[{role:'',db:''}])</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">移除用户权限（切换到有权限操作的数据库下）</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.revokeRolesFromUser('用户名',[{role:'',db:''}])</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除用户（方式一）（切换到有权限操作的数据库下）</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.dropUser('用户名')</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除用户　(方式二)</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">use admin</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.system.users.remove({user:'用户名'})</span></div></div></blockquote><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">MongoDB 备份(mongodump)</span></h2><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在Mongodb中我们使用mongodump命令来备份MongoDB数据。该命令可以导出所有数据到指定目录中。</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">语法</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodump命令脚本语法如下：</span></div></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodump -h dbhost -d dbname -o dbdirectory</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-h：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongDB所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-d：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">需要备份的数据库实例，例如：test</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-o：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">备份的数据存放位置，例如：\Desktop\data\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个test目录，这个目录里面存放该数据库实例的备份数据。</span></div></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">如果没有开启权限</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodump -h 127.0.0.1:27017 -d 数据库名称 -o ~/数据库备份的路径</span></div></blockquote><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodump -h 127.0.0.1:27017 -o ~/数据库备份的路径</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">如果开启了权限设置（使用超级管理员权限）</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用账号密码的方式备份指定用户的数据库</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodump -u username -p password --authenticationDatabase 'admin' -d dbname -o ~/数据库备份的路径</span></div></blockquote><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">恢复(mongorestore)</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongodb使用 mongorestore 命令来恢复备份的数据。</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">语法</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongorestore命令脚本语法如下：</span></div></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongorestore -h hostname:port -d dbname --dir path</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-host , -h：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB所在服务器地址，默认为： localhost:27017</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-db , -d：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">--dir：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">指定备份的目录</span></div></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">如果没有开启权限</span></h4><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongorestore -h 127.0.0.1:27017 -d 数据库名称 --dir ~/数据库备份的路径</span></div></blockquote><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongorestore -h 127.0.0.1 -dir ~/数据库备份的路径</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">下面是我添加了管理员权限之后的备份命令</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">如果开启了权限设置</span></h4><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongorestore -u username -p password --authenticationDatabase 'admin' -d 数据库名称 --dir /数据库备份文件路径</span></div></blockquote><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">MongoDB数据导出</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">导出工具：mongoexport</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">语法：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoexport -d dbname -c collectionname -o file --type json/csv -f field</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">参数说明：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">d ：数据库名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">c ：collection名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">o ：输出的文件名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-type ： 输出的格式，默认为json</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">f ：输出的字段，如果-type为csv，则需要加上-f "字段名"</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">示例</span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoexport -d class1804 -c books -o ~/桌面/dump/books.json --type json</span></div></blockquote><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoexport -d class1804 -c books -o ~/桌面/dump/books.csv --type csv -f 'by_user,likes'</span></div></blockquote><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">MongoDB数据导入</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">数据导入：mongoimport</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">语法：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoimport -d dbname -c collectionname --file filename --headerline --type json/csv</span></div></blockquote><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">参数说明：</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">d:数据库名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">c:collection名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-type:导入的格式默认json</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">f:导入的字段名</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-headerline:如果导入的格式是csv，则可以使用第一行的标题作为导入的字段</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">-file:要导入的文件</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">示例</span><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoimport -d class1712B -c books --file ~/桌面/dump/books --type json</span></div></blockquote><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongoimport -d class1712B -c info --file ~/桌面/dump/books --headerline --type csv</span></div></blockquote><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h2 style="box-sizing: content-box; font-size: 34px; border-bottom: 1px solid rgb(219, 219, 219);"><span style="font-size: 34px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">复制（副本集）主从自动备份</span></h2><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">什么是复制</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">复制提供了数据的冗余备份，并在多个服务器上存储数据副本，提高了数据的可用性，并可以保证数据的安全性</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">复制还允许从硬件故障和服务中断中恢复数据</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">为什么要复制</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据备份</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">数据灾难恢复</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">读写分离</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">高（24* 7）数据可用性</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">无宕机维护</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">副本集对应用程序是透明</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">复制的工作原理</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">复制至少需要两个节点A、B...</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">A是主节点，负责处理客户端请求</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">其余的都是从节点，负责复制主节点上的数据</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">节点常见的搭配方式为：一主一从、一主多从</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">主节点记录在其上的所有操作，从节点定期轮询主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">主节点与从节点进行数据交互保障数据的一致性</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">读写分离，基本的原理是让主数据库处理事务性增、改、删操作（INSERT、UPDATE、DELETE），而从数据库处理SELECT查询操作。数据库复制被用来把事务性操作导致的变更同步到集群中的从数据库,读写分离的目的是为了实现高并发场景下的请求分流，避免对数据库的访问过于集中，导致性能下降甚至是宕机。</span></div></li></ul><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">直接使用主从复制局限</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（1）主从复制在master宕机后，没有自动选举master机制，导致主节点服务一挂，便不能对外提供增删改操作。</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（2）所有增删改操作都是针对主节点进行操作，可能导致主节点性能下降。</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">（3）从节点对主节点的数据都是全量拷贝，对主从节点的压力都是不小的。</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">复制的特点</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">N 个节点的集群</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">任何节点可作为主节点</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">所有写入操作都在主节点上</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">自动故障转移</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">自动恢复</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">设置复制节点操作步骤</span></h4><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step1:创建数据库目录test1、test2</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step2 创建主节点:</span></div></li><ol style="box-sizing: content-box; padding-left: 30px; margin: 0px; list-style-type: decimal;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">首先使用ifconfig命令查看自己的IP地址这是我Ubuntu上的iP地址</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">先打开一个终端（作为主服务器）</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用service mongodb start 开启mongodb服务</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用如下格式启动mongod，注意replSet的名称是一致的</span></div></li></ol></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongod --bind_ip 主机ip --port 27018 --dbpath ~/桌面/test1 --replSet rs0</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step3 创建从节点:</span></div></li><ol style="box-sizing: content-box; padding-left: 30px; margin: 0px; list-style-type: decimal;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">打开另一个终端（从服务器）</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用service mongodb start 开启mongodb服务</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">使用如下格式启动mongod，注意replSet的名称是一致的</span></div></li></ol></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongod --bind_ip 192.168.1.118 --port 27019 --dbpath ~/桌面/test2 --replSet rs0</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step4 开启mongo客户端链接</span></div></li><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 0px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">一个连接：</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongo --host 192.168.1.118 --port 27018</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 0px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">另一个连接：</span></div></li></ul><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">mongo --host 192.168.1.118 --port 27019</span></div></blockquote><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step5 设置主服务器以192.168.1.118 --port 27018为主服务器</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">执行 rs.initiate()</span></div></blockquote></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step6 添加副本集</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在主节点使用rs.add('192.168.1.118:27019’)来添加从服务连接</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step7 复本集添加成功后，此时我们再次采用rs.status()查看当前状态</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">step8 在从服务连接窗口读取数据操作的话需要设置</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">rs.slaveOk()</span></div></blockquote></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">检验</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">主服务器客户端插入数据，从服务器客户端查看数据是否备份</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">主服务器客户端进行数据插入：</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/C72EA512-C25E-43E7-A498-CA7F4A63C584.png" height="124" width="687"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">在从服务器客户端查看数据是否同步</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;"><img src="17%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93.resources/CE4ACB0A-BF48-4F31-A943-CC7D07B3BBFC.png" height="209" width="603"/></span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">其它说明（主从切换）</span></div><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">删除从节点</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">rs.remove('192.168.196.128:27018')</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">关闭主服务器后，再重新启动，会发现原来的从服务器变为了主服务器，新启动的服务器（原来的主服务器）变为了从服务器</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">模拟步骤</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">1.将主服务器、和主客户端宕掉</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">2.然后在使用之前的命令分别重启</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">3.然后仔细观察发现原来的从服务器变为了主服务器，新启动的服务器（原来的主服务器）变为了从服务器，这就是我们之前说的无宕机现象</span></div></li></ul><hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/><h3 style="box-sizing: content-box; font-size: 27px;"><span style="font-size: 27px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%;">MongoDB索引</span></h3><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引通常能够极大的提高查询的效率，如果没有索引，MongoDB在读取数据时必须扫描集合中的每个文件并选取那些符合查询条件的记录。这种扫描全集合的查询效率是非常低的，特别在处理大量的数据时，查询可以要花费几十秒甚至几分钟，这对网站的性能是非常致命的。</span></div></li><li style="box-sizing: content-box; position: relative;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引是特殊的数据结构，索引存储在一个易于遍历读取的数据集合中，索引是对数据库表中一列或多列的值进行排序的一种结构</span></div></li></ul><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">createIndex() 方法</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">MongoDB使用 createIndex() 方法来创建索引。</span></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">基本语法格式如下所示：</span></div><blockquote style="box-sizing: content-box; margin: 15px 0px; border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">db.集合名称.createIndex(索引Keys, options)</span></div></blockquote><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Key 值为你要创建的索引字段，1 为指定按升序创建索引，如果你想按降序来创建索引指定为 -1 即可。</span></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">options下需要掌握的参数</span></div></li></ul><table style="margin: 2px 0px 14px; width: auto; border-collapse: collapse; box-sizing: border-box;"><colgroup><col/><col/><col/></colgroup><tbody style="box-sizing: content-box;"><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">Parameter</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">Type</span></td><td style="box-sizing: content-box; padding: 6px 14px 5px 12px; border-width: 0px 1px 1px; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-right-color: rgb(114, 119, 123); border-bottom-color: rgb(114, 119, 123); border-left-color: rgb(114, 119, 123); border-image: initial; border-top-style: initial; border-top-color: initial; background-color: rgb(123, 129, 132);"><span style="font-size: 14px; color: rgb(255, 255, 255); line-height: 160%; font-weight: 300;">Description</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">background</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Boolean</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">建索引过程会阻塞其它数据库操作, background可指定以后台方式创建索引，即增加 "background" 可选参数。 "background" 默认值为false。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">unique</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Boolean</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">建立的索引是否唯一。指定为true创建唯一索引。默认值为false.</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">name</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">string</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引的名称。如果未指定，MongoDB的通过连接索引的字段名和排序顺序生成一个索引名称。</span></td></tr><tr style="box-sizing: content-box;"><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">sparse</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">Boolean</span></td><td style="box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid rgb(234, 234, 234);"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">对文档中不存在的字段数据不启用索引；这个参数需要特别注意，如果设置为true的话，在索引字段中不会查询出不包含对应字段的文档.。默认值为 false.</span></td></tr></tbody></table><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">createIndex() 方法中也可以设置使用多个字段创建索引（关系型数据库中称作联合索引）。</span></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%;">插入10万条数据到数据库中</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">for(i=0;i&lt;100000;i++){db.students.insert({name:'testname'+i,age:i})}</span></div><div><br/></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.t1.find({name:'testname10000'})</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.t1.find({name:'testname10000'}).explain('executionStats')</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">单键索引</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex({"索引Key":1})</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">复合索引</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex({"索引Key":1,"索引Key":-1})</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">查看某集合下的索引</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.getIndexes()</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">删除索引</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.dropIndex("IndexName")</span></div></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.dropIndexes()</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">在后台创建索引：</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{索引Key:1,索引Key:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{background: true}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">唯一索引:</span></h4><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">对字段设置唯一索引，可以保证字段唯一性</span></div><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{索引Key:1,索引Key:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{unique: true}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">设置索引的名称</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{索引Key:1,索引Key:1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{name:"index_name"}</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div></div><h4 style="box-sizing: content-box; font-size: 20px;"><span style="font-size: 20px; color: rgb(51, 51, 51); line-height: 160%; font-weight: 700; box-sizing: content-box;">sparse（稀疏索引）</span></h4><div style="box-sizing: content-box; border: 0px; border-radius: 0px; margin: 2px 0px 8px; background-color: rgb(245, 247, 248);"><div style="overflow-x: auto; background: rgb(30, 30, 30); box-sizing: content-box; border: 0px; border-radius: 0px; letter-spacing: -0.3px; padding: 18px; white-space: pre-wrap;"><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">db.集合名称.createIndex(</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{"索引Key": 1},</span></div><div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">{"sparse": true}</span></div><span style="font-size: 14px; line-height: 160%; color: rgb(244, 244, 244);">)</span></div></div><div style="box-sizing: content-box; margin: 10px 0px;"><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">稀疏索引：对不存在的键就不进行索引，也就是该文档上没有建立索引，索引条目中也不包含索引键为null的索引条目，再次插入不包含索引键的文档不会报错，直接插入。</span></div><h3 style="box-sizing: content-box; font-size: 27px;"><span style="font-size: 27px; color: rgb(51, 51, 51); font-weight: 700; line-height: 160%; box-sizing: content-box;">索引注意事项</span></h3><ul style="box-sizing: content-box; list-style-type: disc; padding-left: 30px; margin: 6px 0px 10px;"><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">额外开销</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">每个索引占据一定的存储空间，在进行插入，更新和删除操作时也需要对索引进行操作。所以，如果你很少对集合进行读取操作，建议不使用索引。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">内存(RAM)使用</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">由于索引是存储在内存(RAM)中,你应该确保该索引的大小不超过内存的限制。</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">如果索引的大小大于内存的限制，MongoDB会删除一些索引，这将导致性能下降。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">查询限制</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引不能被以下的查询使用：</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">正则表达式及非操作符，如 $nin, $not,$in,&gt;, 等。</span></div></div></li><li style="box-sizing: content-box; position: relative;"><div style="box-sizing: content-box; margin: 0px;"><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">最大范围</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">集合中索引不能超过64个</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">索引名的长度不能超过128个字符</span></div><div><span style="font-size: 14px; color: rgb(51, 51, 51); line-height: 160%;">一个复合索引最多可以有31个字段</span></div></div></li></ul></div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%E3%80%81%0A*%20%5BMongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93%5D(%23MongoDB%E6%95%B0%E6%8D%AE%E5%BA%93)%0A*%20%5BMongoDB%E7%89%B9%E7%82%B9%5D(%23MongoDB%E7%89%B9%E7%82%B9)%0A*%20%5B%E5%AE%89%E8%A3%85Mongodb%5D(%23%E5%AE%89%E8%A3%85Mongodb)%0A*%20%5B%E5%BC%80%E5%90%AFmongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E8%BF%9E%E6%8E%A5%E5%AE%A2%E6%88%B7%E7%AB%AF%5D(%23%E5%BC%80%E5%90%AFmongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E8%BF%9E%E6%8E%A5%E5%AE%A2%E6%88%B7%E7%AB%AF)%0A*%20%5B%E5%8D%B8%E8%BD%BDmongodb%E6%95%B0%E6%8D%AE%E5%BA%93%5D(%23%E5%8D%B8%E8%BD%BDmongodb%E6%95%B0%E6%8D%AE%E5%BA%93)%0A*%20%5B%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%5D(%23%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85)%0A*%20%5B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4%5D(%23%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4)%0A*%20%5B%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%5D(%23%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C)%0A*%20%5B%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%5D(%23%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E)%0A*%20......%0A%0A%0A%0A%23%23%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93%0A%0AMongodb%E4%B8%AD%E6%96%87%E7%BD%91%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%E6%8C%87%E5%AF%BC%EF%BC%9Ahttp%3A%2F%2Fwww.mongodb.org.cn%2Ftutorial%2F%0A%E5%85%B6%E5%AE%9E%E4%B8%AD%E6%96%87%E6%95%99%E7%A8%8B%E9%87%8C%E9%9D%A2%E7%9A%84%E8%AF%B4%E6%98%8E%E5%B7%B2%E7%BB%8F%E9%9D%9E%E5%B8%B8%E8%AF%A6%E7%BB%86%E4%BA%86%EF%BC%8C%E5%A4%A7%E5%AE%B6%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0%0A%0A%23%23%23%23%20%E4%BB%80%E4%B9%88%E6%98%AFMongoDB%20%3F%0A%0A-%20MongoDB%20%E6%98%AF%E7%94%B1C%2B%2B%E8%AF%AD%E8%A8%80%E7%BC%96%E5%86%99%E7%9A%84%EF%BC%8C%E6%98%AF%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E7%9A%84%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E3%80%82%0A%E5%9C%A8%E9%AB%98%E8%B4%9F%E8%BD%BD%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E6%B7%BB%E5%8A%A0%E6%9B%B4%E5%A4%9A%E7%9A%84%E8%8A%82%E7%82%B9%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%9D%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%80%A7%E8%83%BD%E3%80%82%0A-%20MongoDB%20%E6%97%A8%E5%9C%A8%E4%B8%BAWEB%E5%BA%94%E7%94%A8%E6%8F%90%E4%BE%9B%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%82%0A-%20MongoDB%20%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%EF%BC%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%94%B1%E9%94%AE%E5%80%BC(key%3D%3Evalue)%E5%AF%B9%E7%BB%84%E6%88%90%E3%80%82MongoDB%20%E6%96%87%E6%A1%A3%E7%B1%BB%E4%BC%BC%E4%BA%8E%20JSON%20%E5%AF%B9%E8%B1%A1%E3%80%82%E5%AD%97%E6%AE%B5%E5%80%BC%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3%EF%BC%8C%E6%95%B0%E7%BB%84%E5%8F%8A%E6%96%87%E6%A1%A3%E6%95%B0%E7%BB%84%E3%80%82%0A%0A%23%23%23%23%20**MongoDB%E7%89%B9%E7%82%B9**%0A%0A-%20%E6%A8%A1%E5%BC%8F%E8%87%AA%E7%94%B1%20%3A%E5%8F%AF%E4%BB%A5%E6%8A%8A%E4%B8%8D%E5%90%8C%E7%BB%93%E6%9E%84%E7%9A%84%E6%96%87%E6%A1%A3%E5%AD%98%E5%82%A8%E5%9C%A8%E5%90%8C%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E9%87%8C%0A-%20%E9%9D%A2%E5%90%91%E9%9B%86%E5%90%88%E7%9A%84%E5%AD%98%E5%82%A8%EF%BC%9A%E9%80%82%E5%90%88%E5%AD%98%E5%82%A8%20JSON%E9%A3%8E%E6%A0%BC%E6%96%87%E4%BB%B6%E7%9A%84%E5%BD%A2%E5%BC%8F%0A-%20%E5%AE%8C%E6%95%B4%E7%9A%84%E7%B4%A2%E5%BC%95%E6%94%AF%E6%8C%81%EF%BC%9A%E5%AF%B9%E4%BB%BB%E4%BD%95%E5%B1%9E%E6%80%A7%E5%8F%AF%E7%B4%A2%E5%BC%95%0A-%20%E5%A4%8D%E5%88%B6%E5%92%8C%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%EF%BC%9A%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%EF%BC%8C%E6%94%AF%E6%8C%81%E4%B8%BB-%E4%BB%8E%E6%A8%A1%E5%BC%8F%E5%8F%8A%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B8%E4%BA%92%E5%A4%8D%E5%88%B6%E3%80%82%E5%A4%8D%E5%88%B6%E7%9A%84%E4%B8%BB%E8%A6%81%E7%9B%AE%E7%9A%84%E6%98%AF%E6%8F%90%E4%BE%9B%E5%86%97%E4%BD%99%E5%8F%8A%E8%87%AA%E5%8A%A8%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%0A-%20%E8%87%AA%E5%8A%A8%E5%88%86%E7%89%87%EF%BC%9A%E6%94%AF%E6%8C%81%E4%BA%91%E7%BA%A7%E5%88%AB%E7%9A%84%E4%BC%B8%E7%BC%A9%E6%80%A7%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%88%86%E7%89%87%E5%8A%9F%E8%83%BD%E6%94%AF%E6%8C%81%E6%B0%B4%E5%B9%B3%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E7%BE%A4%EF%BC%8C%E5%8F%AF%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E9%A2%9D%E5%A4%96%E7%9A%84%E6%9C%BA%E5%99%A8%0A-%20%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%9F%A5%E8%AF%A2%EF%BC%9A%E6%94%AF%E6%8C%81%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%9F%A5%E8%AF%A2%E6%8C%87%E4%BB%A4%E4%BD%BF%E7%94%A8JSON%E5%BD%A2%E5%BC%8F%E7%9A%84%E6%A0%87%E8%AE%B0%EF%BC%8C%E5%8F%AF%E8%BD%BB%E6%98%93%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E5%86%85%E5%B5%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%8F%8A%E6%95%B0%E7%BB%84%0A-%20%E5%BF%AB%E9%80%9F%E5%B0%B1%E5%9C%B0%E6%9B%B4%E6%96%B0%EF%BC%9A%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96%E5%99%A8%E4%BC%9A%E5%88%86%E6%9E%90%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%8C%E5%B9%B6%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E9%AB%98%E6%95%88%E7%9A%84%E6%9F%A5%E8%AF%A2%E8%AE%A1%E5%88%92%0A-%20%E9%AB%98%E6%95%88%E7%9A%84%E4%BC%A0%E7%BB%9F%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%EF%BC%9A%E6%94%AF%E6%8C%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%A4%A7%E5%9E%8B%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%A6%82%E7%85%A7%E7%89%87%E6%88%96%E5%9B%BE%E7%89%87%EF%BC%89%0A%0A%23%23%23%23%20**%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C**%0A-%20MongoDB%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%EF%BC%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%94%B1%E9%94%AE%E5%80%BC(key%3D%3Evalue)%E5%AF%B9%E7%BB%84%E6%88%90%0A-%20MongoDB%E6%96%87%E6%A1%A3%E7%B1%BB%E4%BC%BC%E4%BA%8EJSON%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%AD%97%E6%AE%B5%E5%80%BC%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3%E3%80%81%E6%95%B0%E7%BB%84%E3%80%81%E6%96%87%E6%A1%A3%E6%95%B0%E7%BB%84%0A-%20%E5%AE%89%E8%A3%85%E7%AE%A1%E7%90%86mongodb%E7%8E%AF%E5%A2%83%0A-%20%E5%AE%8C%E6%88%90%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E9%9B%86%E5%90%88%E7%9A%84%E7%AE%A1%E7%90%86%0A-%20%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%8A%A0%E3%80%81%E4%BF%AE%E6%94%B9%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E6%9F%A5%E8%AF%A2%0A%0A**%E5%90%8D%E7%A7%B0**%0ASQL%E5%B1%9E%E4%BA%8E%2F%E6%A6%82%E5%BF%B5%20%7CMongoDB%E6%9C%AF%E8%AF%AD%2F%E6%A6%82%E5%BF%B5%7C%E8%A7%A3%E9%87%8A%2F%E8%AF%B4%E6%98%8E%0A-------%20%7C%20-------%20%7C%20-------%0Adatabase%20%7Cdatabase%7C%E6%95%B0%E6%8D%AE%E5%BA%93%0Atable%7Ccollection%7C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%2F%E9%9B%86%E5%90%88%0Arow%7Cdocument%7C%E6%95%B0%E6%8D%AE%E8%AE%B0%E5%BD%95%E8%A1%8C%2F%E6%96%87%E6%A1%A3%0Acolumn%7Cfield%7C%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%2F%E5%9F%9F%0Aindex%7Cindex%7C%E7%B4%A2%E5%BC%95%0Atable%20joins%7C%E6%97%A0%7C%E8%A1%A8%E8%BF%9E%E6%8E%A5%2CMongoDB%E4%B8%8D%E6%94%AF%E6%8C%81%0Aprimary%20key%7Cprimary%20key%7C%E4%B8%BB%E9%94%AE%2CMongoDB%E8%87%AA%E5%8A%A8%E5%B0%86_id%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AE%E4%B8%BA%E4%B8%BB%E9%94%AE%0A%0A%0A%23%23%23%23%20**%E4%B8%89%E5%85%83%E7%B4%A0%EF%BC%9A**%0A%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%81%E9%9B%86%E5%90%88%E3%80%81%E6%96%87%E6%A1%A3%0A-%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E4%B8%80%E4%B8%AA%E9%9B%86%E5%90%88%E7%9A%84%E7%89%A9%E7%90%86%E5%AE%B9%E5%99%A8%0A-%20%E9%9B%86%E5%90%88%E5%B0%B1%E6%98%AF%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8%0A-%20%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E7%9D%80%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%8C%0A%0A%0A%23%23%20**%E5%AE%89%E8%A3%85Mongodb**%0A%0A**%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AE%89%E8%A3%85%E5%9C%B0%E5%9D%80**%3A%0Ahttps%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Finstallation%2F%0A%0A**Windowns%20%E5%AE%89%E8%A3%85%EF%BC%9A%E5%8F%AF%E5%8F%82%E7%85%A7%E5%A6%82%E4%B8%8B%E9%93%BE%E6%8E%A5%3A**%0Ahttps%3A%2F%2Fwww.cnblogs.com%2Fymwangel%2Fp%2F5859453.html%0A%0A%0A%23%23%23%23%20**%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A**%0AMongoDB%E5%AE%89%E8%A3%85%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E6%97%A0%E9%9C%80%E4%B8%8B%E8%BD%BD%E6%BA%90%E6%96%87%E4%BB%B6%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E7%94%A8apt-get%E5%91%BD%E4%BB%A4%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%9A%84%E5%8F%AF%E9%9D%A0%E7%89%88%E3%80%82%0A%20%0A%3E%EF%BC%91%EF%BC%8Esudo%20apt-key%20adv%20--keyserver%20hkp%3A%2F%2Fkeyserver.ubuntu.com%3A80%20--recv%209DA31620334BD75D9DCB49F368818C72E52529D4%0A%23%23%23%23%20%E5%A6%82%E6%9E%9C%E6%98%AF16.04%E6%89%A7%E8%A1%8C%E4%B8%8B%E9%9D%A2%E8%BF%99%E6%9D%A1%E6%93%8D%E4%BD%9C%0A%3E%EF%BC%92%EF%BC%8Eecho%20%22deb%20%5B%20arch%3Damd64%2Carm64%20%5D%20https%3A%2F%2Frepo.mongodb.org%2Fapt%2Fubuntu%20xenial%2Fmongodb-org%2F4.0%20multiverse%22%20%7C%20sudo%20tee%20%2Fetc%2Fapt%2Fsources.list.d%2Fmongodb-org-4.0.list%0A%23%23%23%23%20%E5%A6%82%E6%9E%9C%E6%98%AF18.04%E6%89%A7%E8%A1%8C%E4%B8%8B%E9%9D%A2%E8%BF%99%E6%9D%A1%E6%93%8D%E4%BD%9C%0A%3Eecho%20%22deb%20%5B%20arch%3Damd64%20%5D%20https%3A%2F%2Frepo.mongodb.org%2Fapt%2Fubuntu%20bionic%2Fmongodb-org%2F4.0%20multiverse%22%20%7C%20sudo%20tee%20%2Fetc%2Fapt%2Fsources.list.d%2Fmongodb-org-4.0.list%0A%0A%60%60%60%0Asudo%20apt-get%20update%0A%60%60%60%0A%60%60%60%0Asudo%20apt-get%20install%20-y%20mongodb-org%0A%60%60%60%0A%0A**%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E5%9C%A8%E7%BB%88%E7%AB%AF%E8%BE%93%E5%85%A5%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8BMongoDB%E7%89%88%E6%9C%AC%EF%BC%9A**%0A%60%60%60%0Amongo%20-version%20%0A%60%60%60%0A%E4%B8%80%E8%88%AC%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F%E5%90%8E%E4%BC%9A%E6%98%BE%E7%A4%BA%E4%B8%BA4.0.1%E7%89%88%E6%9C%AC%0A%60%60%60%0AMongoDB%20shell%20version%20v4.0.1%0A%60%60%60%0A%0A%23%23%20**%E5%BC%80%E5%90%AFmongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%EF%BC%8C%E8%BF%9E%E6%8E%A5%E5%AE%A2%E6%88%B7%E7%AB%AF**%0A%0A-%20**%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84**%0A%60%60%60%0A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%9C%A8%2Fetc%2Fmongod.conf%0A%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A327017%0A%60%60%60%0A%0A-%20**%E5%90%AF%E5%8A%A8%E5%8A%A8mongodb%20%E6%9C%8D%E5%8A%A1**%0A%60%60%60%0Asudo%20service%20mongod%20start%0A%60%60%60%0A-%20**%E5%81%9C%E6%AD%A2%EF%BC%8C%E5%81%9C%E6%AD%A2%E5%90%8E%E8%BE%93%E5%85%A5%E5%B0%86%E4%B8%8D%E8%83%BD%E5%90%AF%E5%8A%A8shell**%0A%60%60%60%0Asudo%20service%20mongod%20stop%0A%60%60%60%0A%0A-%20**%E9%87%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1**%0A%60%60%60%0Asudo%20service%20mongod%20restart%0A%60%60%60%0A-%20**%E5%90%AF%E5%8A%A8mongodb%E5%AE%A2%E6%88%B7%E7%AB%AF**%0A%60%60%60%0A%20mongo%0A%60%60%60%0A-%20**%E7%BB%88%E7%AB%AF%E9%80%80%E5%87%BA%E8%BF%9E%E6%8E%A5**%0A%60%60%60%0Aexit%20%E6%88%96%20ctrl%2Bc%0A%60%60%60%0A%0A%23%23%20**%E5%8D%B8%E8%BD%BDmongodb%E6%95%B0%E6%8D%AE%E5%BA%93**%0A%0A%E5%88%A0%E9%99%A4%20MongoDB%20%E5%8C%85%0A%60%60%60%0Asudo%20apt-get%20purge%20mongodb-org*%0A%60%60%60%0A%E5%88%A0%E9%99%A4%20MongoDB%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%0A%60%60%60%0Asudo%20rm%20-r%20%2Fvar%2Flog%2Fmongodb%0Asudo%20rm%20-r%20%2Fvar%2Flib%2Fmongodb%0A%60%60%60%0A%0A%23%23%20**%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85**%0A%0A%E7%AE%A1%E7%90%86mongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%9Arobomongo%0A%E5%AE%89%E8%A3%85%E5%9C%B0%E5%9D%80%EF%BC%9Ahttps%3A%2F%2Frobomongo.org%2Fdownload%0A%0A!%5BDeepinScrot-3344%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77bded30fa3.png)%0A%0A%EF%BC%91%EF%BC%8E%E4%B8%8B%E8%BD%BD%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E8%A7%A3%E5%8E%8B%EF%BC%8C%E8%BF%9B%E5%85%A5%E6%96%87%E4%BB%B6%E5%A4%B9%E6%89%BE%E5%88%B0bin%E6%96%87%E4%BB%B6%E5%A4%B9%0A%EF%BC%92%EF%BC%8E%E8%BF%9B%E5%85%A5bin%E6%96%87%E4%BB%B6%E5%A4%B9%EF%BC%8C%E7%9C%8B%E5%88%B0robot3T%0A%EF%BC%93%EF%BC%8E%E5%8F%8C%E5%87%BB%E5%8D%B3%E5%8F%AF%E6%89%93%E5%BC%80%0A%0A!%5BDeepinScrot-3645%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77be971fab7.png)%0A%0A%0A%23%23%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%0A%0A**%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4**%0A%0A-%20%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0%0A%60%60%60%0Adb%0A%60%60%60%0A-%20%E5%88%97%E5%87%BA%E6%89%80%E6%9C%89%E5%9C%A8%E7%89%A9%E7%90%86%E4%B8%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%0A%60%60%60%0Ashow%20dbs%0A%60%60%60%0A-%20%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93%20%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E6%8C%87%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8C%E4%BD%86%E4%B8%8D%E5%88%9B%E5%BB%BA%EF%BC%8C%E7%9B%B4%E5%88%B0%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E6%88%96%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88%E6%97%B6%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%8D%E8%A2%AB%E5%88%9B%E5%BB%BA%0A%60%60%60%0Ause%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0%0A%60%60%60%0A-%20%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%A1%E6%81%AF%0A%60%60%60%0Adb.stats()%0A%60%60%60%0A%60%60%60%0Adb%EF%BC%9A%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%90%8D%E5%AD%97%E3%80%82%0Acollections%EF%BC%9A%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%9B%86%E5%90%88%E6%95%B0%E3%80%82%0Aobjects%EF%BC%9A%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%80%E6%9C%89%E9%9B%86%E5%90%88%E6%80%BB%E6%89%80%E5%8C%85%E5%90%AB%E7%9A%84%E5%AF%B9%E8%B1%A1%0A%EF%BC%88%E5%8D%B3%E6%96%87%E6%A1%A3%EF%BC%89%E7%9A%84%E6%95%B0%E9%87%8F%E3%80%82%0AavgObjSize%EF%BC%9A%E6%AF%8F%E4%B8%AA%E6%96%87%E6%A1%A3%E7%9A%84%E5%B9%B3%E5%9D%87%E5%A4%A7%E5%B0%8F%EF%BC%88%E4%BB%A5%E5%AD%97%E8%8A%82%0A%E4%B8%BA%E5%8D%95%E4%BD%8D%EF%BC%89%E3%80%82%0AdataSize%EF%BC%9A%E6%AD%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E4%BF%9D%E5%AD%98%E7%9A%84%E6%9C%AA%E5%8E%8B%E7%BC%A9%E6%95%B0%E6%8D%AE%E7%9A%84%0A%E6%80%BB%E5%A4%A7%E5%B0%8F%EF%BC%8C%E4%B8%8D%E6%98%AF%E6%8C%87%E5%8D%A0%E6%9C%89%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%98%AFbytes%E3%80%82%0AstorageSize%EF%BC%9A%E5%88%86%E9%85%8D%E7%BB%99%E6%AD%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E9%9B%86%E5%90%88%E7%94%A8%E4%BA%8E%0A%E5%AD%98%E5%82%A8%E6%96%87%E6%A1%A3%E7%9A%84%E7%A9%BA%E9%97%B4%E6%80%BB%E9%87%8F%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8D%A0%0A%E6%9C%89%E7%A3%81%E7%9B%98%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%98%AFbytes%E3%80%82%0AnumExtents%EF%BC%9A%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%89%80%E6%9C%89%E9%9B%86%E5%90%88%E5%8C%85%E5%90%AB%E7%9A%84%0A%E6%89%A9%E5%B1%95%E6%95%B0%E9%87%8F%E7%9A%84%E7%BB%9F%E8%AE%A1%E3%80%82%0Aindexes%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E5%8C%85%E5%90%AB%E7%9A%84%E6%89%80%E6%9C%89%E9%9B%86%E5%90%88%E7%9A%84%E7%B4%A2%E5%BC%95%0A%E6%80%BB%E6%95%B0%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AFsystem.indexes%E8%A1%A8%E6%95%B0%E6%8D%AE%E8%A1%8C%E6%95%B0%E3%80%82%0AindexSize%EF%BC%9A%E6%AD%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8A%E5%88%9B%E5%BB%BA%E7%9A%84%E6%89%80%E6%9C%89%E7%B4%A2%E5%BC%95%E7%9A%84%0A%E6%80%BB%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%98%AFbytes%E3%80%82%0A%60%60%60%0A%0A-%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%A0%E9%99%A4%3A%0A%E5%88%A0%E9%99%A4%E5%BD%93%E5%89%8D%E6%8C%87%E5%90%91%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%2C%E5%A6%82%E6%9E%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8D%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%88%99%E4%BB%80%E4%B9%88%E4%B9%9F%E4%B8%8D%E5%81%9A%0A%60%60%60%0Adb.dropDatabase()%0A%60%60%60%0A%0A%23%23%20%E9%9B%86%E5%90%88%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%0A%0A-%20%E5%88%9B%E5%BB%BA%E9%9B%86%E5%90%88%0A%60%60%60%0Adb.createCollection(name%2C%20options)%0A%60%60%60%0A-%20name%E6%98%AF%E8%A6%81%E5%88%9B%E5%BB%BA%E7%9A%84%E9%9B%86%E5%90%88%E7%9A%84%E5%90%8D%E7%A7%B0%0A-%20options%E6%98%AF%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%EF%BC%8C%E7%94%A8%E4%BA%8E%E6%8C%87%E5%AE%9A%E9%9B%86%E5%90%88%E7%9A%84%E9%85%8D%E7%BD%AE%0A%20%20%20%20%E9%80%89%E9%A1%B9%E2%80%8B%E2%80%8B%E5%8F%82%E6%95%B0%E6%98%AF%E5%8F%AF%E9%80%89%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E5%8F%AA%E9%9C%80%E8%A6%81%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9A%84%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0%E3%80%82%E4%BB%A5%E4%B8%8B%E6%98%AF%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E7%9A%84%E9%80%89%E9%A1%B9%E5%88%97%E8%A1%A8%EF%BC%9A%0A%20%20%20%20%E5%AD%97%E6%AE%B5%20%7C%09%E7%B1%BB%E5%9E%8B%09%7C%E6%8F%8F%E8%BF%B0%0A%20%20%20%20----%20%7C----%20%7C----%0A%20%20%20%20capped%7C%09%E5%B8%83%E5%B0%94%7C%09%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E5%A6%82%E6%9E%9C%E4%B8%BA%20true%EF%BC%8C%E5%88%99%E5%88%9B%E5%BB%BA%E5%9B%BA%E5%AE%9A%E9%9B%86%E5%90%88%E3%80%82%E5%9B%BA%E5%AE%9A%E9%9B%86%E5%90%88%E6%98%AF%E6%8C%87%E6%9C%89%E7%9D%80%E5%9B%BA%E5%AE%9A%E5%A4%A7%E5%B0%8F%E7%9A%84%E9%9B%86%E5%90%88%EF%BC%8C%E5%BD%93%E8%BE%BE%E5%88%B0%E6%9C%80%E5%A4%A7%E5%80%BC%E6%97%B6%EF%BC%8C%E5%AE%83%E4%BC%9A%E8%87%AA%E5%8A%A8%E8%A6%86%E7%9B%96%E6%9C%80%E6%97%A9%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%20%E5%BD%93%E8%AF%A5%E5%80%BC%E4%B8%BA%20true%20%E6%97%B6%EF%BC%8C%E5%BF%85%E9%A1%BB%E6%8C%87%E5%AE%9A%20size%20%E5%8F%82%E6%95%B0%E3%80%82%0A%20%20%20%20autoIndexId%09%7C%E5%B8%83%E5%B0%94%7C%09%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E5%A6%82%E4%B8%BA%20true%EF%BC%8C%E8%87%AA%E5%8A%A8%E5%9C%A8%20_id%20%E5%AD%97%E6%AE%B5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E3%80%82%E9%BB%98%E8%AE%A4%E4%B8%BA%20false%E3%80%82%0A%20%20%20%20size%7C%09%E6%95%B0%E5%80%BC%7C%09%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E4%B8%BA%E5%9B%BA%E5%AE%9A%E9%9B%86%E5%90%88%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E6%9C%80%E5%A4%A7%E5%80%BC.%E5%BD%93%E6%96%87%E6%A1%A3%E8%BE%BE%E5%88%B0%E4%B8%8A%E9%99%90%E6%97%B6%EF%BC%8C%E4%BC%9A%E5%B0%86%E4%B9%8B%E5%89%8D%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A6%86%E7%9B%96%EF%BC%8C%E5%8D%95%E4%BD%8D%E4%B8%BA%E5%AD%97%E8%8A%82%E3%80%82%E5%A6%82%E6%9E%9C%20capped%20%E4%B8%BA%20true%EF%BC%8C%E4%B9%9F%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E8%AF%A5%E5%AD%97%E6%AE%B5%E3%80%82%0A%20%20%20%20max%7C%09%E6%95%B0%E5%80%BC%7C%09%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E6%8C%87%E5%AE%9A%E5%9B%BA%E5%AE%9A%E9%9B%86%E5%90%88%E4%B8%AD%E5%8C%85%E5%90%AB%E6%96%87%E6%A1%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B0%E9%87%8F%E3%80%82%0A%20%20%20%20%0A%0A-%20%E4%B8%8D%E9%99%90%E5%88%B6%E9%9B%86%E5%90%88%E5%A4%A7%E5%B0%8F%0A%60%60%60%0Adb.createCollection(%22stu%22)%0A%60%60%60%0A%0A-%20%E9%99%90%E5%88%B6%E9%9B%86%E5%90%88%E5%A4%A7%E5%B0%8F%0A%20%20-%20%E5%8F%82%E6%95%B0capped%EF%BC%9A%E9%BB%98%E8%AE%A4%E5%80%BC%E4%B8%BAfalse%E8%A1%A8%E7%A4%BA%E4%B8%8D%E8%AE%BE%E7%BD%AE%E4%B8%8A%E9%99%90%EF%BC%8C%E5%80%BC%E4%B8%BA%0Atrue%E8%A1%A8%E7%A4%BA%E8%AE%BE%E7%BD%AE%E4%B8%8A%E9%99%90%0A%20%20-%20%E5%8F%82%E6%95%B0size%EF%BC%9A%E5%BD%93capped%E5%80%BC%E4%B8%BAtrue%E6%97%B6%EF%BC%8C%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E6%AD%A4%E5%8F%82%E6%95%B0%EF%BC%8C%E8%A1%A8%E7%A4%BA%E4%B8%8A%E9%99%90%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%BD%93%E6%96%87%E6%A1%A3%E8%BE%BE%E5%88%B0%E4%B8%8A%E9%99%90%E6%97%B6%EF%BC%8C%E4%BC%9A%E5%B0%86%E4%B9%8B%E5%89%8D%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A6%86%E7%9B%96%EF%BC%8C%E5%8D%95%E4%BD%8D%E4%B8%BA%E5%AD%97%E8%8A%82%0A%60%60%60%0Adb.createCollection(%0A%20%20%20%20%22sub%22%2C%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20capped%20%3A%20true%2C%0A%20%20%20%20%20%20%20%20size%20%3A%2010%2C%0A%20%20%20%20%20%20%20%20max%3A%20100%2C%0A%20%20%20%20%7D%20%0A)%0A%60%60%60%0A%0A-%20%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9B%86%E5%90%88%0A%60%60%60%0Ashow%20collections%0A%60%60%60%0A-%20%E5%88%A0%E9%99%A4%E9%9B%86%E5%90%88%0A%E5%A6%82%E6%9E%9C%E6%88%90%E5%8A%9F%E5%88%A0%E9%99%A4%E9%80%89%E5%AE%9A%E9%9B%86%E5%90%88%EF%BC%8C%E5%88%99%20drop()%20%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%20true%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9E%20false%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.drop()%0A%60%60%60%0A%0A%23%23%20%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%0A%0A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%20%7C%09%E6%8F%8F%E8%BF%B0%0A----%20%7C%20----%0AString%20%7C%09%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%B8%B8%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E3%80%82%E5%9C%A8%20MongoDB%20%E4%B8%AD%EF%BC%8CUTF-8%20%E7%BC%96%E7%A0%81%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%8D%E6%98%AF%E5%90%88%E6%B3%95%E7%9A%84%E3%80%82%0AInteger%7C%09%E6%95%B4%E5%9E%8B%E6%95%B0%E5%80%BC%E3%80%82%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%E6%95%B0%E5%80%BC%E3%80%82%E6%A0%B9%E6%8D%AE%E4%BD%A0%E6%89%80%E9%87%87%E7%94%A8%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%8F%AF%E5%88%86%E4%B8%BA%2032%20%E4%BD%8D%E6%88%96%2064%20%E4%BD%8D%E3%80%82%0ABoolean%09%7C%E5%B8%83%E5%B0%94%E5%80%BC%E3%80%82%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%E5%B8%83%E5%B0%94%E5%80%BC%EF%BC%88%E7%9C%9F%2F%E5%81%87%EF%BC%89%E3%80%82%0ADouble%7C%09%E5%8F%8C%E7%B2%BE%E5%BA%A6%E6%B5%AE%E7%82%B9%E5%80%BC%E3%80%82%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%E6%B5%AE%E7%82%B9%E5%80%BC%E3%80%82%0AArray%7C%09%E7%94%A8%E4%BA%8E%E5%B0%86%E6%95%B0%E7%BB%84%E6%88%96%E5%88%97%E8%A1%A8%E6%88%96%E5%A4%9A%E4%B8%AA%E5%80%BC%E5%AD%98%E5%82%A8%E4%B8%BA%E4%B8%80%E4%B8%AA%E9%94%AE%E3%80%82%0ATimestamp%09%7C%E6%97%B6%E9%97%B4%E6%88%B3%E3%80%82%E8%AE%B0%E5%BD%95%E6%96%87%E6%A1%A3%E4%BF%AE%E6%94%B9%E6%88%96%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%85%B7%E4%BD%93%E6%97%B6%E9%97%B4%E3%80%82%0AObject%7C%09%E7%94%A8%E4%BA%8E%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%9A%84%E6%96%87%E6%A1%A3%EF%BC%8C%E5%8D%B3%E4%B8%80%E4%B8%AA%E5%80%BC%E4%B8%BA%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%0ANull%7C%09%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E7%A9%BA%E5%80%BC%E3%80%82%0ADate%09%7C%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E3%80%82%E7%94%A8%20UNIX%20%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E6%9D%A5%E5%AD%98%E5%82%A8%E5%BD%93%E5%89%8D%E6%97%A5%E6%9C%9F%E6%88%96%E6%97%B6%E9%97%B4%E3%80%82%E4%BD%A0%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%EF%BC%9A%E5%88%9B%E5%BB%BA%20Date%20%E5%AF%B9%E8%B1%A1%EF%BC%8C%E4%BC%A0%E5%85%A5%E5%B9%B4%E6%9C%88%E6%97%A5%E4%BF%A1%E6%81%AF%E3%80%82%0AObject%20ID%09%7C%20%E5%AF%B9%E8%B1%A1%20ID%E3%80%82%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E6%96%87%E6%A1%A3%E7%9A%84%20ID%E3%80%82%0ABinary%20Data%09%7C%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E3%80%82%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E3%80%82%0A%0A%23%23%23%23%20**ObjectId**%0A%0AObjectId%20%E7%B1%BB%E4%BC%BC%E5%94%AF%E4%B8%80%E4%B8%BB%E9%94%AE%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%BE%88%E5%BF%AB%E7%9A%84%E5%8E%BB%E7%94%9F%E6%88%90%E5%92%8C%E6%8E%92%E5%BA%8F%0A%0A-%20%E6%AF%8F%E4%B8%AA%E6%96%87%E6%A1%A3%E9%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%E5%B1%9E%E6%80%A7%EF%BC%8C%E4%B8%BA_id%EF%BC%8C%E4%BF%9D%E8%AF%81%E6%AF%8F%E4%B8%AA%E6%96%87%E6%A1%A3%E7%9A%84%E5%94%AF%E4%B8%80%E6%80%A7%0A-%20%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%B7%B1%E5%8E%BB%E8%AE%BE%E7%BD%AE_id%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3%0A-%20%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%8F%90%E4%BE%9B%EF%BC%8C%E9%82%A3%E4%B9%88MongoDB%E4%B8%BA%E6%AF%8F%E4%B8%AA%E6%96%87%E6%A1%A3%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%89%B9%E7%9A%84_id%EF%BC%8C%E7%B1%BB%E5%9E%8B%E4%B8%BAobjectID%0A-%20objectID%E6%98%AF%E4%B8%80%E4%B8%AA12%E5%AD%97%E8%8A%82%E7%9A%84%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E6%95%B0%0A%20%20%20%20%E5%89%8D4%E4%B8%AA%E5%AD%97%E8%8A%82%E4%B8%BA%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E6%88%B3%0A%20%20%20%20%E6%8E%A5%E4%B8%8B%E6%9D%A53%E4%B8%AA%E5%AD%97%E8%8A%82%E7%9A%84%E6%9C%BA%E5%99%A8ID%0A%20%20%20%20%E6%8E%A5%E4%B8%8B%E6%9D%A5%E7%9A%842%E4%B8%AA%E5%AD%97%E8%8A%82%E4%B8%ADMongoDB%E7%9A%84%E6%9C%8D%E5%8A%A1%E8%BF%9B%E7%A8%8Bid%0A%20%20%20%20%E6%9C%80%E5%90%8E3%E4%B8%AA%E5%AD%97%E8%8A%82%E6%98%AF%E7%AE%80%E5%8D%95%E7%9A%84%E5%A2%9E%E9%87%8F%E5%80%BC%0A%0A-----------------------------------%0A%0A%23%23%23%23%20%E5%8D%95%E6%9D%A1%E6%8F%92%E5%85%A5%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.insert(%7Bname%3A'%E7%8E%8B%E6%98%8E'%2Cgender%3A1%7D)%0A%60%60%60%0A%0A**%E6%B3%A8%E6%84%8F**%EF%BC%9A%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%8C%87%E5%AE%9A_id%E5%8F%82%E6%95%B0%EF%BC%8CMongoDB%E4%BC%9A%E4%B8%BA%E6%96%87%E6%A1%A3%E5%88%86%E9%85%8D%E4%B8%80%E4%B8%AA%E5%94%AF%E4%B8%80%E7%9A%84ObjectId%0A%0A%23%23%23%23%20%E5%A4%9A%E6%9D%A1%E6%8F%92%E5%85%A5%EF%BC%9A%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.insert(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7Bname%3A'%E7%8E%8B%E6%98%8E'%2Cgender%3A1%7D%2C%0A%20%20%20%20%20%20%20%20%7Bname%3A'%E7%8E%8B%E7%8E%B2%E7%8E%B2'%2Cgender%3A0%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%0A%E5%9C%A83.2%E7%89%88%E6%9C%AC%E4%B9%8B%E5%90%8E%E8%BF%98%E6%8F%90%E4%BE%9B%E4%BA%86%E6%8F%92%E5%85%A5%E5%A4%9A%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%92%8C%E6%8F%92%E5%85%A5%E5%8D%95%E6%9D%A1%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.insertOne(document)%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.insertMany(document)%0A%60%60%60%0A%0A%23%23%20%E5%88%A0%0A%0A**remove()**%20%E6%96%B9%E6%B3%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A%0A%60%60%60%0Adb.collection.remove(%0A%3Cquery%3E%2C%0A%7BjustOne%3A%20%3Cboolean%3E%2C%7D%0A)%0A%60%60%60%0A**%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E**%0A-%20query%20%3A%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E5%88%A0%E9%99%A4%E7%9A%84%E6%96%87%E6%A1%A3%E7%9A%84%E6%9D%A1%E4%BB%B6%E3%80%82%0A-%20justOne%20%3A%20%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E5%A6%82%E6%9E%9C%E8%AE%BE%E4%B8%BA%20true%20%E6%88%96%201%EF%BC%8C%E5%88%99%E5%8F%AA%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%E3%80%82%0A%0A----%0A%23%23%23%23%20%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.remove(document)%0A%60%60%60%0A%0A%23%23%23%23%20%E5%8F%AA%E5%88%A0%E9%99%A4%EF%BC%91%E6%9D%A1%EF%BC%8C%EF%BC%91%E8%A1%A8%E7%A4%BA%E6%98%AF%E5%90%A6%E5%8F%AA%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E4%B8%BAtrue%E7%9A%84%E6%84%8F%E6%80%9D%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.remove(%0A%20%20%20%20document%2C1%0A)%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.remove(%0A%20%20%20%20document%2C%0A%20%20%20%20%7BjustOne%3Atrue%7D%0A)%0A%60%60%60%0A%0A%23%23%20%E6%94%B9%0A%0AMongoDB%20%E4%BD%BF%E7%94%A8%20**update()**%20%E5%92%8C%20**save()**%20%E6%96%B9%E6%B3%95%E6%9D%A5%E6%9B%B4%E6%96%B0%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E6%98%AF%E6%9C%89%E5%8C%BA%E5%88%AB%E7%9A%84%E3%80%82%0A%0A%23%23%23%23%20**update()%20%E6%96%B9%E6%B3%95**%0Aupdate()%20%E6%96%B9%E6%B3%95%E7%94%A8%E4%BA%8E%E6%9B%B4%E6%96%B0%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E6%96%87%E6%A1%A3%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.update(%0A%3Cquery%3E%2C%0A%3Cupdate%3E%2C%0A%7B%0A%20%20%20%20upsert%3A%20%3Cboolean%3E%2C%0A%20%20%20%20multi%3A%20%3Cboolean%3E%2C%0A%7D%0A)%0A%60%60%60%0A**%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E**%0A-%20query%20%3A%20update%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%EF%BC%8C%E7%B1%BB%E4%BC%BCsql%20update%E6%9F%A5%E8%AF%A2%E5%86%85where%E5%90%8E%E9%9D%A2%E7%9A%84%E3%80%82%0A%0A-%20update%20%3A%20update%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%92%8C%E4%B8%80%E4%BA%9B%E6%9B%B4%E6%96%B0%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6%EF%BC%88%E5%A6%82%24%2C%24inc...%EF%BC%89%E7%AD%89%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%90%86%E8%A7%A3%E4%B8%BAsql%20update%E6%9F%A5%E8%AF%A2%E5%86%85set%E5%90%8E%E9%9D%A2%E7%9A%84%0A%0A-%20upsert%20%3A%20%E5%8F%AF%E9%80%89%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E6%84%8F%E6%80%9D%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%AD%98%E5%9C%A8update%E7%9A%84%E8%AE%B0%E5%BD%95%EF%BC%8C%E6%98%AF%E5%90%A6%E6%8F%92%E5%85%A5objNew%2Ctrue%E4%B8%BA%E6%8F%92%E5%85%A5%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AFfalse%EF%BC%8C%E4%B8%8D%E6%8F%92%E5%85%A5%E3%80%82%0A%0A-%20multi%20%3A%20%E5%8F%AF%E9%80%89%EF%BC%8Cmongodb%20%E9%BB%98%E8%AE%A4%E6%98%AFfalse%2C%E5%8F%AA%E6%9B%B4%E6%96%B0%E6%89%BE%E5%88%B0%E7%9A%84%E7%AC%AC%E4%B8%80%E6%9D%A1%E8%AE%B0%E5%BD%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0true%2C%E5%B0%B1%E6%8A%8A%E6%8C%89%E6%9D%A1%E4%BB%B6%E6%9F%A5%E5%87%BA%E6%9D%A5%E5%A4%9A%E6%9D%A1%E8%AE%B0%E5%BD%95%E5%85%A8%E9%83%A8%E6%9B%B4%E6%96%B0%E3%80%82%0A----------%0A%23%23%23%23%20%E5%85%A8%E6%96%87%E6%A1%A3%E6%9B%B4%E6%96%B0%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.update(%0A%20%20%20%20%7Bname%3A'xxxxx'%7D%2C%0A%20%20%20%20%7Bname%3A'%E5%BC%A0xxx'%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20%E6%8C%87%E5%AE%9A%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%96%B0%EF%BC%8C%E9%80%9A%E8%BF%87%E6%93%8D%E4%BD%9C%E7%AC%A6%24set%0A-%20%E5%85%88%E6%8F%92%E5%85%A5%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.stu.insert(%0A%20%20%20%20%7Bname%3A'%E6%9D%8E%E8%87%AA%E6%88%90'%2Cgender%3A%EF%BC%91%7D%0A)%0A%60%60%60%0A-%20%E6%9B%B4%E6%96%B0%E8%BF%99%E6%9D%A1%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.stu.update(%0A%20%20%20%20%7Bname%3A'%E6%9D%8E%E8%87%AA%E6%88%90'%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%24set%3A%7Bname%3A'%E9%97%AF%E7%8E%8B%E6%9D%8E%E8%87%AA%E6%88%90'%7D%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A-%20%E6%9B%B4%E6%96%B0%E5%A4%9A%E6%9D%A1%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.stu.update(%0A%20%20%20%20%7Bname%3A'%E6%9D%8E%E8%87%AA%E6%88%90'%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%24set%3A%7Bname%3A'%E9%97%AF%E7%8E%8B%E6%9D%8E%E8%87%AA%E6%88%90'%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7Bmulti%3Atrue%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**save()%20%E6%96%B9%E6%B3%95**%0A%0A**save()**%20%E6%96%B9%E6%B3%95%E9%80%9A%E8%BF%87%E4%BC%A0%E5%85%A5%E7%9A%84%E6%96%87%E6%A1%A3%E6%9D%A5%E6%9B%BF%E6%8D%A2%E5%B7%B2%E6%9C%89%E6%96%87%E6%A1%A3%2C%E5%A6%82%E6%9E%9C%E6%96%87%E6%A1%A3%E7%9A%84_id%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E5%88%99%E4%BF%AE%E6%94%B9%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%96%87%E6%A1%A3%E7%9A%84_id%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E6%B7%BB%E5%8A%A0%0A%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.save(document)%0A%60%60%60%0A%0A%60%60%60%0Adb.stu.save(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20_id%3A'20180820101010'%2C%0A%20%20%20%20%20%20%20%20'name'%3A'%E8%B7%9F%E6%96%B0'%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%20%E6%9F%A5%E8%AF%A2%0A-%20find()%3A%E6%9F%A5%E8%AF%A2%EF%BC%8C%E8%BF%94%E5%9B%9E%E6%89%80%E6%9C%89%E6%BB%A1%E8%B6%B3%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%7B%E6%9D%A1%E4%BB%B6%E6%96%87%E6%A1%A3%7D)%0A%60%60%60%0A-%20findOne()%EF%BC%9A%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%8F%AA%E8%BF%94%E5%9B%9E%E7%AC%AC%E4%B8%80%E4%B8%AA%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.findOne(%7B%E6%9D%A1%E4%BB%B6%E6%96%87%E6%A1%A3%7D)%0A%60%60%60%0A-%20%E6%9F%A5%E8%AF%A2%E5%87%BA%E5%A7%93%E5%90%8D%E7%AD%89%E4%BA%8E%E6%9D%8E%E6%9F%90%E6%9F%90%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%7Bname%3A'%E6%9D%8E%E6%9F%90%E6%9F%90'%7D)%0A%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.findOne(%7Bname%3A'%E6%9D%8E%E6%9F%90%E6%9F%90'%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6**%0A%60%60%60%0A-%20%E7%AD%89%E4%BA%8E%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AF%E7%AD%89%E4%BA%8E%E5%88%A4%E6%96%AD%EF%BC%8C%E6%B2%A1%E6%9C%89%E8%BF%90%E7%AE%97%E7%AC%A6%0A-%20%E5%B0%8F%E4%BA%8E%5C%24lt%0A-%20%E5%B0%8F%E4%BA%8E%E6%88%96%E7%AD%89%E4%BA%8E%5C%24lte%0A-%20%E5%A4%A7%E4%BA%8E%5C%24gt%0A-%20%E5%A4%A7%E4%BA%8E%E6%88%96%E7%AD%89%E4%BA%8E%5C%24gte%0A-%20%E4%B8%8D%E7%AD%89%E4%BA%8E%5C%24ne%0A%60%60%60%0A%0A-%20%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E%E6%88%96%E7%AD%89%E4%BA%8E18%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%7Bage%3A%7B%24gte%3A18%7D%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6**%0A%0A%60%60%60%0A%E6%9F%A5%E8%AF%A2%E6%97%B6%E5%8F%AF%E4%BB%A5%E6%9C%89%E5%A4%9A%E4%B8%AA%E6%9D%A1%E4%BB%B6%EF%BC%8C%E5%A4%9A%E4%B8%AA%E6%9D%A1%E4%BB%B6%E4%B9%8B%E9%97%B4%E9%9C%80%E8%A6%81%E9%80%9A%E8%BF%87%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9E%E6%8E%A5%0A%E9%80%BB%E8%BE%91%E4%B8%8E%EF%BC%9A%E9%BB%98%E8%AE%A4%E6%98%AF%E9%80%BB%E8%BE%91%E4%B8%8E%E7%9A%84%E5%85%B3%E7%B3%BB%0A%60%60%60%0A%0A-%20%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E%E6%88%96%E7%AD%89%E4%BA%8E18%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%80%A7%E5%88%AB%E4%B8%BA1%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20age%3A%7B%24gte%3A18%7D%2C%0A%20%20%20%20%20%20%20%20gender%3A1%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**%E9%80%BB%E8%BE%91%E6%88%96%EF%BC%9A%E4%BD%BF%E7%94%A8%24or**%0A-%20%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E18%EF%BC%8C%E6%88%96%E6%80%A7%E5%88%AB%E4%B8%BA0%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%24or%3A%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bage%3A%7B%24gt%3A18%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bgender%3A1%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**and%E5%92%8Cor%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8**%20%0A-%20%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E18%E6%88%96%E6%80%A7%E5%88%AB%E4%B8%BA0%E7%9A%84%E5%AD%A6%E7%94%9F%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D%E4%B8%BAgj%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%24or%3A%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bage%3A%7B%24gte%3A18%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7Bgender%3A1%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20name%3A'gj'%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**%E8%8C%83%E5%9B%B4%E8%BF%90%E7%AE%97%E7%AC%A6**%0A%0A%E4%BD%BF%E7%94%A8%22%5C%24in%22%EF%BC%8C%22%5C%24nin%22%20%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%9C%A8%E6%9F%90%E4%B8%AA%E8%8C%83%E5%9B%B4%E5%86%85%0A-%20%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E4%B8%BA18%E3%80%8128%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20age%3A%7B%24in%3A%5B18%2C28%5D%7D%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%9F%A5%E8%AF%A2**%0A%0A%E4%BD%BF%E7%94%A8%2F%2F%E6%88%96%24regex%E7%BC%96%E5%86%99%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%0A-%20%E6%9F%A5%E8%AF%A2%E5%A7%93%E6%9D%8E%E7%9A%84%E5%AD%A6%E7%94%9F%0A%60%60%60%0Adb.stu.find(%0A%20%20%20%20%7Bname%3A%2F%5E%E6%9D%8E%2F%7D%0A)%0Adb.stu.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20name%3A%7B%24regex%3A'%5E%E6%9D%8E'%7D%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**Limit%E4%B8%8ESkip%E6%96%B9%E6%B3%95**%0A%0A-%20**limit()%20%E6%96%B9%E6%B3%95**%20%0A%E8%AF%BB%E5%8F%96%E6%8C%87%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AE%B0%E5%BD%95%0A%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().limit(num)%0A%60%60%60%0A%0A-%20**skip()%20%E6%96%B9%E6%B3%95**%0A%E4%BD%BF%E7%94%A8skip()%E6%96%B9%E6%B3%95%E6%9D%A5%E8%B7%B3%E8%BF%87%E6%8C%87%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8Cskip%E6%96%B9%E6%B3%95%E5%90%8C%E6%A0%B7%E6%8E%A5%E5%8F%97%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%E5%8F%82%E6%95%B0%E4%BD%9C%E4%B8%BA%E8%B7%B3%E8%BF%87%E7%9A%84%E8%AE%B0%E5%BD%95%E6%9D%A1%E6%95%B0%E3%80%82%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().skip(num)%0A%60%60%60%0A%0A-%20**limit()%20%E6%96%B9%E6%B3%95%E3%80%81skip()%20%E6%96%B9%E6%B3%95%20%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8D%E5%88%86%E5%85%88%E5%90%8E%E9%A1%BA%E5%BA%8F**%0A%0A%20%20%20%20%E8%A1%A8%E7%A4%BA%E8%B7%B3%E8%BF%87%E5%A4%9A%E5%B0%91%E6%9D%A1%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%A4%9A%E5%B0%91%E6%9D%A1%0A%20%20%20%20%E6%9F%A5%E8%AF%A2%E7%AC%AC5%E8%87%B38%E6%9D%A1%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().limit(4).skip(5)%0A%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().skip(5).limit(4)%0A%60%60%60%0A%0A%0A%23%23%23%23%20sort()%20%E6%96%B9%E6%B3%95%E6%8E%92%E5%BA%8F%0A%20%20sort()%E6%96%B9%E6%B3%95%E5%AF%B9%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%EF%BC%8Csort()%20%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E5%8F%82%E6%95%B0%E6%8C%87%E5%AE%9A%E6%8E%92%E5%BA%8F%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%B9%B6%E4%BD%BF%E7%94%A8%201%20%E5%92%8C%20-1%20%E6%9D%A5%E6%8C%87%E5%AE%9A%E6%8E%92%E5%BA%8F%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%85%B6%E4%B8%AD%201%20%E4%B8%BA%E5%8D%87%E5%BA%8F%E6%8E%92%E5%88%97%EF%BC%8C%E8%80%8C%20-1%20%E6%98%AF%E7%94%A8%E4%BA%8E%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97%E3%80%82%0A%0A-%20%E5%8D%87%E5%BA%8F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().sort(%7B%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%3A1%7D)%0A%60%60%60%0A-%20%E9%99%8D%E5%BA%8F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().sort(%7B%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%3A-1%7D)%0A%60%60%60%0A%E6%A0%B9%E6%8D%AE%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F%EF%BC%9A%0A-%20%E5%85%88%E6%A0%B9%E6%8D%AE%E5%B9%B4%E9%BE%84%E5%81%9A%E9%99%8D%E5%BA%8F%EF%BC%8C%E5%86%8D%E6%A0%B9%E6%8D%AE%E6%80%A7%E5%88%AB%E5%81%9A%E5%8D%87%E5%BA%8F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().sort(%7Bage%3A-1%2Cgender%3A1%7D)%0A%60%60%60%0A%0A**%E6%B3%A8%E6%84%8F%EF%BC%9A**%20skip()%2C%20limilt()%2C%20sort()%E4%B8%89%E4%B8%AA%E6%94%BE%E5%9C%A8%E4%B8%80%E8%B5%B7%E6%89%A7%E8%A1%8C%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%89%A7%E8%A1%8C%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%98%AF%E5%85%88%20sort()%2C%20%E7%84%B6%E5%90%8E%E6%98%AF%20skip()%EF%BC%8C%E6%9C%80%E5%90%8E%E6%98%AF%E6%98%BE%E7%A4%BA%E7%9A%84%20limit()%E3%80%82%0A%0A%23%23%23%23%20%20**distinct()%20%E5%8E%BB%E9%87%8D**%0A%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.distinct('%E5%8E%BB%E9%87%8D%E5%AD%97%E6%AE%B5'%2C%7B%E6%9D%A1%E4%BB%B6%7D)%0A%60%60%60%0A-%20%E6%9F%A5%E6%89%BE%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E20%E7%9A%84%E5%A7%93%E5%90%8D%EF%BC%88%E5%8E%BB%E9%87%8D%EF%BC%89%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.distinct('name'%2C%7Bage%3A%7B%24gt%3A20%7D%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**project%E6%8A%95%E5%BD%B1%EF%BC%88%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E6%83%B3%E8%A6%81%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%89**%0A%E5%9C%A8%E6%9F%A5%E8%AF%A2%E5%88%B0%E7%9A%84%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E4%B8%AD%EF%BC%8C%E5%8F%AA%E9%80%89%E6%8B%A9%E5%BF%85%E8%A6%81%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E9%80%89%E6%8B%A9%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%E7%9A%84%E6%95%B4%E4%B8%AA%E5%AD%97%E6%AE%B5%0A%0A-%20%E5%8F%82%E6%95%B0%E4%B8%BA%E5%AD%97%E6%AE%B5%E4%B8%8E%E5%80%BC%EF%BC%8C%E5%80%BC%E4%B8%BA1%E8%A1%A8%E7%A4%BA%E6%98%BE%E7%A4%BA%EF%BC%8C%E5%80%BC%E4%B8%BA0%E4%B8%8D%E6%98%BE%E7%A4%BA%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%7B%7D%2C%7B%E5%AD%97%E6%AE%B5%E5%90%8D%E7%A7%B0%3A0%2C...%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**count()%20%E7%BB%9F%E8%AE%A1%E4%B8%AA%E6%95%B0**%0A%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.count(%7B%E6%9D%A1%E4%BB%B6%7D)%0A%60%60%60%0A-%20%E8%A1%A8%E7%A4%BA%E8%BF%94%E5%9B%9E%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%96%87%E6%A1%A3%E6%95%B0%E9%87%8F%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find().count()%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%7B%E6%9D%A1%E4%BB%B6%7D).count()%0A%60%60%60%0A%0A-%20%E7%BB%9F%E8%AE%A1%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E20%E7%9A%84%E7%94%B7%E7%94%9F%E4%BA%BA%E6%95%B0%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.count(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20age%3A%7B%24gt%3A20%7D%2C%0A%20%20%20%20%20%20%20%20gender%3A1%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%E6%88%96%E8%80%85%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.find(%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20age%3A%7B%24gt%3A20%7D%2C%0A%20%20%20%20%20%20%20%20gender%3A1%0A%20%20%20%20%7D%0A).count()%0A%60%60%60%0A%0A----------------------%0A%23%23%20**mongodb%E7%9A%84%E8%81%9A%E5%90%88**%0AMongoDB%E4%B8%AD%E8%81%9A%E5%90%88(aggregate)%E4%B8%BB%E8%A6%81%E7%94%A8%E4%BA%8E%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE(%E8%AF%B8%E5%A6%82%E7%BB%9F%E8%AE%A1%E5%B9%B3%E5%9D%87%E5%80%BC%2C%E6%B1%82%E5%92%8C%E7%AD%89)%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E8%AE%A1%E7%AE%97%E5%90%8E%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%9C%E3%80%82%E6%9C%89%E7%82%B9%E7%B1%BB%E4%BC%BCsql%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%20count(*)%E3%80%82%0A%0A%23%23%23%23%20**aggregate()%20%E6%96%B9%E6%B3%95**%0A%0A%0AMongoDB%E4%B8%AD%E8%81%9A%E5%90%88%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8aggregate()%0A%E8%AF%AD%E6%B3%95%0A%0A-%20aggregate()%20%E6%96%B9%E6%B3%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A%0A%0A%3E%20db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)%0A%0A%E9%A6%96%E5%85%88%E6%88%91%E4%BB%AC%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%8CarticleDB%EF%BC%8C%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAarticle%E7%9A%84%E9%9B%86%E5%90%88%0A%0A%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%BA%90%E8%BE%93%E5%85%A5%E4%B8%80%E4%B8%8B%E6%95%B0%E6%8D%AE%0A%60%60%60%0A%7B%20%20%20%20%20%0A%20%20%20%20title%3A%20'MongoDB%20Overview'%2C%20%20%20%20%20%20%0A%20%20%20%20description%3A%20'MongoDB%20is%20no%20sql%20database'%2C%20%20%20%0A%20%20%20%20by_user%3A%20'w3cschool.cc'%2C%20%20%20%0A%20%20%20%20url%3A%20'http%3A%2F%2Fwww.w3cschool.cc'%2C%20%20%0A%20%20%20%20tags%3A%20%5B'mongodb'%2C%20'database'%2C%20'NoSQL'%5D%2C%20%20%0A%20%20%20%20likes%3A%20100%20%20%0A%7D%2C%20%0A%0A%7B%20%20%20%20%20%20%20%0A%20%20%20%20title%3A%20'NoSQL%20Overview'%2C%20%20%20%20%0A%20%20%20%20description%3A%20'No%20sql%20database%20is%20very%20fast'%2C%20%20%20%20%0A%20%20%20%20by_user%3A%20'w3cschool.cc'%2C%20%20%20%0A%20%20%20%20url%3A%20'http%3A%2F%2Fwww.w3cschool.cc'%2C%20%20%20%0A%20%20%20%20tags%3A%20%5B'mongodb'%2C%20'database'%2C%20'NoSQL'%5D%2C%20%20%20%0A%20%20%20%20likes%3A%2010%20%20%0A%7D%2C%20%20%0A%0A%7B%20%20%20%20%0A%20%20%20%20title%3A%20'Neo4j%20Overview'%2C%20%20%0A%20%20%20%20description%3A%20'Neo4j%20is%20no%20sql%20database'%2C%20%20%20%0A%20%20%20%20by_user%3A%20'Neo4j'%2C%20%20%20%0A%20%20%20%20url%3A%20'http%3A%2F%2Fwww.neo4j.com'%2C%20%20%0A%20%20%20%20tags%3A%20%5B'neo4j'%2C%20'database'%2C%20'NoSQL'%5D%2C%20%20%0A%20%20%20%20likes%3A%20750%20%20%0A%7D%2C%20%0A%60%60%60%0A%23%23%23%23%20**%E7%AE%A1%E9%81%93%E7%9A%84%E6%A6%82%E5%BF%B5**%0A%0A-%20%E7%AE%A1%E9%81%93%E5%9C%A8Unix%E5%92%8CLinux%E4%B8%AD%E4%B8%80%E8%88%AC%E7%94%A8%E4%BA%8E%E5%B0%86%E5%BD%93%E5%89%8D%E5%91%BD%E4%BB%A4%E7%9A%84%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E4%BD%9C%E4%B8%BA%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8F%82%E6%95%B0%E3%80%82%0A%0A-%20MongoDB%E7%9A%84%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E5%B0%86MongoDB%E6%96%87%E6%A1%A3%E5%9C%A8%E4%B8%80%E4%B8%AA%E7%AE%A1%E9%81%93%E5%A4%84%E7%90%86%E5%AE%8C%E6%AF%95%E5%90%8E%E5%B0%86%E7%BB%93%E6%9E%9C%E4%BC%A0%E9%80%92%E7%BB%99%E4%B8%8B%E4%B8%80%E4%B8%AA%E7%AE%A1%E9%81%93%E5%A4%84%E7%90%86%E3%80%82%E7%AE%A1%E9%81%93%E6%93%8D%E4%BD%9C%E6%98%AF%E5%8F%AF%E4%BB%A5%E9%87%8D%E5%A4%8D%E7%9A%84%E3%80%82%0A%0A-%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%9A%E5%A4%84%E7%90%86%E8%BE%93%E5%85%A5%E6%96%87%E6%A1%A3%E5%B9%B6%E8%BE%93%E5%87%BA%E3%80%82%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%98%AF%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%EF%BC%8C%E5%8F%AA%E8%83%BD%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E5%BD%93%E5%89%8D%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E7%9A%84%E6%96%87%E6%A1%A3%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%A4%84%E7%90%86%E5%85%B6%E5%AE%83%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%0A%0A%E8%BF%99%E9%87%8C%E6%88%91%E4%BB%AC%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E8%81%9A%E5%90%88%E6%A1%86%E6%9E%B6%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AA%E6%93%8D%E4%BD%9C%EF%BC%9A%0A%0A-%20%24group%EF%BC%9A%E5%B0%86%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%96%87%E6%A1%A3%E5%88%86%E7%BB%84%EF%BC%8C%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%BB%9F%E8%AE%A1%E7%BB%93%E6%9E%9C%E3%80%82%0A%0A-%20%24project%EF%BC%9A%E4%BF%AE%E6%94%B9%E8%BE%93%E5%85%A5%E6%96%87%E6%A1%A3%E7%9A%84%E7%BB%93%E6%9E%84%E3%80%82%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E9%87%8D%E5%91%BD%E5%90%8D%E3%80%81%E5%A2%9E%E5%8A%A0%E6%88%96%0A%E5%88%A0%E9%99%A4%E5%9F%9F%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%E4%BB%A5%E5%8F%8A%E5%B5%8C%E5%A5%97%E6%96%87%E6%A1%A3%E3%80%82%0A%0A-%20%24match%EF%BC%9A%E7%94%A8%E4%BA%8E%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%8F%AA%E8%BE%93%E5%87%BA%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%24match%E4%BD%BF%0A%E7%94%A8MongoDB%E7%9A%84%E6%A0%87%E5%87%86%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E3%80%82%0A%0A-%20%24limit%EF%BC%9A%E7%94%A8%E6%9D%A5%E9%99%90%E5%88%B6MongoDB%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E8%BF%94%E5%9B%9E%E7%9A%84%E6%96%87%E6%A1%A3%E6%95%B0%E3%80%82%0A%0A-%20%24skip%EF%BC%9A%E5%9C%A8%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E4%B8%AD%E8%B7%B3%E8%BF%87%E6%8C%87%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%96%87%E6%A1%A3%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E4%BD%99%E4%B8%8B%E7%9A%84%E6%96%87%0A%E6%A1%A3%E3%80%82%0A%0A-%20%24unwind%EF%BC%9A%E5%B0%86%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E6%9D%A1%EF%BC%8C%E6%AF%8F%E6%9D%A1%0A%E5%8C%85%E5%90%AB%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%80%BC%E3%80%82%0A%0A-%20%24sort%EF%BC%9A%E5%B0%86%E8%BE%93%E5%85%A5%E6%96%87%E6%A1%A3%E6%8E%92%E5%BA%8F%E5%90%8E%E8%BE%93%E5%87%BA%E3%80%82%0A%0A%0A%23%23%23%23%20**%E8%81%9A%E5%90%88%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F%3A**%0A%0A-%20%5C%24sum%09%E8%AE%A1%E7%AE%97%E6%80%BB%E5%92%8C%E3%80%82%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20num_tutorial%20%3A%20%7B%24sum%20%3A%20%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24avg%09%E8%AE%A1%E7%AE%97%E5%B9%B3%E5%9D%87%E5%80%BC%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20num_tutorial%20%3A%20%7B%24avg%20%3A%20%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24min%09%E8%8E%B7%E5%8F%96%E9%9B%86%E5%90%88%E4%B8%AD%E6%89%80%E6%9C%89%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%80%BC%E5%BE%97%E6%9C%80%E5%B0%8F%E5%80%BC%E3%80%82%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20num_tutorial%20%3A%20%7B%24min%20%3A%20%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24max%09%E8%8E%B7%E5%8F%96%E9%9B%86%E5%90%88%E4%B8%AD%E6%89%80%E6%9C%89%E6%96%87%E6%A1%A3%E5%AF%B9%E5%BA%94%E5%80%BC%E5%BE%97%E6%9C%80%E5%A4%A7%E5%80%BC%E3%80%82%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20num_tutorial%20%3A%20%7B%24max%20%3A%20%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24push%09%E5%9C%A8%E7%BB%93%E6%9E%9C%E6%96%87%E6%A1%A3%E4%B8%AD%E6%8F%92%E5%85%A5%E5%80%BC%E5%88%B0%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E4%B8%AD%E3%80%82%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20url%20%3A%20%7B%24push%3A%20%22%24url%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24first%09%E6%A0%B9%E6%8D%AE%E8%B5%84%E6%BA%90%E6%96%87%E6%A1%A3%E7%9A%84%E6%8E%92%E5%BA%8F%E8%8E%B7%E5%8F%96%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%E6%95%B0%E6%8D%AE%E3%80%82%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20first_url%20%3A%20%7B%24first%20%3A%20%22%24url%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A-%20%5C%24last%09%E6%A0%B9%E6%8D%AE%E8%B5%84%E6%BA%90%E6%96%87%E6%A1%A3%E7%9A%84%E6%8E%92%E5%BA%8F%E8%8E%B7%E5%8F%96%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E6%96%87%E6%A1%A3%E6%95%B0%E6%8D%AE%0A%60%60%60%0Adb.mycol.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%20%3A%20%7B_id%20%3A%20%22%24by_user%22%2C%20last_url%20%3A%20%7B%24last%20%3A%20%22%24url%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**%24group**%0A-%20%E5%B0%86%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%96%87%E6%A1%A3%E5%88%86%E7%BB%84%EF%BC%8C%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%BB%9F%E8%AE%A1%E7%BB%93%E6%9E%9C%0A%0A-%20_id%E8%A1%A8%E7%A4%BA%E5%88%86%E7%BB%84%E7%9A%84%E4%BE%9D%E6%8D%AE%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84%E6%A0%BC%E5%BC%8F%E4%B8%BA'%24%E5%AD%97%E6%AE%B5'%0A%0A%E4%BE%8B1%EF%BC%9A%E7%BB%9F%E8%AE%A1%E6%AF%8F%E4%B8%AA%E4%BD%9C%E5%AE%B6%E5%86%99%E4%B9%A6%E7%9A%84%E6%80%BB%E6%95%B0%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%3A%7B_id%3A'%24by_user'%2Ccounter%3A%7B%24sum%3A1%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%E4%BE%8B1%EF%BC%9A%E7%BB%9F%E8%AE%A1%E6%AF%8F%E4%B8%AA%E4%BD%9C%E5%AE%B6%E7%9A%84%E6%80%BB%E7%9A%84%E7%82%B9%E8%B5%9E%E6%95%B0%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%3A%7B_id%3A'%24by_user'%2Clike%3A%7B%24sum%3A%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**Group%20by%20null**%0A-%20%E5%B0%86%E9%9B%86%E5%90%88%E4%B8%AD%E6%89%80%E6%9C%89%E6%96%87%E6%A1%A3%E5%88%86%E4%B8%BA%E4%B8%80%E7%BB%84%0A%0A%E4%BE%8B2%EF%BC%9A%E6%B1%82%E9%9B%86%E5%90%88%E4%B8%AD%E4%BD%9C%E8%80%85%E6%80%BB%E4%B9%A6%E6%95%B0%E9%87%8F%E4%BD%9C%E8%80%85%E7%9A%84%E5%B9%B3%E5%9D%87%E7%82%B9%E8%B5%9E%E6%95%B0%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24group%3A%7B_id%3Anull%2Ccounter%3A%7B%24sum%3A1%7D%2Clikes%3A%7B%24avg%3A%22%24likes%22%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**%24project**%0A-%20%E4%BF%AE%E6%94%B9%E8%BE%93%E5%85%A5%E6%96%87%E6%A1%A3%E7%9A%84%E7%BB%93%E6%9E%84%2C%20%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E9%87%8D%E5%91%BD%E5%90%8D%E5%A2%9E%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%9F%9F%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%94%A8%E4%BA%8E%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%E4%BB%A5%E5%8F%8A%E5%B5%8C%E5%A5%97%E6%96%87%E6%A1%A3%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Bby_user%3A1%7D%7D%0A%20%20%20%20%5D%0A)%0A%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Bby_user%3A1%2Cid%3A0%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**%24match%EF%BC%9A**%0A-%20%E7%94%A8%E4%BA%8E%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%8F%AA%E8%BE%93%E5%87%BA%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%0A%0A-%20%24match%E4%BD%BF%E7%94%A8MongoDB%E7%9A%84%E6%A0%87%E5%87%86%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%0A%0A%E6%9F%A5%E6%89%BE%E9%9B%86%E5%90%88%E4%B8%AD%E4%B9%A6%E7%B1%8D%E7%82%B9%E8%B5%9E%E9%87%8F%E5%9C%A80%E5%88%B020%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E4%B9%A6%E7%B1%8D%E7%9A%84%E5%90%8D%E7%A7%B0%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A20%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Btitle%3A1%2C_id%3A0%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%E6%80%9D%E8%80%83%E4%B8%8B%E9%9D%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%9F%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A20%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24group%3A%7B_id%3A%22%24by_user%22%2Ccounte%3A%7B%24sum%3A1%7D%2Cavglikes%3A%7B%24avg%3A'%24likes'%7D%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**%24limit%EF%BC%9A**%0A-%20%E7%94%A8%E6%9D%A5%E9%99%90%E5%88%B6MongoDB%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E8%BF%94%E5%9B%9E%E7%9A%84%E6%96%87%E6%A1%A3%E6%95%B0%E3%80%82%0A%0A-%20%E4%BB%8E%E9%9B%86%E5%90%88%E7%9A%84%E8%B5%B7%E5%A7%8B%E4%BD%8D%E7%BD%AE%E6%9F%A5%E6%89%BE%EF%BC%8C%E9%99%90%E5%88%B6%E8%BF%94%E5%9B%9E%E4%B8%A4%E6%9D%A1%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24limit%3A2%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%E6%80%9D%E8%80%83%E4%B8%8B%E9%9D%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%9F%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A20%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Btitle%3A1%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24limit%3A2%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%0A%5C%24skip%E5%9C%A8%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E4%B8%AD%E8%B7%B3%E8%BF%87%E6%8C%87%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%96%87%E6%A1%A3%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E4%BD%99%E4%B8%8B%E7%9A%84%E6%96%87%E6%A1%A3%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24skip%3A2%7D%0A%20%20%20%20%5D%0A)%20%23%E5%9C%A8%E8%81%9A%E5%90%88%E7%AE%A1%E9%81%93%E4%B8%AD%E8%B7%B3%E8%BF%87%E6%8C%87%E5%AE%9A%E6%95%B0%E9%87%8F%E7%9A%84%E6%96%87%E6%A1%A3%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E4%BD%99%E4%B8%8B%E7%9A%84%E6%96%87%E6%A1%A3%E3%80%82%0A%60%60%60%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A20%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24skip%3A2%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Btitle%3A1%7D%7D%0A%20%20%20%20%5D%0A)%0A%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A20%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24skip%3A1%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24limit%3A1%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Btitle%3A1%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%0A**%24sort%EF%BC%9A**%0A-%20%E5%B0%86%E8%BE%93%E5%85%A5%E6%96%87%E6%A1%A3%E6%8E%92%E5%BA%8F%E5%90%8E%E8%BE%93%E5%87%BA%0A%0A%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%87%BA%E7%82%B9%E8%B5%9E%E9%87%8F%E5%A4%A7%E4%BA%8E0%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E800%E7%9A%84%E4%B9%A6%E7%B1%8D%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%8C%89%E7%85%A7%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A800%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24sort%3A%7Blikes%3A-1%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%E4%BE%8B%EF%BC%9A%E6%9F%A5%E8%AF%A2%E5%87%BA%E7%82%B9%E8%B5%9E%E9%87%8F%E5%A4%A7%E4%BA%8E0%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E800%E7%9A%84%E4%B9%A6%E7%B1%8D%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%8C%89%E7%85%A7%E5%8D%87%E5%BA%8F%E6%8E%92%E5%88%97%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24match%3A%7Blikes%3A%7B%24gt%3A0%2C%24lte%3A800%7D%7D%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24sort%3A%7Blikes%3A1%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A**%24unwind**%0A%E5%B0%86%E6%96%87%E6%A1%A3%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E6%9D%A1%EF%BC%8C%E6%AF%8F%E6%9D%A1%E5%8C%85%E5%90%AB%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%80%BC%E3%80%82%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24unwind%3A'%24tags'%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%E6%80%9D%E8%80%83%E4%B8%8B%E9%9D%A2%E8%BF%99%E4%B8%AA%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%90%AB%E4%B9%89%3F%0A%60%60%60%0Adb.article.aggregate(%0A%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%7B%24unwind%3A'%24tags'%7D%2C%0A%20%20%20%20%20%20%20%20%7B%24project%3A%7Btags%3A1%2Ctitle%3A1%2Cuser%3A1%7D%7D%0A%20%20%20%20%5D%0A)%0A%60%60%60%0A%0A-------------------------------------------------%0A%0A%23%23%20**%E7%AE%A1%E7%90%86%E5%91%98**%0A-%20%E4%B8%BA%E4%BA%86%E6%9B%B4%E5%AE%89%E5%85%A8%E7%9A%84%E8%AE%BF%E9%97%AEmongodb%EF%BC%8C%E9%9C%80%E8%A6%81%E8%AE%BF%E9%97%AE%E8%80%85%E6%8F%90%E4%BE%9B%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%EF%BC%8C%E4%BA%8E%E6%98%AF%E9%9C%80%E8%A6%81%E5%9C%A8mongodb%E4%B8%AD%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%0A-%20%E9%87%87%E7%94%A8%E4%BA%86%E8%A7%92%E8%89%B2-%E7%94%A8%E6%88%B7-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F%0A%0A**%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%A7%92%E8%89%B2%E5%A6%82%E4%B8%8B%EF%BC%9A**%0A-%20root%EF%BC%9A%E5%8F%AA%E5%9C%A8admin%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E5%8F%AF%E7%94%A8%EF%BC%8C%E8%B6%85%E7%BA%A7%E8%B4%A6%E5%8F%B7%EF%BC%8C%E8%B6%85%E7%BA%A7%E6%9D%83%E9%99%90%0A-%20Read%EF%BC%9A%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E8%AF%BB%E5%8F%96%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%0A-%20readWrite%EF%BC%9A%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E8%AF%BB%E5%86%99%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93%0A%0A%0A%23%23%23%23%20**%E5%88%9B%E5%BB%BA%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7**%0A%60%60%60%0Ause%20admin%0Adb.createUser(%0A%20%20%20%20%7B%20%20%20%0A%E3%80%80%E3%80%80%20user%3A'%E7%94%A8%E6%88%B7%E5%90%8D'%2C%0A%20%20%20%20pwd%3A'%E5%AF%86%E7%A0%81'%2C%0A%20%20%20%20roles%3A%5B%7Brole%3A'root'%2Cdb%3A'admin'%7D%5D%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F%E5%90%8E%E9%80%80%E5%87%BAmongodb%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%8C%E7%84%B6%E5%90%8Eservice%20mongodb%20stop%EF%BC%8C%E5%86%8D%E5%BC%80%E5%90%AF%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81%2C%E5%90%AF%E7%94%A8%E5%AE%89%E5%85%A8%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%0A%20-%201.%20%E8%BF%9B%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E4%BF%AE%E6%94%B9sudo%20vi%20%2Fetc%2Fmongod.conf%0A%20-%202.%20%E5%90%AF%E7%94%A8%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%0A%0A%E6%96%B0%E7%89%88%E6%9C%AC%0A%E6%B3%A8%E6%84%8F%EF%BC%9Akeys%20and%20values%E4%B9%8B%E9%97%B4%E4%B8%80%E5%AE%9A%E8%A6%81%E5%8A%A0%E7%A9%BA%E6%A0%BC%2C%20%E5%90%A6%E5%88%99%E8%A7%A3%E6%9E%90%E4%BC%9A%E6%8A%A5%E9%94%99%0A%60%60%60%0A%20%20%20security%3A%0A%20%20%E3%80%80%E3%80%80authorization%3A%20enabled%0A%60%60%60%0A%E4%BD%8E%E7%89%88%E6%9C%AC%0A%60%60%60%0A%20%20%20%E6%88%96%E8%80%85%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B0%86auth%3Dtrue%E5%89%8D%E9%9D%A2%E7%9A%84%E6%B3%A8%E9%87%8A%E6%8B%BF%E6%8E%89%E7%84%B6%E5%90%8E%E4%BF%9D%E5%AD%98%E5%B9%B6%E9%80%80%E5%87%BA%0A%60%60%60%0A**%E9%87%8D%E5%90%AF%E5%90%AF%E5%8A%A8mongo%E6%9C%8D%E5%8A%A1**%EF%BC%9A%0A%60%60%60%0Asudo%20service%20mongodb%20restart%0A%60%60%60%0A%E5%A6%82%E6%9E%9C%E8%BF%99%E6%97%B6%E5%80%99%E6%8C%89%E7%85%A7%E4%BB%A5%E5%89%8D%E7%9A%84%E6%93%8D%E4%BD%9C%E4%BC%9A%E6%8F%90%E7%A4%BA%E6%9D%83%E9%99%90%0A%0A!%5B140F108B-0752-4AB4-8597-ACC0DA710192%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77f0a326ef4.png)%0A%0A-%20%E4%BD%BF%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E6%9D%A5%E7%99%BB%E5%BD%95%EF%BC%9A%0A%60%60%60%0Amongo%20-u%20username%20-p%20password%20--authenticationDatabase%20'admin'%0A%60%60%60%0A!%5B60326859-5412-4929-B432-B39B7E481D62%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77f0d042062.png)%0A%0A%0A%23%23%23%23%20**%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86**%0A%20-%201.%E4%BD%BF%E7%94%A8%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%9B%E5%85%A5%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E6%93%8D%E4%BD%9C%0A%20-%202.%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%94%A8%E6%88%B7%0A%0A!%5B697424A8-EEA2-4952-899D-C70C367D9AC2%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77f118285b2.png)%0A%0A%0A**%E6%B3%A8%E6%84%8F%E8%A6%81%E7%BB%99%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E5%93%AA%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E6%9D%83%E9%99%90%E5%B0%B1%E5%85%88%E5%88%87%E6%8D%A2%E5%88%B0%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E5%BA%93**%0A%0A%60%60%60%0Ause%20generalUser%0Adb.createUser(%0A%20%20%20%20%7B%20%20%20%20%20%0A%20%20%20%20%20%20%20%20user%3A't1'%2C%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pwd%3A'123'%2C%20%20%20%20%20%0A%20%20%20%20%20%20%20%20roles%3A%5B%7Brole%3A'readWrite'%2Cdb%3A'test1'%7D%5D%20%0A%20%20%20%20%7D%0A)%0A%60%60%60%0A!%5B2038D5B8-665E-4274-9FCB-325C6534211B%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77f31fd90c6.png)%0A%0A**%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F%E5%90%8E%E6%88%91%E4%BB%AC%E5%85%88%E9%80%80%E5%87%BA%EF%BC%8C%E7%84%B6%E5%90%8E%E7%94%A8%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E8%B4%A6%E5%8F%B7%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%9A**%0A%0A%3E%20mongo%20-u%20username%20-p%20password%20--authenticationDatabase%20dbname%0A%0A!%5B68FBCB94-F6F0-4BD3-8983-7D382D2E93AB%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b77f39142c43.png)%0A%0A**%E4%BF%AE%E6%94%B9%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E6%88%96%E5%AF%86%E7%A0%81**%0A-%20%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%EF%BC%9A%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9pwd%E3%80%81roles%E5%B1%9E%E6%80%A7%0A-%20**%E6%B3%A8%E6%84%8F%E8%BF%99%E9%87%8C%E5%8F%AA%E6%9C%89%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E5%91%98%E6%89%8D%E6%9C%89%E6%9D%83%E9%99%90%E4%BF%AE%E6%94%B9%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%86%E7%A0%81%E5%92%8C%E7%AE%A1%E7%90%86%E6%9D%83%E9%99%90**%0A%0A-%20%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%EF%BC%88%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%89%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%EF%BC%89%0A%3E%20db.updateUser(%E2%80%98%E7%94%A8%E6%88%B7%E5%90%8D'%2C%7Bpwd%3A'%E5%AF%86%E7%A0%81'%7D)%0A%0A-%20%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%EF%BC%88%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%89%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%EF%BC%89%0A%3E%20db.grantRolesToUser('%E7%94%A8%E6%88%B7%E5%90%8D'%2C%5B%7Brole%3A''%2Cdb%3A''%7D%5D)%0A%0A-%20%E7%A7%BB%E9%99%A4%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%EF%BC%88%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%89%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%EF%BC%89%0A%3E%20db.revokeRolesFromUser('%E7%94%A8%E6%88%B7%E5%90%8D'%2C%5B%7Brole%3A''%2Cdb%3A''%7D%5D)%0A%0A-%20%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%EF%BC%88%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%89%EF%BC%88%E5%88%87%E6%8D%A2%E5%88%B0%E6%9C%89%E6%9D%83%E9%99%90%E6%93%8D%E4%BD%9C%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8B%EF%BC%89%0A%3E%20db.dropUser('%E7%94%A8%E6%88%B7%E5%90%8D')%0A%0A-%20%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7%E3%80%80(%E6%96%B9%E5%BC%8F%E4%BA%8C)%0A%3Euse%20admin%0Adb.system.users.remove(%7Buser%3A'%E7%94%A8%E6%88%B7%E5%90%8D'%7D)%0A%0A-----------------------------%0A%0A%23%23%20**MongoDB%20%E5%A4%87%E4%BB%BD(mongodump)**%0A%0A-%20%E5%9C%A8Mongodb%E4%B8%AD%E6%88%91%E4%BB%AC%E4%BD%BF%E7%94%A8mongodump%E5%91%BD%E4%BB%A4%E6%9D%A5%E5%A4%87%E4%BB%BDMongoDB%E6%95%B0%E6%8D%AE%E3%80%82%E8%AF%A5%E5%91%BD%E4%BB%A4%E5%8F%AF%E4%BB%A5%E5%AF%BC%E5%87%BA%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%AD%E3%80%82%0A%0A%E8%AF%AD%E6%B3%95%0Amongodump%E5%91%BD%E4%BB%A4%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%0A%3Emongodump%20-h%20dbhost%20-d%20dbname%20-o%20dbdirectory%0A%0A-%20-h%EF%BC%9A%0AMongDB%E6%89%80%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A127.0.0.1%EF%BC%8C%E5%BD%93%E7%84%B6%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%9A127.0.0.1%3A27017%0A%0A-%20-d%EF%BC%9A%0A%E9%9C%80%E8%A6%81%E5%A4%87%E4%BB%BD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9Atest%0A%0A-%20-o%EF%BC%9A%0A%E5%A4%87%E4%BB%BD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9A%5CDesktop%5Cdata%5Cdump%EF%BC%8C%E5%BD%93%E7%84%B6%E8%AF%A5%E7%9B%AE%E5%BD%95%E9%9C%80%E8%A6%81%E6%8F%90%E5%89%8D%E5%BB%BA%E7%AB%8B%EF%BC%8C%E5%9C%A8%E5%A4%87%E4%BB%BD%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%8A%A8%E5%9C%A8dump%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AAtest%E7%9B%AE%E5%BD%95%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%9B%AE%E5%BD%95%E9%87%8C%E9%9D%A2%E5%AD%98%E6%94%BE%E8%AF%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B%E7%9A%84%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E3%80%82%0A%0A**%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%BC%80%E5%90%AF%E6%9D%83%E9%99%90**%0A%0A%3E%20mongodump%20-h%20127.0.0.1%3A27017%20-d%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0%20-o%20~%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E7%9A%84%E8%B7%AF%E5%BE%84%0A%0A%3E%20mongodump%20-h%20127.0.0.1%3A27017%20-o%20~%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E7%9A%84%E8%B7%AF%E5%BE%84%0A%0A**%E5%A6%82%E6%9E%9C%E5%BC%80%E5%90%AF%E4%BA%86%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE%EF%BC%88%E4%BD%BF%E7%94%A8%E8%B6%85%E7%BA%A7%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90%EF%BC%89**%0A%0A%E4%BD%BF%E7%94%A8%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E7%9A%84%E6%96%B9%E5%BC%8F%E5%A4%87%E4%BB%BD%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%0A%0A%3E%20mongodump%20-u%20username%20-p%20password%20--authenticationDatabase%20'admin'%20-d%20dbname%20-o%20~%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E7%9A%84%E8%B7%AF%E5%BE%84%0A%0A%0A%23%23%20**%E6%81%A2%E5%A4%8D(mongorestore)**%0A%0Amongodb%E4%BD%BF%E7%94%A8%20mongorestore%20%E5%91%BD%E4%BB%A4%E6%9D%A5%E6%81%A2%E5%A4%8D%E5%A4%87%E4%BB%BD%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%82%0A%0A%E8%AF%AD%E6%B3%95%0Amongorestore%E5%91%BD%E4%BB%A4%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%0A%3Emongorestore%20-h%20hostname%3Aport%20-d%20dbname%20%20--dir%20path%0A%0A-%20-host%20%2C%20-h%EF%BC%9A%0AMongoDB%E6%89%80%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BA%EF%BC%9A%20localhost%3A27017%0A%0A-%20-db%20%2C%20-d%EF%BC%9A%0A%E9%9C%80%E8%A6%81%E6%81%A2%E5%A4%8D%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BE%8B%EF%BC%8C%E4%BE%8B%E5%A6%82%EF%BC%9Atest%EF%BC%8C%E5%BD%93%E7%84%B6%E8%BF%99%E4%B8%AA%E5%90%8D%E7%A7%B0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%92%8C%E5%A4%87%E4%BB%BD%E6%97%B6%E5%80%99%E7%9A%84%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%8C%E6%AF%94%E5%A6%82test2%0A%0A-%20--dir%EF%BC%9A%0A%E6%8C%87%E5%AE%9A%E5%A4%87%E4%BB%BD%E7%9A%84%E7%9B%AE%E5%BD%95%0A%0A%23%23%23%23%20**%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%BC%80%E5%90%AF%E6%9D%83%E9%99%90**%0A%0A%3E%20mongorestore%20-h%20127.0.0.1%3A27017%20-d%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0%20--dir%20~%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E7%9A%84%E8%B7%AF%E5%BE%84%0A%0A%3E%20mongorestore%20-h%20127.0.0.1%20-dir%20%20~%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E7%9A%84%E8%B7%AF%E5%BE%84%0A%0A%0A%E4%B8%8B%E9%9D%A2%E6%98%AF%E6%88%91%E6%B7%BB%E5%8A%A0%E4%BA%86%E7%AE%A1%E7%90%86%E5%91%98%E6%9D%83%E9%99%90%E4%B9%8B%E5%90%8E%E7%9A%84%E5%A4%87%E4%BB%BD%E5%91%BD%E4%BB%A4%0A%0A%23%23%23%23%20**%E5%A6%82%E6%9E%9C%E5%BC%80%E5%90%AF%E4%BA%86%E6%9D%83%E9%99%90%E8%AE%BE%E7%BD%AE**%0A%0A%3E%20mongorestore%20-u%20username%20-p%20password%20--authenticationDatabase%20'admin'%20-d%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0%20--dir%20%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%0A%0A%0A%23%23%20**MongoDB%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA**%0A%0A**%E5%AF%BC%E5%87%BA%E5%B7%A5%E5%85%B7%EF%BC%9Amongoexport**%0A%0A%E8%AF%AD%E6%B3%95%EF%BC%9A%0A%3E%20mongoexport%20-d%20dbname%20-c%20collectionname%20-o%20file%20--type%20json%2Fcsv%20-f%20field%0A%0A%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E%EF%BC%9A%0A-%20d%20%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%0A-%20c%20%EF%BC%9Acollection%E5%90%8D%0A-%20o%20%EF%BC%9A%E8%BE%93%E5%87%BA%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D%0A-%20-type%20%EF%BC%9A%20%E8%BE%93%E5%87%BA%E7%9A%84%E6%A0%BC%E5%BC%8F%EF%BC%8C%E9%BB%98%E8%AE%A4%E4%B8%BAjson%0A-%20f%20%EF%BC%9A%E8%BE%93%E5%87%BA%E7%9A%84%E5%AD%97%E6%AE%B5%EF%BC%8C%E5%A6%82%E6%9E%9C-type%E4%B8%BAcsv%EF%BC%8C%E5%88%99%E9%9C%80%E8%A6%81%E5%8A%A0%E4%B8%8A-f%20%22%E5%AD%97%E6%AE%B5%E5%90%8D%22%0A%0A**%E7%A4%BA%E4%BE%8B**%EF%BC%9A%0A%0A%3E%20mongoexport%20-d%20class1804%20-c%20books%20-o%20~%2F%E6%A1%8C%E9%9D%A2%2Fdump%2Fbooks.json%20--type%20json%20%0A%0A%3E%20mongoexport%20-d%20class1804%20-c%20books%20-o%20~%2F%E6%A1%8C%E9%9D%A2%2Fdump%2Fbooks.csv%20--type%20csv%20-f%20'by_user%2Clikes'%0A%0A%23%23%20**MongoDB%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5**%0A%0A**%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%EF%BC%9Amongoimport**%0A%0A%E8%AF%AD%E6%B3%95%EF%BC%9A%0A%3Emongoimport%20-d%20dbname%20-c%20collectionname%20--file%20filename%20--headerline%20--type%20json%2Fcsv%0A%0A%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E%EF%BC%9A%0A-%20d%3A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%0A-%20c%3Acollection%E5%90%8D%0A-%20-type%3A%E5%AF%BC%E5%85%A5%E7%9A%84%E6%A0%BC%E5%BC%8F%E9%BB%98%E8%AE%A4json%0A-%20f%3A%E5%AF%BC%E5%85%A5%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%0A-%20-headerline%3A%E5%A6%82%E6%9E%9C%E5%AF%BC%E5%85%A5%E7%9A%84%E6%A0%BC%E5%BC%8F%E6%98%AFcsv%EF%BC%8C%E5%88%99%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%80%E8%A1%8C%E7%9A%84%E6%A0%87%E9%A2%98%E4%BD%9C%E4%B8%BA%E5%AF%BC%E5%85%A5%E7%9A%84%E5%AD%97%E6%AE%B5%0A-%20-file%3A%E8%A6%81%E5%AF%BC%E5%85%A5%E7%9A%84%E6%96%87%E4%BB%B6%20%0A%0A**%E7%A4%BA%E4%BE%8B**%EF%BC%9A%0A%0A%3E%20mongoimport%20-d%20class1712B%20-c%20books%20%20--file%20~%2F%E6%A1%8C%E9%9D%A2%2Fdump%2Fbooks%20%20--type%20json%0A%0A%3E%20mongoimport%20-d%20class1712B%20-c%20info%20--file%20~%2F%E6%A1%8C%E9%9D%A2%2Fdump%2Fbooks%20--headerline%20--type%20csv%0A%0A-------------------------------------------------------%0A%0A%23%23%20%E5%A4%8D%E5%88%B6%EF%BC%88%E5%89%AF%E6%9C%AC%E9%9B%86%EF%BC%89%E4%B8%BB%E4%BB%8E%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%0A%0A**%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%8D%E5%88%B6**%0A-%20%E5%A4%8D%E5%88%B6%E6%8F%90%E4%BE%9B%E4%BA%86%E6%95%B0%E6%8D%AE%E7%9A%84%E5%86%97%E4%BD%99%E5%A4%87%E4%BB%BD%EF%BC%8C%E5%B9%B6%E5%9C%A8%E5%A4%9A%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E5%89%AF%E6%9C%AC%EF%BC%8C%E6%8F%90%E9%AB%98%E4%BA%86%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%AF%E7%94%A8%E6%80%A7%EF%BC%8C%E5%B9%B6%E5%8F%AF%E4%BB%A5%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%0A-%20%E5%A4%8D%E5%88%B6%E8%BF%98%E5%85%81%E8%AE%B8%E4%BB%8E%E7%A1%AC%E4%BB%B6%E6%95%85%E9%9A%9C%E5%92%8C%E6%9C%8D%E5%8A%A1%E4%B8%AD%E6%96%AD%E4%B8%AD%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE%0A**%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%A4%8D%E5%88%B6**%0A-%20%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%0A-%20%E6%95%B0%E6%8D%AE%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%0A-%20%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%0A-%20%E9%AB%98%EF%BC%8824*%207%EF%BC%89%E6%95%B0%E6%8D%AE%E5%8F%AF%E7%94%A8%E6%80%A7%0A-%20%E6%97%A0%E5%AE%95%E6%9C%BA%E7%BB%B4%E6%8A%A4%0A-%20%E5%89%AF%E6%9C%AC%E9%9B%86%E5%AF%B9%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%98%AF%E9%80%8F%E6%98%8E%0A%0A%0A**%E5%A4%8D%E5%88%B6%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86**%0A%0A-%20%E5%A4%8D%E5%88%B6%E8%87%B3%E5%B0%91%E9%9C%80%E8%A6%81%E4%B8%A4%E4%B8%AA%E8%8A%82%E7%82%B9A%E3%80%81B...%0A-%20A%E6%98%AF%E4%B8%BB%E8%8A%82%E7%82%B9%EF%BC%8C%E8%B4%9F%E8%B4%A3%E5%A4%84%E7%90%86%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%B7%E6%B1%82%0A-%20%E5%85%B6%E4%BD%99%E7%9A%84%E9%83%BD%E6%98%AF%E4%BB%8E%E8%8A%82%E7%82%B9%EF%BC%8C%E8%B4%9F%E8%B4%A3%E5%A4%8D%E5%88%B6%E4%B8%BB%E8%8A%82%E7%82%B9%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%0A-%20%E8%8A%82%E7%82%B9%E5%B8%B8%E8%A7%81%E7%9A%84%E6%90%AD%E9%85%8D%E6%96%B9%E5%BC%8F%E4%B8%BA%EF%BC%9A%E4%B8%80%E4%B8%BB%E4%B8%80%E4%BB%8E%E3%80%81%E4%B8%80%E4%B8%BB%E5%A4%9A%E4%BB%8E%0A-%20%E4%B8%BB%E8%8A%82%E7%82%B9%E8%AE%B0%E5%BD%95%E5%9C%A8%E5%85%B6%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E6%93%8D%E4%BD%9C%EF%BC%8C%E4%BB%8E%E8%8A%82%E7%82%B9%E5%AE%9A%E6%9C%9F%E8%BD%AE%E8%AF%A2%E4%B8%BB%E8%8A%82%E7%82%B9%E8%8E%B7%E5%8F%96%E8%BF%99%E4%BA%9B%E6%93%8D%E4%BD%9C%EF%BC%8C%E7%84%B6%E5%90%8E%E5%AF%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E5%89%AF%E6%9C%AC%E6%89%A7%E8%A1%8C%E8%BF%99%E4%BA%9B%E6%93%8D%E4%BD%9C%EF%BC%8C%E4%BB%8E%E8%80%8C%E4%BF%9D%E8%AF%81%E4%BB%8E%E8%8A%82%E7%82%B9%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%8E%E4%B8%BB%E8%8A%82%E7%82%B9%E4%B8%80%E8%87%B4%0A-%20%E4%B8%BB%E8%8A%82%E7%82%B9%E4%B8%8E%E4%BB%8E%E8%8A%82%E7%82%B9%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E4%BF%9D%E9%9A%9C%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%0A-%20%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%EF%BC%8C%E5%9F%BA%E6%9C%AC%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E8%AE%A9%E4%B8%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%84%E7%90%86%E4%BA%8B%E5%8A%A1%E6%80%A7%E5%A2%9E%E3%80%81%E6%94%B9%E3%80%81%E5%88%A0%E6%93%8D%E4%BD%9C%EF%BC%88INSERT%E3%80%81UPDATE%E3%80%81DELETE%EF%BC%89%EF%BC%8C%E8%80%8C%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%84%E7%90%86SELECT%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E3%80%82%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E5%88%B6%E8%A2%AB%E7%94%A8%E6%9D%A5%E6%8A%8A%E4%BA%8B%E5%8A%A1%E6%80%A7%E6%93%8D%E4%BD%9C%E5%AF%BC%E8%87%B4%E7%9A%84%E5%8F%98%E6%9B%B4%E5%90%8C%E6%AD%A5%E5%88%B0%E9%9B%86%E7%BE%A4%E4%B8%AD%E7%9A%84%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%2C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%B8%BA%E4%BA%86%E5%AE%9E%E7%8E%B0%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E8%AF%B7%E6%B1%82%E5%88%86%E6%B5%81%EF%BC%8C%E9%81%BF%E5%85%8D%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BF%E9%97%AE%E8%BF%87%E4%BA%8E%E9%9B%86%E4%B8%AD%EF%BC%8C%E5%AF%BC%E8%87%B4%E6%80%A7%E8%83%BD%E4%B8%8B%E9%99%8D%E7%94%9A%E8%87%B3%E6%98%AF%E5%AE%95%E6%9C%BA%E3%80%82%0A%0A**%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%B1%80%E9%99%90**%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%EF%BC%881%EF%BC%89%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%9C%A8master%E5%AE%95%E6%9C%BA%E5%90%8E%EF%BC%8C%E6%B2%A1%E6%9C%89%E8%87%AA%E5%8A%A8%E9%80%89%E4%B8%BEmaster%E6%9C%BA%E5%88%B6%EF%BC%8C%E5%AF%BC%E8%87%B4%E4%B8%BB%E8%8A%82%E7%82%B9%E6%9C%8D%E5%8A%A1%E4%B8%80%E6%8C%82%EF%BC%8C%E4%BE%BF%E4%B8%8D%E8%83%BD%E5%AF%B9%E5%A4%96%E6%8F%90%E4%BE%9B%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C%E3%80%82%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%EF%BC%882%EF%BC%89%E6%89%80%E6%9C%89%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C%E9%83%BD%E6%98%AF%E9%92%88%E5%AF%B9%E4%B8%BB%E8%8A%82%E7%82%B9%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%8F%AF%E8%83%BD%E5%AF%BC%E8%87%B4%E4%B8%BB%E8%8A%82%E7%82%B9%E6%80%A7%E8%83%BD%E4%B8%8B%E9%99%8D%E3%80%82%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80%EF%BC%883%EF%BC%89%E4%BB%8E%E8%8A%82%E7%82%B9%E5%AF%B9%E4%B8%BB%E8%8A%82%E7%82%B9%E7%9A%84%E6%95%B0%E6%8D%AE%E9%83%BD%E6%98%AF%E5%85%A8%E9%87%8F%E6%8B%B7%E8%B4%9D%EF%BC%8C%E5%AF%B9%E4%B8%BB%E4%BB%8E%E8%8A%82%E7%82%B9%E7%9A%84%E5%8E%8B%E5%8A%9B%E9%83%BD%E6%98%AF%E4%B8%8D%E5%B0%8F%E7%9A%84%E3%80%82%0A%0A%0A**%E5%A4%8D%E5%88%B6%E7%9A%84%E7%89%B9%E7%82%B9**%0A-%20N%20%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E9%9B%86%E7%BE%A4%0A-%20%E4%BB%BB%E4%BD%95%E8%8A%82%E7%82%B9%E5%8F%AF%E4%BD%9C%E4%B8%BA%E4%B8%BB%E8%8A%82%E7%82%B9%0A-%20%E6%89%80%E6%9C%89%E5%86%99%E5%85%A5%E6%93%8D%E4%BD%9C%E9%83%BD%E5%9C%A8%E4%B8%BB%E8%8A%82%E7%82%B9%E4%B8%8A%0A-%20%E8%87%AA%E5%8A%A8%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB%0A-%20%E8%87%AA%E5%8A%A8%E6%81%A2%E5%A4%8D%0A%0A%0A%23%23%23%23%20**%E8%AE%BE%E7%BD%AE%E5%A4%8D%E5%88%B6%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4**%0A%0A-%20step1%3A%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%AE%E5%BD%95test1%E3%80%81test2%0A%0A-%20step2%20%E5%88%9B%E5%BB%BA%E4%B8%BB%E8%8A%82%E7%82%B9%3A%20%0A%20%20%20%201.%20%E9%A6%96%E5%85%88%E4%BD%BF%E7%94%A8ifconfig%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E7%9A%84IP%E5%9C%B0%E5%9D%80%E8%BF%99%E6%98%AF%E6%88%91Ubuntu%E4%B8%8A%E7%9A%84iP%E5%9C%B0%E5%9D%80%20%0A%20%20%20%202.%20%E5%85%88%E6%89%93%E5%BC%80%E4%B8%80%E4%B8%AA%E7%BB%88%E7%AB%AF%EF%BC%88%E4%BD%9C%E4%B8%BA%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%0A%20%20%20%203.%20%E4%BD%BF%E7%94%A8service%20mongodb%20start%20%E5%BC%80%E5%90%AFmongodb%E6%9C%8D%E5%8A%A1%0A%20%20%20%204.%20%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%90%AF%E5%8A%A8mongod%EF%BC%8C%E6%B3%A8%E6%84%8FreplSet%E7%9A%84%E5%90%8D%E7%A7%B0%E6%98%AF%E4%B8%80%E8%87%B4%E7%9A%84%0A%0A%3Emongod%20--bind_ip%20%E4%B8%BB%E6%9C%BAip%20--port%2027018%20--dbpath%20~%2F%E6%A1%8C%E9%9D%A2%2Ftest1%20--replSet%20rs0%0A%0A-%20step3%20%E5%88%9B%E5%BB%BA%E4%BB%8E%E8%8A%82%E7%82%B9%3A%20%0A%20%20%20%201.%20%E6%89%93%E5%BC%80%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%BB%88%E7%AB%AF%EF%BC%88%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%20%0A%20%20%20%202.%20%E4%BD%BF%E7%94%A8service%20mongodb%20start%20%E5%BC%80%E5%90%AFmongodb%E6%9C%8D%E5%8A%A1%0A%20%20%20%203.%20%E4%BD%BF%E7%94%A8%E5%A6%82%E4%B8%8B%E6%A0%BC%E5%BC%8F%E5%90%AF%E5%8A%A8mongod%EF%BC%8C%E6%B3%A8%E6%84%8FreplSet%E7%9A%84%E5%90%8D%E7%A7%B0%E6%98%AF%E4%B8%80%E8%87%B4%E7%9A%84%0A%3Emongod%20--bind_ip%20192.168.1.118%20--port%2027019%20--dbpath%20~%2F%E6%A1%8C%E9%9D%A2%2Ftest2%20--replSet%20rs0%0A%0A-%20step4%20%E5%BC%80%E5%90%AFmongo%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%93%BE%E6%8E%A5%0A%0A%20%20%20%20-%20%E4%B8%80%E4%B8%AA%E8%BF%9E%E6%8E%A5%EF%BC%9A%0A%20%20%20%20%3E%20mongo%20--host%20192.168.1.118%20--port%2027018%0A%0A%20%20%20%20-%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%BF%9E%E6%8E%A5%EF%BC%9A%0A%20%20%20%20%3E%20mongo%20--host%20192.168.1.118%20--port%2027019%0A%0A%0A-%20step5%20%E8%AE%BE%E7%BD%AE%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%A5192.168.1.118%20--port%2027018%E4%B8%BA%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%0A%20%20%20%20%0A%20%20%20%20%3E%20%E6%89%A7%E8%A1%8C%20rs.initiate()%0A%0A-%20step6%20%E6%B7%BB%E5%8A%A0%E5%89%AF%E6%9C%AC%E9%9B%86%0A%20%20%20%E5%9C%A8%E4%B8%BB%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8rs.add('192.168.1.118%3A27019%E2%80%99)%E6%9D%A5%E6%B7%BB%E5%8A%A0%E4%BB%8E%E6%9C%8D%E5%8A%A1%E8%BF%9E%E6%8E%A5%0A%20%20%20%0A-%20step7%20%E5%A4%8D%E6%9C%AC%E9%9B%86%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E6%AD%A4%E6%97%B6%E6%88%91%E4%BB%AC%E5%86%8D%E6%AC%A1%E9%87%87%E7%94%A8rs.status()%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81%0A%0A%0A-%20step8%20%E5%9C%A8%E4%BB%8E%E6%9C%8D%E5%8A%A1%E8%BF%9E%E6%8E%A5%E7%AA%97%E5%8F%A3%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E7%9A%84%E8%AF%9D%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%0A%20%20%20%20%3E%20rs.slaveOk()%0A%0A%23%23%23%23%20%E6%A3%80%E9%AA%8C%0A%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E6%98%AF%E5%90%A6%E5%A4%87%E4%BB%BD%0A%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5%EF%BC%9A%0A%0A!%5B7D47F664-FB54-4DA9-ADB3-2334B65BB7C4%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b782825b59ae.png)%0A%0A%E5%9C%A8%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E6%98%AF%E5%90%A6%E5%90%8C%E6%AD%A5%0A%0A!%5B45A474F3-6765-4BA1-AF09-8E8F37ECCC97%5D(https%3A%2F%2Fi.loli.net%2F2018%2F08%2F18%2F5b782849d8e49.png)%0A%0A%0A**%E5%85%B6%E5%AE%83%E8%AF%B4%E6%98%8E%EF%BC%88%E4%B8%BB%E4%BB%8E%E5%88%87%E6%8D%A2%EF%BC%89**%0A-%20%E5%88%A0%E9%99%A4%E4%BB%8E%E8%8A%82%E7%82%B9%0Ars.remove('192.168.196.128%3A27018')%0A%E5%85%B3%E9%97%AD%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8E%EF%BC%8C%E5%86%8D%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%EF%BC%8C%E4%BC%9A%E5%8F%91%E7%8E%B0%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%98%E4%B8%BA%E4%BA%86%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%96%B0%E5%90%AF%E5%8A%A8%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%E5%8F%98%E4%B8%BA%E4%BA%86%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%0A-%20%E6%A8%A1%E6%8B%9F%E6%AD%A5%E9%AA%A4%0A1.%E5%B0%86%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81%E5%92%8C%E4%B8%BB%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%95%E6%8E%89%0A2.%E7%84%B6%E5%90%8E%E5%9C%A8%E4%BD%BF%E7%94%A8%E4%B9%8B%E5%89%8D%E7%9A%84%E5%91%BD%E4%BB%A4%E5%88%86%E5%88%AB%E9%87%8D%E5%90%AF%0A3.%E7%84%B6%E5%90%8E%E4%BB%94%E7%BB%86%E8%A7%82%E5%AF%9F%E5%8F%91%E7%8E%B0%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%98%E4%B8%BA%E4%BA%86%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%96%B0%E5%90%AF%E5%8A%A8%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%B8%BB%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%E5%8F%98%E4%B8%BA%E4%BA%86%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E8%BF%99%E5%B0%B1%E6%98%AF%E6%88%91%E4%BB%AC%E4%B9%8B%E5%89%8D%E8%AF%B4%E7%9A%84%E6%97%A0%E5%AE%95%E6%9C%BA%E7%8E%B0%E8%B1%A1%0A%0A%0A---------------------------------%0A%0A%23%23%23%20MongoDB%E7%B4%A2%E5%BC%95%0A%0A*%20%E7%B4%A2%E5%BC%95%E9%80%9A%E5%B8%B8%E8%83%BD%E5%A4%9F%E6%9E%81%E5%A4%A7%E7%9A%84%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%95%88%E7%8E%87%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E7%B4%A2%E5%BC%95%EF%BC%8CMongoDB%E5%9C%A8%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E6%97%B6%E5%BF%85%E9%A1%BB%E6%89%AB%E6%8F%8F%E9%9B%86%E5%90%88%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E6%96%87%E4%BB%B6%E5%B9%B6%E9%80%89%E5%8F%96%E9%82%A3%E4%BA%9B%E7%AC%A6%E5%90%88%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E7%9A%84%E8%AE%B0%E5%BD%95%E3%80%82%E8%BF%99%E7%A7%8D%E6%89%AB%E6%8F%8F%E5%85%A8%E9%9B%86%E5%90%88%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%95%88%E7%8E%87%E6%98%AF%E9%9D%9E%E5%B8%B8%E4%BD%8E%E7%9A%84%EF%BC%8C%E7%89%B9%E5%88%AB%E5%9C%A8%E5%A4%84%E7%90%86%E5%A4%A7%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%8F%AF%E4%BB%A5%E8%A6%81%E8%8A%B1%E8%B4%B9%E5%87%A0%E5%8D%81%E7%A7%92%E7%94%9A%E8%87%B3%E5%87%A0%E5%88%86%E9%92%9F%EF%BC%8C%E8%BF%99%E5%AF%B9%E7%BD%91%E7%AB%99%E7%9A%84%E6%80%A7%E8%83%BD%E6%98%AF%E9%9D%9E%E5%B8%B8%E8%87%B4%E5%91%BD%E7%9A%84%E3%80%82%0A*%20%E7%B4%A2%E5%BC%95%E6%98%AF%E7%89%B9%E6%AE%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%8C%E7%B4%A2%E5%BC%95%E5%AD%98%E5%82%A8%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%98%93%E4%BA%8E%E9%81%8D%E5%8E%86%E8%AF%BB%E5%8F%96%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%E5%90%88%E4%B8%AD%EF%BC%8C%E7%B4%A2%E5%BC%95%E6%98%AF%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%B8%AD%E4%B8%80%E5%88%97%E6%88%96%E5%A4%9A%E5%88%97%E7%9A%84%E5%80%BC%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F%E7%9A%84%E4%B8%80%E7%A7%8D%E7%BB%93%E6%9E%84%0A%0A%0A%23%23%23%23%20**createIndex()%20%E6%96%B9%E6%B3%95**%0A%0AMongoDB%E4%BD%BF%E7%94%A8%20createIndex()%20%E6%96%B9%E6%B3%95%E6%9D%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E3%80%82%0A%0A%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA%EF%BC%9A%0A%0A%3Edb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%E7%B4%A2%E5%BC%95Keys%2C%20options)%0A%0A-%20Key%20%E5%80%BC%E4%B8%BA%E4%BD%A0%E8%A6%81%E5%88%9B%E5%BB%BA%E7%9A%84%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%EF%BC%8C1%20%E4%B8%BA%E6%8C%87%E5%AE%9A%E6%8C%89%E5%8D%87%E5%BA%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%83%B3%E6%8C%89%E9%99%8D%E5%BA%8F%E6%9D%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%8C%87%E5%AE%9A%E4%B8%BA%20-1%20%E5%8D%B3%E5%8F%AF%E3%80%82%0A%0A-%20options%E4%B8%8B%E9%9C%80%E8%A6%81%E6%8E%8C%E6%8F%A1%E7%9A%84%E5%8F%82%E6%95%B0%20%0A%0AParameter%09%7CType%09%7CDescription%0A------%20%7C%20------%20%7C%20------%0Abackground%7C%09Boolean%7C%20%E5%BB%BA%E7%B4%A2%E5%BC%95%E8%BF%87%E7%A8%8B%E4%BC%9A%E9%98%BB%E5%A1%9E%E5%85%B6%E5%AE%83%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%2C%20background%E5%8F%AF%E6%8C%87%E5%AE%9A%E4%BB%A5%E5%90%8E%E5%8F%B0%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8D%B3%E5%A2%9E%E5%8A%A0%20%22background%22%20%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%E3%80%82%20%22background%22%20%E9%BB%98%E8%AE%A4%E5%80%BC%E4%B8%BAfalse%E3%80%82%0Aunique%7C%09Boolean%7C%09%E5%BB%BA%E7%AB%8B%E7%9A%84%E7%B4%A2%E5%BC%95%E6%98%AF%E5%90%A6%E5%94%AF%E4%B8%80%E3%80%82%E6%8C%87%E5%AE%9A%E4%B8%BAtrue%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%E4%B8%BAfalse.%0Aname%7C%09string%7C%09%E7%B4%A2%E5%BC%95%E7%9A%84%E5%90%8D%E7%A7%B0%E3%80%82%E5%A6%82%E6%9E%9C%E6%9C%AA%E6%8C%87%E5%AE%9A%EF%BC%8CMongoDB%E7%9A%84%E9%80%9A%E8%BF%87%E8%BF%9E%E6%8E%A5%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E5%92%8C%E6%8E%92%E5%BA%8F%E9%A1%BA%E5%BA%8F%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E7%B4%A2%E5%BC%95%E5%90%8D%E7%A7%B0%E3%80%82%0Asparse%7C%09Boolean%09%7C%E5%AF%B9%E6%96%87%E6%A1%A3%E4%B8%AD%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%90%AF%E7%94%A8%E7%B4%A2%E5%BC%95%EF%BC%9B%E8%BF%99%E4%B8%AA%E5%8F%82%E6%95%B0%E9%9C%80%E8%A6%81%E7%89%B9%E5%88%AB%E6%B3%A8%E6%84%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%AE%BE%E7%BD%AE%E4%B8%BAtrue%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%9C%A8%E7%B4%A2%E5%BC%95%E5%AD%97%E6%AE%B5%E4%B8%AD%E4%B8%8D%E4%BC%9A%E6%9F%A5%E8%AF%A2%E5%87%BA%E4%B8%8D%E5%8C%85%E5%90%AB%E5%AF%B9%E5%BA%94%E5%AD%97%E6%AE%B5%E7%9A%84%E6%96%87%E6%A1%A3.%E3%80%82%E9%BB%98%E8%AE%A4%E5%80%BC%E4%B8%BA%20false.%0A%0AcreateIndex()%20%E6%96%B9%E6%B3%95%E4%B8%AD%E4%B9%9F%E5%8F%AF%E4%BB%A5%E8%AE%BE%E7%BD%AE%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%88%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%A7%B0%E4%BD%9C%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%EF%BC%89%E3%80%82%0A%0A%0A%23%23%23%23%20%E6%8F%92%E5%85%A510%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%0A%60%60%60%0Afor(i%3D0%3Bi%3C100000%3Bi%2B%2B)%7Bdb.students.insert(%7Bname%3A'testname'%2Bi%2Cage%3Ai%7D)%7D%0A%0Adb.t1.find(%7Bname%3A'testname10000'%7D)%0Adb.t1.find(%7Bname%3A'testname10000'%7D).explain('executionStats')%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%8D%95%E9%94%AE%E7%B4%A2%E5%BC%95**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%7B%22%E7%B4%A2%E5%BC%95Key%22%3A1%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%7B%22%E7%B4%A2%E5%BC%95Key%22%3A1%2C%22%E7%B4%A2%E5%BC%95Key%22%3A-1%7D)%0A%60%60%60%0A%0A%23%23%23%23%20**%E6%9F%A5%E7%9C%8B%E6%9F%90%E9%9B%86%E5%90%88%E4%B8%8B%E7%9A%84%E7%B4%A2%E5%BC%95**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.getIndexes()%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.dropIndex(%22IndexName%22)%0A%60%60%60%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.dropIndexes()%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%9C%A8%E5%90%8E%E5%8F%B0%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%9A**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%0A%20%20%20%20%7B%E7%B4%A2%E5%BC%95Key%3A1%2C%E7%B4%A2%E5%BC%95Key%3A1%7D%2C%0A%20%20%20%20%7Bbackground%3A%20true%7D%0A%20%20%20%20)%0A%60%60%60%0A%0A%23%23%23%23%20**%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%3A**%0A%0A%E5%AF%B9%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AE%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%9D%E8%AF%81%E5%AD%97%E6%AE%B5%E5%94%AF%E4%B8%80%E6%80%A7%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%0A%20%20%20%20%7B%E7%B4%A2%E5%BC%95Key%3A1%2C%E7%B4%A2%E5%BC%95Key%3A1%7D%2C%0A%20%20%20%20%7Bunique%3A%20true%7D%0A%20%20%20%20)%0A%60%60%60%0A%0A%23%23%23%23%20**%E8%AE%BE%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%90%8D%E7%A7%B0**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%0A%20%20%20%20%7B%E7%B4%A2%E5%BC%95Key%3A1%2C%E7%B4%A2%E5%BC%95Key%3A1%7D%2C%0A%20%20%20%20%7Bname%3A%22index_name%22%7D%0A)%0A%60%60%60%0A%0A%23%23%23%23%20**sparse%EF%BC%88%E7%A8%80%E7%96%8F%E7%B4%A2%E5%BC%95%EF%BC%89**%0A%60%60%60%0Adb.%E9%9B%86%E5%90%88%E5%90%8D%E7%A7%B0.createIndex(%0A%20%20%20%20%7B%22%E7%B4%A2%E5%BC%95Key%22%3A%201%7D%2C%20%0A%20%20%20%20%7B%22sparse%22%3A%20true%7D%0A%20%20%20%20)%0A%60%60%60%0A%E7%A8%80%E7%96%8F%E7%B4%A2%E5%BC%95%EF%BC%9A%E5%AF%B9%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E9%94%AE%E5%B0%B1%E4%B8%8D%E8%BF%9B%E8%A1%8C%E7%B4%A2%E5%BC%95%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%A5%E6%96%87%E6%A1%A3%E4%B8%8A%E6%B2%A1%E6%9C%89%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%EF%BC%8C%E7%B4%A2%E5%BC%95%E6%9D%A1%E7%9B%AE%E4%B8%AD%E4%B9%9F%E4%B8%8D%E5%8C%85%E5%90%AB%E7%B4%A2%E5%BC%95%E9%94%AE%E4%B8%BAnull%E7%9A%84%E7%B4%A2%E5%BC%95%E6%9D%A1%E7%9B%AE%EF%BC%8C%E5%86%8D%E6%AC%A1%E6%8F%92%E5%85%A5%E4%B8%8D%E5%8C%85%E5%90%AB%E7%B4%A2%E5%BC%95%E9%94%AE%E7%9A%84%E6%96%87%E6%A1%A3%E4%B8%8D%E4%BC%9A%E6%8A%A5%E9%94%99%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%8F%92%E5%85%A5%E3%80%82%0A%0A%0A%23%23%23%20**%E7%B4%A2%E5%BC%95%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9**%0A%0A-%20%E9%A2%9D%E5%A4%96%E5%BC%80%E9%94%80%0A%E6%AF%8F%E4%B8%AA%E7%B4%A2%E5%BC%95%E5%8D%A0%E6%8D%AE%E4%B8%80%E5%AE%9A%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%9C%A8%E8%BF%9B%E8%A1%8C%E6%8F%92%E5%85%A5%EF%BC%8C%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C%E6%97%B6%E4%B9%9F%E9%9C%80%E8%A6%81%E5%AF%B9%E7%B4%A2%E5%BC%95%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E3%80%82%E6%89%80%E4%BB%A5%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%BE%88%E5%B0%91%E5%AF%B9%E9%9B%86%E5%90%88%E8%BF%9B%E8%A1%8C%E8%AF%BB%E5%8F%96%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%BB%BA%E8%AE%AE%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E3%80%82%0A%0A-%20%E5%86%85%E5%AD%98(RAM)%E4%BD%BF%E7%94%A8%0A%E7%94%B1%E4%BA%8E%E7%B4%A2%E5%BC%95%E6%98%AF%E5%AD%98%E5%82%A8%E5%9C%A8%E5%86%85%E5%AD%98(RAM)%E4%B8%AD%2C%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%A1%AE%E4%BF%9D%E8%AF%A5%E7%B4%A2%E5%BC%95%E7%9A%84%E5%A4%A7%E5%B0%8F%E4%B8%8D%E8%B6%85%E8%BF%87%E5%86%85%E5%AD%98%E7%9A%84%E9%99%90%E5%88%B6%E3%80%82%0A%E5%A6%82%E6%9E%9C%E7%B4%A2%E5%BC%95%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%A4%A7%E4%BA%8E%E5%86%85%E5%AD%98%E7%9A%84%E9%99%90%E5%88%B6%EF%BC%8CMongoDB%E4%BC%9A%E5%88%A0%E9%99%A4%E4%B8%80%E4%BA%9B%E7%B4%A2%E5%BC%95%EF%BC%8C%E8%BF%99%E5%B0%86%E5%AF%BC%E8%87%B4%E6%80%A7%E8%83%BD%E4%B8%8B%E9%99%8D%E3%80%82%0A%0A-%20%E6%9F%A5%E8%AF%A2%E9%99%90%E5%88%B6%0A%E7%B4%A2%E5%BC%95%E4%B8%8D%E8%83%BD%E8%A2%AB%E4%BB%A5%E4%B8%8B%E7%9A%84%E6%9F%A5%E8%AF%A2%E4%BD%BF%E7%94%A8%EF%BC%9A%0A%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%8A%E9%9D%9E%E6%93%8D%E4%BD%9C%E7%AC%A6%EF%BC%8C%E5%A6%82%20%5C%24nin%2C%20%5C%24not%2C%5C%24in%2C%3E%2C%20%E7%AD%89%E3%80%82%0A%0A-%20%E6%9C%80%E5%A4%A7%E8%8C%83%E5%9B%B4%0A%E9%9B%86%E5%90%88%E4%B8%AD%E7%B4%A2%E5%BC%95%E4%B8%8D%E8%83%BD%E8%B6%85%E8%BF%8764%E4%B8%AA%0A%E7%B4%A2%E5%BC%95%E5%90%8D%E7%9A%84%E9%95%BF%E5%BA%A6%E4%B8%8D%E8%83%BD%E8%B6%85%E8%BF%87128%E4%B8%AA%E5%AD%97%E7%AC%A6%0A%E4%B8%80%E4%B8%AA%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95%E6%9C%80%E5%A4%9A%E5%8F%AF%E4%BB%A5%E6%9C%8931%E4%B8%AA%E5%AD%97%E6%AE%B5%0A%0A%0A%0A%0A%0A%0A%0A%0A</center></div></body></html>